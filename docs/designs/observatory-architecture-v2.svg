<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1100" width="1400" height="1100">
  <title>Interactive Crawl Observatory - Architecture</title>
  <desc>Sandboxed decision editing with step-by-step crawl confirmation. Luxury Industrial Obsidian theme.</desc>
  
  <defs>
    <!-- Gradients -->
    <linearGradient id="obsidianGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0d1320"/>
      <stop offset="100%" style="stop-color:#0a0f1a"/>
    </linearGradient>
    
    <linearGradient id="panelGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1e232c"/>
      <stop offset="100%" style="stop-color:#14181f"/>
    </linearGradient>
    
    <linearGradient id="sandboxGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1a2535"/>
      <stop offset="100%" style="stop-color:#0f1520"/>
    </linearGradient>
    
    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#9a7b1c"/>
      <stop offset="50%" style="stop-color:#c9a227"/>
      <stop offset="100%" style="stop-color:#9a7b1c"/>
    </linearGradient>
    
    <!-- Glow filter -->
    <filter id="goldGlow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feFlood flood-color="#c9a227" flood-opacity="0.4"/>
      <feComposite in2="blur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="softShadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="3" stdDeviation="4" flood-color="#000" flood-opacity="0.5"/>
    </filter>
    
    <!-- Arrow markers -->
    <marker id="arrowGold" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#c9a227"/>
    </marker>
    
    <marker id="arrowSlate" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#64748b"/>
    </marker>
    
    <!-- Rivet pattern -->
    <pattern id="rivetPattern" width="20" height="20" patternUnits="userSpaceOnUse">
      <circle cx="10" cy="10" r="3" fill="#2d3548"/>
      <circle cx="10" cy="10" r="2" fill="#3d4558"/>
      <circle cx="9" cy="9" r="1" fill="#4d5568"/>
    </pattern>
  </defs>
  
  <style>
    .title { font-family: 'Inter', sans-serif; font-size: 28px; font-weight: 700; fill: #e2e8f0; }
    .subtitle { font-family: 'Inter', sans-serif; font-size: 14px; fill: #94a3b8; }
    .section-title { font-family: 'Inter', sans-serif; font-size: 16px; font-weight: 600; fill: #c9a227; }
    .label { font-family: 'Inter', sans-serif; font-size: 12px; font-weight: 500; fill: #e2e8f0; }
    .text { font-family: 'Inter', sans-serif; font-size: 11px; fill: #94a3b8; }
    .code { font-family: 'JetBrains Mono', monospace; font-size: 10px; fill: #64748b; }
    .highlight { fill: #c9a227; }
    .success { fill: #22c55e; }
    .error { fill: #ef4444; }
    .info { fill: #3b82f6; }
  </style>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- BACKGROUND -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <rect width="1400" height="1100" fill="url(#obsidianGrad)"/>
  
  <!-- Subtle grid -->
  <defs>
    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
      <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#c9a227" stroke-width="0.3" opacity="0.06"/>
    </pattern>
  </defs>
  <rect width="1400" height="1100" fill="url(#grid)"/>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- HEADER -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <rect x="30" y="20" width="1340" height="60" rx="4" fill="url(#panelGrad)" filter="url(#softShadow)"/>
  <rect x="30" y="20" width="1340" height="60" rx="4" fill="none" stroke="#2d3548" stroke-width="1"/>
  
  <!-- Decorative rivets -->
  <circle cx="50" cy="50" r="4" fill="#2d3548"/><circle cx="50" cy="50" r="2.5" fill="#3d4558"/>
  <circle cx="70" cy="50" r="4" fill="#2d3548"/><circle cx="70" cy="50" r="2.5" fill="#3d4558"/>
  <circle cx="1350" cy="50" r="4" fill="#2d3548"/><circle cx="1350" cy="50" r="2.5" fill="#3d4558"/>
  <circle cx="1330" cy="50" r="4" fill="#2d3548"/><circle cx="1330" cy="50" r="2.5" fill="#3d4558"/>
  
  <text x="700" y="45" text-anchor="middle" class="title">ğŸ”¬ Interactive Crawl Observatory</text>
  <text x="700" y="68" text-anchor="middle" class="subtitle">Sandboxed Rule Editing â€¢ Step-by-Step Confirmation â€¢ AI-Operable APIs</text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 1: PRODUCTION â†’ SANDBOX â†’ DISPOSITION -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <!-- PRODUCTION FILES -->
  <g transform="translate(30, 100)">
    <rect width="380" height="220" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="380" height="220" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <!-- Header bar -->
    <rect width="380" height="32" rx="6" fill="#1a1f2e"/>
    <rect y="26" width="380" height="6" fill="#1a1f2e"/>
    <text x="16" y="22" class="section-title">ğŸ“ PRODUCTION FILES</text>
    <text x="280" y="22" class="code">(read-only)</text>
    
    <!-- Content -->
    <text x="16" y="55" class="label">config/decision-trees/</text>
    <text x="26" y="72" class="code">â”œâ”€â”€ page-categories.json</text>
    <text x="26" y="86" class="code">â”œâ”€â”€ url-classification.json</text>
    <text x="26" y="100" class="code">â””â”€â”€ hub-detection.json</text>
    
    <text x="16" y="125" class="label">config/priority-config.json</text>
    <text x="26" y="142" class="code">â”œâ”€â”€ bonuses: { hub: 15, article: 10 }</text>
    <text x="26" y="156" class="code">â”œâ”€â”€ weights: { depth: 0.2, freshness: 0.3 }</text>
    <text x="26" y="170" class="code">â””â”€â”€ thresholds: { minConfidence: 0.5 }</text>
    
    <text x="16" y="195" class="label">config/classification-patterns.json</text>
    <text x="26" y="210" class="code">â””â”€â”€ URL regexes, content signals</text>
  </g>
  
  <!-- Arrow: Production â†’ Sandbox -->
  <g transform="translate(410, 190)">
    <line x1="0" y1="20" x2="70" y2="20" stroke="#c9a227" stroke-width="2" marker-end="url(#arrowGold)"/>
    <text x="10" y="10" class="code" fill="#c9a227">clone on</text>
    <text x="10" y="45" class="code" fill="#c9a227">session start</text>
  </g>
  
  <!-- SANDBOX (central, emphasized) -->
  <g transform="translate(490, 100)">
    <rect width="420" height="220" rx="6" fill="url(#sandboxGrad)" filter="url(#goldGlow)"/>
    <rect width="420" height="220" rx="6" fill="none" stroke="#c9a227" stroke-width="2" stroke-dasharray="8,4"/>
    
    <!-- Header bar -->
    <rect width="420" height="32" rx="6" fill="#1a2535"/>
    <rect y="26" width="420" height="6" fill="#1a2535"/>
    <text x="16" y="22" class="section-title" filter="url(#goldGlow)">ğŸ§ª SESSION SANDBOX</text>
    <text x="300" y="22" class="code" fill="#c9a227">(in-memory)</text>
    
    <!-- Content -->
    <text x="16" y="55" class="label">Working copies of all rules</text>
    <text x="26" y="75" class="text">â€¢ Cloned from production at session start</text>
    <text x="26" y="92" class="text">â€¢ ALL edits apply here â€” never to disk</text>
    <text x="26" y="109" class="text">â€¢ Crawler uses sandbox during session</text>
    <text x="26" y="126" class="text">â€¢ Re-evaluate pending decisions on edit</text>
    
    <rect x="16" y="140" width="388" height="70" rx="4" fill="#0d1320" stroke="#2d3548"/>
    <text x="26" y="158" class="label">Sandbox State</text>
    <text x="26" y="175" class="code">{ dirty: true, edits: 5, lastEdit: "bonuses.hub = 20" }</text>
    <text x="26" y="195" class="label">Diff from production:</text>
    <text x="180" y="195" class="code">bonuses.hub: 15 â†’ 20  â€¢  minConfidence: 0.5 â†’ 0.6</text>
  </g>
  
  <!-- Arrow: Sandbox â†’ Disposition -->
  <g transform="translate(910, 190)">
    <line x1="0" y1="20" x2="60" y2="20" stroke="#64748b" stroke-width="2" marker-end="url(#arrowSlate)"/>
    <text x="8" y="10" class="code">session</text>
    <text x="15" y="45" class="code">ends</text>
  </g>
  
  <!-- DISPOSITION -->
  <g transform="translate(980, 100)">
    <rect width="390" height="220" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="390" height="220" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <!-- Header bar -->
    <rect width="390" height="32" rx="6" fill="#1a1f2e"/>
    <rect y="26" width="390" height="6" fill="#1a1f2e"/>
    <text x="16" y="22" class="section-title">ğŸ’¾ DISPOSITION</text>
    
    <!-- Options -->
    <text x="16" y="55" class="label">When session ends, choose:</text>
    
    <rect x="16" y="65" width="358" height="34" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="30" y="80" class="text">ğŸ—‘ï¸</text>
    <text x="55" y="80" class="label">DISCARD</text>
    <text x="130" y="80" class="text">â€” Sandbox evaporates, production unchanged</text>
    
    <rect x="16" y="105" width="358" height="34" rx="4" fill="#14181f" stroke="#c9a227" stroke-opacity="0.5"/>
    <text x="30" y="120" class="text">ğŸ“</text>
    <text x="55" y="120" class="label highlight">SAVE AS VARIANT</text>
    <text x="30" y="133" class="code">â†’ priority-config.experimental.json</text>
    
    <rect x="16" y="145" width="358" height="34" rx="4" fill="#14181f" stroke="#ef4444" stroke-opacity="0.5"/>
    <text x="30" y="160" class="text">âš ï¸</text>
    <text x="55" y="160" class="label error">REPLACE PRODUCTION</text>
    <text x="30" y="173" class="code">Overwrite original (auto-backup created)</text>
    
    <rect x="16" y="185" width="358" height="28" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="30" y="204" class="text">ğŸ“¤</text>
    <text x="55" y="204" class="label">EXPORT JSON</text>
    <text x="160" y="204" class="text">â€” Download for offline analysis</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 2: OBSERVATORY CONTROLLER (full width) -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <g transform="translate(30, 340)">
    <rect width="1340" height="200" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="1340" height="200" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <!-- Header bar -->
    <rect width="1340" height="32" rx="6" fill="#1a1f2e"/>
    <rect y="26" width="1340" height="6" fill="#1a1f2e"/>
    <text x="16" y="22" class="section-title">ğŸ›ï¸ OBSERVATORY CONTROLLER</text>
    <text x="280" y="22" class="text">â€” Wraps NewsCrawler in step-by-step mode</text>
    
    <!-- Rivets -->
    <circle cx="1300" cy="16" r="4" fill="#2d3548"/><circle cx="1300" cy="16" r="2.5" fill="#3d4558"/>
    <circle cx="1320" cy="16" r="4" fill="#2d3548"/><circle cx="1320" cy="16" r="2.5" fill="#3d4558"/>
    
    <!-- Decision Queue -->
    <rect x="16" y="45" width="320" height="140" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="26" y="65" class="label">ğŸ“‹ Decision Queue</text>
    <text x="26" y="82" class="text">Pending decisions awaiting confirmation</text>
    
    <rect x="26" y="92" width="300" height="85" rx="3" fill="#0d1320"/>
    <text x="36" y="110" class="code">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</text>
    <text x="36" y="124" class="code">â”‚ dec_001: /world/uk      </text><text x="255" y="124" class="code highlight">â³ pending</text><text x="320" y="124" class="code">â”‚</text>
    <text x="36" y="138" class="code">â”‚ dec_002: /world/france  </text><text x="255" y="138" class="code highlight">â³ pending</text><text x="320" y="138" class="code">â”‚</text>
    <text x="36" y="152" class="code">â”‚ dec_003: /article/123   </text><text x="255" y="152" class="code highlight">â³ pending</text><text x="320" y="152" class="code">â”‚</text>
    <text x="36" y="166" class="code">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</text>
    
    <!-- Decision Explainer -->
    <rect x="350" y="45" width="380" height="140" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="360" y="65" class="label">ğŸ” Decision Explainer</text>
    <text x="360" y="82" class="text">Why this URL? What rules applied?</text>
    
    <rect x="360" y="92" width="360" height="85" rx="3" fill="#0d1320"/>
    <text x="370" y="110" class="code">URL: /world/uk</text>
    <text x="510" y="110" class="code">Confidence:</text><text x="585" y="110" class="code success">85%</text>
    <text x="630" y="110" class="code">Priority:</text><text x="690" y="110" class="code highlight">72</text>
    <text x="370" y="128" class="code">â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</text>
    <text x="370" y="145" class="code">Factors:</text>
    <text x="430" y="145" class="code">hub_tree: +27</text>
    <text x="530" y="145" class="code">depth: +12</text>
    <text x="610" y="145" class="code">pattern: +18</text>
    <text x="370" y="162" class="code">Applied rules:</text>
    <text x="465" y="162" class="code">priority-config.json:bonuses.hub = 15</text>
    
    <!-- Confirmation API -->
    <rect x="744" y="45" width="280" height="140" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="754" y="65" class="label">âœ“âœ— Confirmation API</text>
    <text x="754" y="82" class="text">Human or AI can call these</text>
    
    <text x="764" y="102" class="code">confirm(decisionId, { note })</text>
    <text x="764" y="118" class="code">reject(decisionId, { reason })</text>
    <text x="764" y="134" class="code">skip(decisionId)</text>
    <text x="764" y="154" class="code highlight">confirmBatch(ids)  // AI batch mode</text>
    <text x="764" y="170" class="code">flagForReview(id)  // AI â†’ Human</text>
    
    <!-- Decision Chain -->
    <rect x="1038" y="45" width="286" height="140" rx="4" fill="#14181f" stroke="#c9a227" stroke-opacity="0.5"/>
    <text x="1048" y="65" class="label">â›“ï¸ Decision Chain</text>
    <text x="1048" y="82" class="text">Active rule files (ordered)</text>
    
    <text x="1058" y="105" class="code">1. page-categories.json</text><text x="1230" y="105" class="code highlight">[primary]</text>
    <text x="1058" y="122" class="code">2. page-categories.news.json</text><text x="1230" y="122" class="code">[overlay]</text>
    <text x="1058" y="139" class="code" fill="#64748b">3. (your variant here?)</text>
    
    <text x="1058" y="162" class="code">addToChain(variant, pos)</text>
    <text x="1058" y="176" class="code">removeFromChain(variant)</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- Arrow: Sandbox â†’ Controller -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <line x1="700" y1="320" x2="700" y2="340" stroke="#c9a227" stroke-width="2" marker-end="url(#arrowGold)"/>
  <text x="710" y="334" class="code" fill="#c9a227">uses sandbox rules</text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 3: UI + API + AI -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <!-- UI LAYER -->
  <g transform="translate(30, 560)">
    <rect width="580" height="240" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="580" height="240" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <rect width="580" height="32" rx="6" fill="#1a1f2e"/>
    <rect y="26" width="580" height="6" fill="#1a1f2e"/>
    <text x="16" y="22" class="section-title">ğŸ–¥ï¸ OBSERVATORY UI</text>
    <text x="190" y="22" class="text">â€” jsgui3 isomorphic controls</text>
    
    <!-- Control grid -->
    <rect x="16" y="45" width="175" height="85" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="26" y="65" class="label">DecisionQueueControl</text>
    <text x="26" y="82" class="code">â€¢ List pending decisions</text>
    <text x="26" y="96" class="code">â€¢ [âœ“] [âœ—] buttons</text>
    <text x="26" y="110" class="code">â€¢ Sort by priority</text>
    <text x="26" y="124" class="code">â€¢ Filter by type</text>
    
    <rect x="200" y="45" width="185" height="85" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="210" y="65" class="label">DecisionDetailControl</text>
    <text x="210" y="82" class="code">â€¢ Rationale display</text>
    <text x="210" y="96" class="code">â€¢ Factor breakdown</text>
    <text x="210" y="110" class="code">â€¢ Alternatives list</text>
    <text x="210" y="124" class="code">â€¢ Applied rules</text>
    
    <rect x="394" y="45" width="170" height="85" rx="4" fill="#14181f" stroke="#c9a227" stroke-opacity="0.5"/>
    <text x="404" y="65" class="label highlight">RuleEditorControl</text>
    <text x="404" y="82" class="code">â€¢ Edit sandbox rules</text>
    <text x="404" y="96" class="code">â€¢ See diff from prod</text>
    <text x="404" y="110" class="code">â€¢ Validate changes</text>
    <text x="404" y="124" class="code">â€¢ Hot-reload</text>
    
    <rect x="16" y="138" width="175" height="85" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="26" y="158" class="label">DecisionHistoryControl</text>
    <text x="26" y="175" class="code">â€¢ Past decisions log</text>
    <text x="26" y="189" class="code">â€¢ Searchable</text>
    <text x="26" y="203" class="code">â€¢ Export timeline</text>
    <text x="26" y="217" class="code">â€¢ Replay path</text>
    
    <rect x="200" y="138" width="185" height="85" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="210" y="158" class="label">SessionSummaryControl</text>
    <text x="210" y="175" class="code">â€¢ Stats: 24âœ“ 8âœ—</text>
    <text x="210" y="189" class="code">â€¢ Avg confidence: 0.76</text>
    <text x="210" y="203" class="code">â€¢ Rule edits: 5</text>
    <text x="210" y="217" class="code">â€¢ Session duration</text>
    
    <rect x="394" y="138" width="170" height="85" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="404" y="158" class="label">DecisionTreeViewerCtrl</text>
    <text x="404" y="175" class="code">â€¢ Visualize trees</text>
    <text x="404" y="189" class="code">â€¢ Highlight path</text>
    <text x="404" y="203" class="code">â€¢ Node inspection</text>
    <text x="404" y="217" class="code">â€¢ Branch editing</text>
  </g>
  
  <!-- API LAYER -->
  <g transform="translate(625, 560)">
    <rect width="360" height="240" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="360" height="240" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <rect width="360" height="32" rx="6" fill="#1a1f2e"/>
    <rect y="26" width="360" height="6" fill="#1a1f2e"/>
    <text x="16" y="22" class="section-title">ğŸ”Œ OBSERVATORY SERVER API</text>
    
    <text x="16" y="55" class="label">Express Routes</text>
    
    <text x="26" y="75" class="code">GET  /                     </text><text x="200" y="75" class="text">Dashboard HTML</text>
    <text x="26" y="91" class="code">GET  /api/decisions        </text><text x="200" y="91" class="text">Pending queue</text>
    <text x="26" y="107" class="code">POST /api/decisions/:id/confirm</text>
    <text x="26" y="123" class="code">POST /api/decisions/:id/reject</text>
    <text x="26" y="139" class="code">POST /api/decisions/batch</text>
    
    <rect x="16" y="150" width="328" height="3" fill="#2d3548"/>
    
    <text x="26" y="170" class="code highlight">GET  /api/sandbox          </text><text x="200" y="170" class="text">Current state</text>
    <text x="26" y="186" class="code highlight">PATCH /api/sandbox         </text><text x="200" y="186" class="text">Edit rule</text>
    <text x="26" y="202" class="code highlight">POST /api/sandbox/save     </text><text x="200" y="202" class="text">Save as variant</text>
    <text x="26" y="218" class="code">GET  /api/chain            </text><text x="200" y="218" class="text">Decision chain</text>
    <text x="26" y="234" class="code info">WS   /ws                   </text><text x="200" y="234" class="text">Real-time updates</text>
  </g>
  
  <!-- AI OPERABILITY -->
  <g transform="translate(1000, 560)">
    <rect width="370" height="240" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="370" height="240" rx="6" fill="none" stroke="#3b82f6" stroke-width="1"/>
    
    <rect width="370" height="32" rx="6" fill="#1a1f2e"/>
    <rect y="26" width="370" height="6" fill="#1a1f2e"/>
    <text x="16" y="22" class="section-title" fill="#3b82f6">ğŸ¤– AI OPERABILITY</text>
    
    <text x="16" y="55" class="label">AI agents can:</text>
    <text x="26" y="75" class="text">â€¢ Poll /api/decisions for pending queue</text>
    <text x="26" y="92" class="text">â€¢ Analyze rationale programmatically</text>
    <text x="26" y="109" class="text">â€¢ Approve/reject via API</text>
    <text x="26" y="126" class="text">â€¢ Batch confirm low-risk items</text>
    <text x="26" y="143" class="text">â€¢ Flag uncertain â†’ human review</text>
    <text x="26" y="160" class="text">â€¢ Edit sandbox rules via API</text>
    <text x="26" y="177" class="text">â€¢ Export session as training data</text>
    
    <rect x="16" y="188" width="338" height="42" rx="4" fill="#0d1320"/>
    <text x="26" y="208" class="label">confirmedBy field tracks:</text>
    <text x="26" y="224" class="code">"user" | "ai:agent-name" | "auto:rule-name"</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 4: UNDERLYING CRAWLER -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <g transform="translate(30, 820)">
    <rect width="1340" height="100" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="1340" height="100" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <rect width="1340" height="28" rx="6" fill="#1a1f2e"/>
    <rect y="22" width="1340" height="6" fill="#1a1f2e"/>
    <text x="16" y="19" class="section-title">ğŸ•·ï¸ UNDERLYING CRAWLER INFRASTRUCTURE</text>
    <text x="380" y="19" class="text">â€” Existing components wrapped by Observatory</text>
    
    <rect x="16" y="40" width="200" height="50" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="26" y="60" class="label">NewsCrawler</text>
    <text x="26" y="78" class="code">The actual crawler</text>
    
    <rect x="230" y="40" width="220" height="50" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="240" y="60" class="label">UrlDecisionOrchestrator</text>
    <text x="240" y="78" class="code">Observatory intercepts decisions</text>
    
    <rect x="464" y="40" width="200" height="50" rx="4" fill="#14181f" stroke="#c9a227" stroke-opacity="0.5"/>
    <text x="474" y="60" class="label highlight">PriorityScorer</text>
    <text x="474" y="78" class="code">Uses sandbox config</text>
    
    <rect x="678" y="40" width="200" height="50" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="688" y="60" class="label">DecisionExplainer</text>
    <text x="688" y="78" class="code">Generates rationale</text>
    
    <rect x="892" y="40" width="200" height="50" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="902" y="60" class="label">CrawlContext</text>
    <text x="902" y="78" class="code">pause() / resume()</text>
    
    <rect x="1106" y="40" width="218" height="50" rx="4" fill="#14181f" stroke="#2d3548"/>
    <text x="1116" y="60" class="label">Decision Trees (JSON)</text>
    <text x="1116" y="78" class="code">config/decision-trees/*.json</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- FLOW ARROWS -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <!-- Controller â†’ UI/API/Crawler -->
  <line x1="300" y1="540" x2="300" y2="560" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrowSlate)"/>
  <line x1="800" y1="540" x2="800" y2="560" stroke="#64748b" stroke-width="1.5" marker-end="url(#arrowSlate)"/>
  <line x1="700" y1="540" x2="700" y2="820" stroke="#64748b" stroke-width="1.5" stroke-dasharray="6,3" marker-end="url(#arrowSlate)"/>
  <text x="710" y="680" class="code">wraps &amp; intercepts</text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- LEGEND -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <g transform="translate(30, 940)">
    <rect width="1340" height="80" rx="6" fill="url(#panelGrad)" filter="url(#softShadow)"/>
    <rect width="1340" height="80" rx="6" fill="none" stroke="#2d3548" stroke-width="1"/>
    
    <text x="16" y="25" class="label">LEGEND</text>
    
    <!-- Standard box -->
    <rect x="16" y="40" width="60" height="24" rx="3" fill="none" stroke="#2d3548"/>
    <text x="85" y="56" class="text">Component</text>
    
    <!-- Sandbox box -->
    <rect x="180" y="40" width="60" height="24" rx="3" fill="none" stroke="#c9a227" stroke-width="2" stroke-dasharray="5,3"/>
    <text x="250" y="56" class="text">Sandbox (ephemeral)</text>
    
    <!-- Gold highlight -->
    <rect x="400" y="40" width="60" height="24" rx="3" fill="none" stroke="#c9a227" stroke-opacity="0.5"/>
    <text x="470" y="56" class="text">Sandbox-aware</text>
    
    <!-- AI highlight -->
    <rect x="590" y="40" width="60" height="24" rx="3" fill="none" stroke="#3b82f6"/>
    <text x="660" y="56" class="text">AI-operable</text>
    
    <!-- Flow arrow -->
    <line x1="780" y1="52" x2="830" y2="52" stroke="#c9a227" stroke-width="2" marker-end="url(#arrowGold)"/>
    <text x="840" y="56" class="text">Data/control flow</text>
    
    <!-- Status icons -->
    <text x="980" y="56" class="code highlight">â³ pending</text>
    <text x="1060" y="56" class="code success">âœ“ confirmed</text>
    <text x="1150" y="56" class="code error">âœ— rejected</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- KEY INSIGHT -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="700" y="1060" text-anchor="middle" class="text">
    Key insight: Sandbox isolates experimentation. Production files are read-only until explicit save.
  </text>
  <text x="700" y="1080" text-anchor="middle" class="text">
    Decision chain is separate from saving â€” you control when/if a variant becomes active.
  </text>

</svg>
