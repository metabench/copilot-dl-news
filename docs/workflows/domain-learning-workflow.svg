<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 700">
  <defs>
    <!-- Background gradient -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a0f"/>
      <stop offset="100%" style="stop-color:#1a1a2e"/>
    </linearGradient>
    
    <!-- Input gradient -->
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3a4a6a"/>
      <stop offset="100%" style="stop-color:#2a3a5a"/>
    </linearGradient>
    
    <!-- Generator gradient -->
    <linearGradient id="genGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2d6a4d"/>
      <stop offset="100%" style="stop-color:#1a4a35"/>
    </linearGradient>
    
    <!-- Testing gradient -->
    <linearGradient id="testGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b6914"/>
      <stop offset="100%" style="stop-color:#5a4510"/>
    </linearGradient>
    
    <!-- Success gradient -->
    <linearGradient id="successGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2d8a4d"/>
      <stop offset="100%" style="stop-color:#1a6a35"/>
    </linearGradient>
    
    <!-- Gold accent gradient -->
    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b7320"/>
      <stop offset="50%" style="stop-color:#c9a227"/>
      <stop offset="100%" style="stop-color:#8b7320"/>
    </linearGradient>
    
    <!-- Glow filters -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="softGlow" x="-10%" y="-10%" width="120%" height="120%">
      <feGaussianBlur stdDeviation="1" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Arrow markers -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#c9a227"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#5cb85c"/>
    </marker>
    <marker id="arrowYellow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#c9a227"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bgGrad)"/>
  
  <!-- Corner accents -->
  <path d="M 20 8 L 20 20 L 8 20" stroke="#c9a227" stroke-width="2" fill="none"/>
  <path d="M 1380 8 L 1380 20 L 1392 20" stroke="#c9a227" stroke-width="2" fill="none"/>
  <path d="M 20 692 L 20 680 L 8 680" stroke="#c9a227" stroke-width="2" fill="none"/>
  <path d="M 1380 692 L 1380 680 L 1392 680" stroke="#c9a227" stroke-width="2" fill="none"/>
  
  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="22" font-weight="600" fill="#e8e8e8" letter-spacing="2" filter="url(#softGlow)">DOMAIN LEARNING PIPELINE</text>
  <text x="700" y="62" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" fill="#888" letter-spacing="1">TEMPLATE GENERATION → TESTING → AUTO-APPROVAL OR HUMAN REVIEW</text>
  
  <!-- Decorative line under title -->
  <line x1="400" y1="75" x2="1000" y2="75" stroke="url(#goldGrad)" stroke-width="1"/>
  
  <!-- INPUT -->
  <rect x="50" y="100" width="180" height="80" fill="url(#inputGrad)" stroke="rgba(201,162,39,0.5)" stroke-width="2" rx="5"/>
  <text x="140" y="130" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#e8e8e8">Sample Pages</text>
  <text x="140" y="150" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">Crawled articles from</text>
  <text x="140" y="165" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">a new domain</text>
  
  <!-- Arrow -->
  <path d="M 230 140 L 290 140" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- PIPELINE ENTRY -->
  <rect x="290" y="100" width="200" height="80" fill="url(#inputGrad)" stroke="#c9a227" stroke-width="2" rx="5" filter="url(#softGlow)"/>
  <text x="390" y="128" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#e8e8e8">DomainLearningPipeline</text>
  <text x="390" y="148" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#aaa">Main orchestration</text>
  <text x="390" y="168" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#888">src/core/crawler/learning/</text>
  
  <!-- Arrow to Phase 1 -->
  <path d="M 490 140 L 550 140" stroke="#5cb85c" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  
  <!-- PHASE 1: TEMPLATE GENERATION -->
  <rect x="550" y="90" width="280" height="200" fill="rgba(45,106,77,0.15)" stroke="#5cb85c" stroke-width="2" rx="8"/>
  <text x="690" y="115" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#5cb85c" letter-spacing="1">PHASE 1: GENERATION</text>
  <text x="690" y="132" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">TemplateGenerator.js</text>
  
  <!-- Generation steps -->
  <rect x="570" y="150" width="240" height="32" fill="rgba(92,184,92,0.15)" stroke="rgba(92,184,92,0.5)" stroke-width="1" rx="3"/>
  <text x="690" y="171" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#e8e8e8">1. Analyze HTML structure</text>
  
  <rect x="570" y="192" width="240" height="32" fill="rgba(92,184,92,0.15)" stroke="rgba(92,184,92,0.5)" stroke-width="1" rx="3"/>
  <text x="690" y="213" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#e8e8e8">2. Extract common selectors</text>
  
  <rect x="570" y="234" width="240" height="32" fill="rgba(92,184,92,0.15)" stroke="rgba(92,184,92,0.5)" stroke-width="1" rx="3"/>
  <text x="690" y="255" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#e8e8e8">3. Generate CSS/XPath patterns</text>
  
  <!-- Arrow to Phase 2 -->
  <path d="M 830 190 L 890 190" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- PHASE 2: TEMPLATE TESTING -->
  <rect x="890" y="90" width="280" height="200" fill="rgba(139,105,20,0.15)" stroke="#c9a227" stroke-width="2" rx="8"/>
  <text x="1030" y="115" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#c9a227" letter-spacing="1">PHASE 2: TESTING</text>
  <text x="1030" y="132" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">TemplateTester.js</text>
  
  <!-- Testing steps -->
  <rect x="910" y="150" width="240" height="32" fill="rgba(139,105,20,0.3)" stroke="rgba(201,162,39,0.5)" stroke-width="1" rx="3"/>
  <text x="1030" y="171" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#e8e8e8">1. Apply template to samples</text>
  
  <rect x="910" y="192" width="240" height="32" fill="rgba(139,105,20,0.3)" stroke="rgba(201,162,39,0.5)" stroke-width="1" rx="3"/>
  <text x="1030" y="213" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#e8e8e8">2. Compare extracted vs expected</text>
  
  <rect x="910" y="234" width="240" height="32" fill="rgba(139,105,20,0.3)" stroke="rgba(201,162,39,0.5)" stroke-width="1" rx="3"/>
  <text x="1030" y="255" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#e8e8e8">3. Calculate accuracy (0-1)</text>
  
  <!-- Arrow down from testing -->
  <path d="M 1030 290 L 1030 330" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- DECISION: ACCURACY THRESHOLD -->
  <polygon points="1030,330 1100,380 1030,430 960,380" fill="#1a1a2e" stroke="#c9a227" stroke-width="2"/>
  <text x="1030" y="375" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" font-weight="600" fill="#c9a227">Accuracy</text>
  <text x="1030" y="390" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">≥ 90%?</text>
  
  <!-- YES PATH: AUTO-APPROVE -->
  <path d="M 1100 380 L 1200 380" stroke="#5cb85c" stroke-width="2" fill="none"/>
  <text x="1145" y="370" font-family="Segoe UI, sans-serif" font-size="9" fill="#5cb85c">Yes</text>
  
  <rect x="1200" y="340" width="150" height="80" fill="rgba(92,184,92,0.2)" stroke="#5cb85c" stroke-width="2" rx="5" filter="url(#softGlow)"/>
  <text x="1275" y="368" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" fill="#5cb85c">Auto-Approved</text>
  <text x="1275" y="388" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#aaa">Template ready</text>
  <text x="1275" y="408" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#888">status: 'approved'</text>
  
  <!-- NO PATH: REVIEW QUEUE -->
  <path d="M 1030 430 L 1030 475" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrowYellow)"/>
  <text x="1045" y="455" font-family="Segoe UI, sans-serif" font-size="9" fill="#c9a227">No</text>
  
  <rect x="890" y="475" width="280" height="110" fill="rgba(139,105,20,0.2)" stroke="#c9a227" stroke-width="2" rx="8"/>
  <text x="1030" y="500" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#c9a227" letter-spacing="1">REVIEW QUEUE</text>
  <text x="1030" y="517" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">ReviewQueue.js</text>
  
  <rect x="910" y="530" width="240" height="22" fill="rgba(201,162,39,0.15)" stroke="rgba(201,162,39,0.4)" stroke-width="1" rx="3"/>
  <text x="1030" y="546" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#e8e8e8">status: 'pending' → Human review</text>
  
  <rect x="910" y="558" width="240" height="22" fill="rgba(201,162,39,0.15)" stroke="rgba(201,162,39,0.4)" stroke-width="1" rx="3"/>
  <text x="1030" y="574" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#e8e8e8">Returns queueId for tracking</text>
  
  <!-- TEMPLATE OUTPUT -->
  <rect x="550" y="340" width="280" height="120" fill="rgba(26,26,46,0.8)" stroke="rgba(201,162,39,0.5)" stroke-width="2" rx="8"/>
  <text x="690" y="365" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" fill="#c9a227" letter-spacing="1">GENERATED TEMPLATE</text>
  
  <rect x="570" y="380" width="240" height="70" fill="rgba(0,0,0,0.3)" stroke="rgba(201,162,39,0.3)" stroke-width="1" rx="3"/>
  <text x="690" y="400" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">{</text>
  <text x="690" y="415" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">title: ".article-title",</text>
  <text x="690" y="430" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">content: ".article-body",</text>
  <text x="690" y="445" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">date: "time[datetime]"</text>
  
  <!-- Connect to template -->
  <path d="M 690 290 L 690 340" stroke="#5cb85c" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  
  <!-- OUTPUT TO DB -->
  <rect x="50" y="400" width="180" height="80" fill="url(#inputGrad)" stroke="#4488cc" stroke-width="2" rx="5"/>
  <text x="140" y="428" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="12" font-weight="600" fill="#e8e8e8">Template Storage</text>
  <text x="140" y="448" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#aaa">templateAdapter</text>
  <text x="140" y="468" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#4488cc">Saved to DB</text>
  
  <!-- Connect from auto-approved -->
  <path d="M 1275 420 L 1275 515 L 300 515 L 300 440 L 230 440" stroke="#5cb85c" stroke-width="2" fill="none" marker-end="url(#arrowGreen)"/>
  
  <!-- STATISTICS -->
  <rect x="50" y="520" width="380" height="130" fill="rgba(26,26,46,0.8)" stroke="rgba(201,162,39,0.3)" stroke-width="1" rx="5"/>
  <text x="240" y="545" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#c9a227" letter-spacing="1">PIPELINE STATISTICS</text>
  
  <line x1="70" y1="555" x2="410" y2="555" stroke="rgba(201,162,39,0.2)" stroke-width="1"/>
  
  <text x="70" y="575" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">• domainsLearned: count of domains processed</text>
  <text x="70" y="595" font-family="Segoe UI, sans-serif" font-size="9" fill="#5cb85c">• autoApproved: templates meeting 90% threshold</text>
  <text x="70" y="615" font-family="Segoe UI, sans-serif" font-size="9" fill="#c9a227">• queuedForReview: templates needing review</text>
  <text x="70" y="635" font-family="Segoe UI, sans-serif" font-size="9" fill="#cc4444">• failed: template generation failures</text>
  
  <!-- Module Legend -->
  <rect x="480" y="520" width="870" height="130" fill="rgba(26,26,46,0.8)" stroke="rgba(201,162,39,0.3)" stroke-width="1" rx="5"/>
  <text x="910" y="545" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#c9a227" letter-spacing="1">KEY MODULE PATHS</text>
  
  <line x1="500" y1="555" x2="1330" y2="555" stroke="rgba(201,162,39,0.2)" stroke-width="1"/>
  
  <text x="500" y="575" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">Learning: src/core/crawler/learning/ (DomainLearningPipeline.js, TemplateGenerator.js, TemplateTester.js)</text>
  <text x="500" y="595" font-family="Segoe UI Mono, monospace" font-size="9" fill="#c9a227">Queue:    src/core/crawler/learning/ReviewQueue.js (ReviewStatus: pending, approved, rejected)</text>
  <text x="500" y="615" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">Config:   autoApproveThreshold = 0.9 (configurable per instance)</text>
  <text x="500" y="635" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">Events:   domain:learned, template:approved, template:queued, template:failed</text>
</svg>