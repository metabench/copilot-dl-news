<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 750">
  <defs>
    <!-- Background gradient -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0a0a0f"/>
      <stop offset="100%" style="stop-color:#1a1a2e"/>
    </linearGradient>
    
    <!-- Input gradient -->
    <linearGradient id="inputGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3a4a6a"/>
      <stop offset="100%" style="stop-color:#2a3a5a"/>
    </linearGradient>
    
    <!-- Sibling strategy gradient -->
    <linearGradient id="siblingGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2d6a4d"/>
      <stop offset="100%" style="stop-color:#1a4a35"/>
    </linearGradient>
    
    <!-- Gazetteer strategy gradient -->
    <linearGradient id="gazGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3355aa"/>
      <stop offset="100%" style="stop-color:#2a4488"/>
    </linearGradient>
    
    <!-- Parent-child gradient -->
    <linearGradient id="parentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b6914"/>
      <stop offset="100%" style="stop-color:#5a4510"/>
    </linearGradient>
    
    <!-- Template gradient -->
    <linearGradient id="templateGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6a4488"/>
      <stop offset="100%" style="stop-color:#4a3066"/>
    </linearGradient>
    
    <!-- Gold accent gradient -->
    <linearGradient id="goldGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b7320"/>
      <stop offset="50%" style="stop-color:#c9a227"/>
      <stop offset="100%" style="stop-color:#8b7320"/>
    </linearGradient>
    
    <!-- Glow filters -->
    <filter id="glow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="2" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <filter id="softGlow" x="-10%" y="-10%" width="120%" height="120%">
      <feGaussianBlur stdDeviation="1" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#c9a227"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="100%" height="100%" fill="url(#bgGrad)"/>
  
  <!-- Corner accents -->
  <path d="M 20 8 L 20 20 L 8 20" stroke="#c9a227" stroke-width="2" fill="none"/>
  <path d="M 1380 8 L 1380 20 L 1392 20" stroke="#c9a227" stroke-width="2" fill="none"/>
  <path d="M 20 742 L 20 730 L 8 730" stroke="#c9a227" stroke-width="2" fill="none"/>
  <path d="M 1380 742 L 1380 730 L 1392 730" stroke="#c9a227" stroke-width="2" fill="none"/>
  
  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="22" font-weight="600" fill="#e8e8e8" letter-spacing="2" filter="url(#softGlow)">PREDICTIVE HUB DISCOVERY</text>
  <text x="700" y="62" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" fill="#888" letter-spacing="1">PROACTIVE URL PREDICTION · PATTERN-BASED + GAZETTEER-DRIVEN HUB GENERATION</text>
  
  <!-- Decorative line under title -->
  <line x1="350" y1="75" x2="1050" y2="75" stroke="url(#goldGrad)" stroke-width="1"/>
  
  <!-- INPUT: Known Hub -->
  <rect x="50" y="100" width="200" height="80" fill="url(#inputGrad)" stroke="rgba(201,162,39,0.5)" stroke-width="2" rx="5"/>
  <text x="150" y="128" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#e8e8e8">Known Hub URL</text>
  <text x="150" y="150" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#c9a227">/world/france</text>
  <text x="150" y="168" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">Validated hub page</text>
  
  <!-- Arrow -->
  <path d="M 250 140 L 310 140" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- PREDICTIVE HUB DISCOVERY -->
  <rect x="310" y="90" width="230" height="100" fill="url(#inputGrad)" stroke="#c9a227" stroke-width="2" rx="5" filter="url(#softGlow)"/>
  <text x="425" y="118" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#e8e8e8">PredictiveHubDiscovery</text>
  <text x="425" y="138" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#aaa">Proactive hub prediction</text>
  <text x="425" y="158" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#888">src/core/crawler/</text>
  <text x="425" y="178" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#888">PredictiveHubDiscovery.js</text>
  
  <!-- STRATEGIES SECTION -->
  <rect x="50" y="220" width="600" height="280" fill="rgba(26,26,46,0.5)" stroke="rgba(201,162,39,0.3)" stroke-width="2" rx="8"/>
  <text x="350" y="245" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#c9a227" letter-spacing="1">PREDICTION STRATEGIES</text>
  
  <!-- Strategy 1: Sibling Pattern -->
  <rect x="70" y="260" width="270" height="100" fill="rgba(45,106,77,0.2)" stroke="#5cb85c" stroke-width="2" rx="5"/>
  <text x="205" y="285" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#5cb85c">Sibling Pattern (1.0 weight)</text>
  <text x="205" y="302" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">predictSiblingHubs()</text>
  <rect x="85" y="312" width="240" height="38" fill="rgba(92,184,92,0.1)" stroke="rgba(92,184,92,0.4)" stroke-width="1" rx="3"/>
  <text x="205" y="328" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">/world/france → /world/germany</text>
  <text x="205" y="345" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Same structure, different entity</text>
  
  <!-- Strategy 2: Gazetteer Place -->
  <rect x="360" y="260" width="270" height="100" fill="rgba(51,85,170,0.2)" stroke="#5588dd" stroke-width="2" rx="5"/>
  <text x="495" y="285" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#5588dd">Gazetteer Place (0.9 weight)</text>
  <text x="495" y="302" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">predictFromGazetteer()</text>
  <rect x="375" y="312" width="240" height="38" fill="rgba(85,136,221,0.1)" stroke="rgba(85,136,221,0.4)" stroke-width="1" rx="3"/>
  <text x="495" y="328" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">Wikidata: Q142 → France places</text>
  <text x="495" y="345" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Use place hierarchy from gazetteer</text>
  
  <!-- Strategy 3: Parent-Child -->
  <rect x="70" y="375" width="270" height="100" fill="rgba(139,105,20,0.2)" stroke="#c9a227" stroke-width="2" rx="5"/>
  <text x="205" y="400" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#c9a227">Parent-Child (0.8 weight)</text>
  <text x="205" y="417" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">Hierarchical expansion</text>
  <rect x="85" y="427" width="240" height="38" fill="rgba(201,162,39,0.1)" stroke="rgba(201,162,39,0.4)" stroke-width="1" rx="3"/>
  <text x="205" y="443" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">/world/france → /france/paris</text>
  <text x="205" y="460" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Discover child hubs from parent</text>
  
  <!-- Strategy 4: URL Template -->
  <rect x="360" y="375" width="270" height="100" fill="rgba(106,68,136,0.2)" stroke="#aa88cc" stroke-width="2" rx="5"/>
  <text x="495" y="400" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#aa88cc">URL Template (0.7 weight)</text>
  <text x="495" y="417" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">Template-based generation</text>
  <rect x="375" y="427" width="240" height="38" fill="rgba(170,136,204,0.1)" stroke="rgba(170,136,204,0.4)" stroke-width="1" rx="3"/>
  <text x="495" y="443" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">/world/{country} template</text>
  <text x="495" y="460" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Learned URL patterns from domain</text>
  
  <!-- PROCESSING SECTION -->
  <rect x="700" y="220" width="350" height="280" fill="rgba(51,85,170,0.1)" stroke="#5588dd" stroke-width="2" rx="8"/>
  <text x="875" y="245" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#5588dd" letter-spacing="1">PROCESSING PIPELINE</text>
  
  <!-- Step 1: Extract Pattern -->
  <rect x="720" y="265" width="310" height="42" fill="rgba(85,136,221,0.1)" stroke="rgba(85,136,221,0.4)" stroke-width="1" rx="3"/>
  <text x="875" y="283" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" font-weight="500" fill="#e8e8e8">1. _extractUrlPattern(knownHubUrl)</text>
  <text x="875" y="299" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Identify URL structure and placeholders</text>
  
  <!-- Step 2: Infer Hub Type -->
  <rect x="720" y="317" width="310" height="42" fill="rgba(85,136,221,0.1)" stroke="rgba(85,136,221,0.4)" stroke-width="1" rx="3"/>
  <text x="875" y="335" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" font-weight="500" fill="#e8e8e8">2. _inferHubType(url, pattern)</text>
  <text x="875" y="351" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">country | region | city | topic</text>
  
  <!-- Step 3: Find Siblings -->
  <rect x="720" y="369" width="310" height="42" fill="rgba(85,136,221,0.1)" stroke="rgba(85,136,221,0.4)" stroke-width="1" rx="3"/>
  <text x="875" y="387" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" font-weight="500" fill="#e8e8e8">3. _findSiblingEntities(domain, url, type)</text>
  <text x="875" y="403" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Query gazetteer for related places</text>
  
  <!-- Step 4: Generate URL -->
  <rect x="720" y="421" width="310" height="42" fill="rgba(85,136,221,0.1)" stroke="rgba(85,136,221,0.4)" stroke-width="1" rx="3"/>
  <text x="875" y="439" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" font-weight="500" fill="#e8e8e8">4. _generateSiblingUrl(url, pattern, entity)</text>
  <text x="875" y="455" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Create predicted URL from template</text>
  
  <!-- OUTPUT SECTION -->
  <rect x="1100" y="220" width="250" height="280" fill="rgba(26,26,46,0.8)" stroke="rgba(201,162,39,0.5)" stroke-width="2" rx="8"/>
  <text x="1225" y="245" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="13" font-weight="600" fill="#c9a227" letter-spacing="1">OUTPUT</text>
  
  <!-- Prediction Schema -->
  <rect x="1120" y="265" width="210" height="140" fill="rgba(0,0,0,0.3)" stroke="rgba(201,162,39,0.3)" stroke-width="1" rx="3"/>
  <text x="1225" y="283" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#888">{</text>
  <text x="1225" y="298" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#aaa">url: "/world/germany",</text>
  <text x="1225" y="313" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#aaa">hubType: "country",</text>
  <text x="1225" y="328" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#aaa">strategy: "sibling-pattern",</text>
  <text x="1225" y="343" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#5cb85c">confidence: 0.85,</text>
  <text x="1225" y="358" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#aaa">source: "/world/france",</text>
  <text x="1225" y="373" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#aaa">entity: "Germany"</text>
  <text x="1225" y="388" text-anchor="middle" font-family="Segoe UI Mono, monospace" font-size="8" fill="#888">}</text>
  
  <!-- Confidence scoring -->
  <rect x="1120" y="415" width="210" height="70" fill="rgba(201,162,39,0.15)" stroke="rgba(201,162,39,0.5)" stroke-width="1" rx="3"/>
  <text x="1225" y="435" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" font-weight="500" fill="#c9a227">Confidence Scoring</text>
  <text x="1225" y="455" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="9" fill="#aaa">_calculateSiblingConfidence()</text>
  <text x="1225" y="475" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="8" fill="#888">Based on strategy weight + context</text>
  
  <!-- Arrows connecting sections -->
  <path d="M 540 140 L 700 140 L 700 220" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 650 350 L 700 350" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  <path d="M 1050 350 L 1100 350" stroke="#c9a227" stroke-width="2" fill="none" marker-end="url(#arrow)"/>
  
  <!-- CACHING SECTION -->
  <rect x="50" y="530" width="400" height="110" fill="rgba(26,26,46,0.8)" stroke="rgba(201,162,39,0.3)" stroke-width="1" rx="5"/>
  <text x="250" y="555" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#c9a227" letter-spacing="1">INTERNAL CACHES</text>
  
  <line x1="70" y1="565" x2="430" y2="565" stroke="rgba(201,162,39,0.2)" stroke-width="1"/>
  
  <text x="70" y="585" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">• urlPatterns: Map(domain → patterns)</text>
  <text x="70" y="605" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">• predictedHubs: Map(domain → predictions[])</text>
  <text x="70" y="625" font-family="Segoe UI, sans-serif" font-size="9" fill="#888">• strategyPerformance: Map(strategy → stats)</text>
  
  <!-- Module Legend -->
  <rect x="500" y="530" width="850" height="110" fill="rgba(26,26,46,0.8)" stroke="rgba(201,162,39,0.3)" stroke-width="1" rx="5"/>
  <text x="925" y="555" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="11" font-weight="600" fill="#c9a227" letter-spacing="1">KEY MODULE PATHS</text>
  
  <line x1="520" y1="565" x2="1330" y2="565" stroke="rgba(201,162,39,0.2)" stroke-width="1"/>
  
  <text x="520" y="585" font-family="Segoe UI Mono, monospace" font-size="9" fill="#aaa">Main:      src/core/crawler/PredictiveHubDiscovery.js</text>
  <text x="520" y="605" font-family="Segoe UI Mono, monospace" font-size="9" fill="#5588dd">Gazetteer: src/core/crawler/gazetteer/ (GazetteerManager.js, StagedGazetteerCoordinator.js)</text>
  <text x="520" y="625" font-family="Segoe UI Mono, monospace" font-size="9" fill="#888">Database:  gazetteer.db (places, hierarchy, alternate_names)</text>
  
  <!-- Use Case Example -->
  <rect x="50" y="660" width="1300" height="50" fill="rgba(92,184,92,0.1)" stroke="#5cb85c" stroke-width="1" rx="5"/>
  <text x="700" y="690" text-anchor="middle" font-family="Segoe UI, sans-serif" font-size="10" fill="#5cb85c">Example: Guardian /world/france discovered → predicts /world/germany, /world/spain, /world/italy with 0.85+ confidence → crawler validates &amp; queues</text>
</svg>