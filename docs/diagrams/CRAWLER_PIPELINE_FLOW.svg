<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 700">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="4" stdDeviation="6" flood-opacity="0.12"/>
    </filter>
    <filter id="shadow-sm" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.1"/>
    </filter>
    <marker id="arrow" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
      <path d="M 0 1 L 10 4 L 0 7 L 2 4 Z" fill="#64748b"/>
    </marker>
    <marker id="arrow-blue" markerWidth="12" markerHeight="8" refX="10" refY="4" orient="auto">
      <path d="M 0 1 L 10 4 L 0 7 L 2 4 Z" fill="#3b82f6"/>
    </marker>
    <linearGradient id="purple" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#a78bfa"/><stop offset="100%" stop-color="#8b5cf6"/>
    </linearGradient>
    <linearGradient id="blue" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#3b82f6"/>
    </linearGradient>
    <linearGradient id="green" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#4ade80"/><stop offset="100%" stop-color="#22c55e"/>
    </linearGradient>
    <linearGradient id="orange" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#fb923c"/><stop offset="100%" stop-color="#f97316"/>
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="700" fill="#f8fafc"/>
  
  <!-- Header -->
  <rect width="1200" height="75" fill="#0f172a"/>
  <text x="600" y="35" font-family="Inter, system-ui, -apple-system, sans-serif" font-size="24" font-weight="700" text-anchor="middle" fill="#ffffff" letter-spacing="-0.5">Crawler Pipeline Flow</text>
  <text x="600" y="58" font-family="Inter, system-ui, sans-serif" font-size="13" text-anchor="middle" fill="#94a3b8">URL Queue → Fetch → Extract → Store Cycle</text>
  
  <!-- Main Pipeline Container -->
  <rect x="40" y="100" width="1120" height="310" rx="16" fill="#ffffff" stroke="#e2e8f0" stroke-width="2" filter="url(#shadow)"/>
  <text x="60" y="128" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" fill="#64748b" letter-spacing="1">MAIN PIPELINE</text>
  
  <!-- Queue Manager -->
  <g filter="url(#shadow-sm)">
    <rect x="70" y="150" width="200" height="120" rx="12" fill="url(#purple)"/>
    <text x="170" y="182" font-family="Inter, system-ui, sans-serif" font-size="15" font-weight="700" text-anchor="middle" fill="#ffffff">QueueManager</text>
    <line x1="100" y1="195" x2="240" y2="195" stroke="#ffffff" stroke-opacity="0.3"/>
    <text x="170" y="218" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#e9d5ff">Priority Min-Heap</text>
    <text x="170" y="236" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#e9d5ff">URL Scheduling</text>
    <text x="170" y="254" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#e9d5ff">Deduplication</text>
  </g>
  
  <!-- Arrow Q→F -->
  <line x1="270" y1="210" x2="320" y2="210" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="295" y="200" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#94a3b8">dequeue</text>
  
  <!-- Fetch Pipeline -->
  <g filter="url(#shadow-sm)">
    <rect x="330" y="150" width="200" height="120" rx="12" fill="url(#blue)"/>
    <text x="430" y="182" font-family="Inter, system-ui, sans-serif" font-size="15" font-weight="700" text-anchor="middle" fill="#ffffff">FetchPipeline</text>
    <line x1="360" y1="195" x2="500" y2="195" stroke="#ffffff" stroke-opacity="0.3"/>
    <text x="430" y="218" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#dbeafe">HTTP Requests</text>
    <text x="430" y="236" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#dbeafe">Cache Check</text>
    <text x="430" y="254" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#dbeafe">Rate Limiting</text>
  </g>
  
  <!-- Arrow F→E -->
  <line x1="530" y1="210" x2="580" y2="210" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="555" y="200" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#94a3b8">HTML</text>
  
  <!-- Link Extractor -->
  <g filter="url(#shadow-sm)">
    <rect x="590" y="150" width="200" height="120" rx="12" fill="url(#green)"/>
    <text x="690" y="182" font-family="Inter, system-ui, sans-serif" font-size="15" font-weight="700" text-anchor="middle" fill="#ffffff">LinkExtractor</text>
    <line x1="620" y1="195" x2="760" y2="195" stroke="#ffffff" stroke-opacity="0.3"/>
    <text x="690" y="218" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#dcfce7">Parse HTML</text>
    <text x="690" y="236" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#dcfce7">Find Links</text>
    <text x="690" y="254" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#dcfce7">URL Filtering</text>
  </g>
  
  <!-- Arrow E→A -->
  <line x1="790" y1="210" x2="840" y2="210" stroke="#64748b" stroke-width="2" marker-end="url(#arrow)"/>
  <text x="815" y="200" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#94a3b8">content</text>
  
  <!-- Article Processor -->
  <g filter="url(#shadow-sm)">
    <rect x="850" y="150" width="200" height="120" rx="12" fill="url(#orange)"/>
    <text x="950" y="182" font-family="Inter, system-ui, sans-serif" font-size="15" font-weight="700" text-anchor="middle" fill="#ffffff">ArticleProcessor</text>
    <line x1="880" y1="195" x2="1020" y2="195" stroke="#ffffff" stroke-opacity="0.3"/>
    <text x="950" y="218" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#ffedd5">Content Extract</text>
    <text x="950" y="236" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#ffedd5">Metadata Parse</text>
    <text x="950" y="254" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#ffedd5">Store to DB</text>
  </g>
  
  <!-- Feedback Loop -->
  <path d="M 690 270 L 690 320 L 170 320 L 170 270" fill="none" stroke="#3b82f6" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#arrow-blue)"/>
  <text x="430" y="342" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#3b82f6" font-weight="500">new URLs enqueued</text>
  
  <!-- Support Services Row -->
  <rect x="70" y="365" width="170" height="55" rx="10" fill="#faf5ff" stroke="#e9d5ff" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="155" y="388" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#7c3aed">PriorityScorer</text>
  <text x="155" y="405" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#a78bfa">Score URLs for scheduling</text>
  
  <rect x="255" y="365" width="170" height="55" rx="10" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="340" y="388" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#2563eb">DomainThrottle</text>
  <text x="340" y="405" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#60a5fa">Rate limits per domain</text>
  
  <rect x="440" y="365" width="170" height="55" rx="10" fill="#eff6ff" stroke="#bfdbfe" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="525" y="388" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#2563eb">ArticleCache</text>
  <text x="525" y="405" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#60a5fa">HTTP response caching</text>
  
  <rect x="625" y="365" width="170" height="55" rx="10" fill="#f0fdf4" stroke="#bbf7d0" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="710" y="388" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#16a34a">UrlDecision</text>
  <text x="710" y="405" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#4ade80">Should crawl? Policy</text>
  
  <rect x="810" y="365" width="170" height="55" rx="10" fill="#fff7ed" stroke="#fed7aa" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="895" y="385" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#ea580c">ErrorTracker</text>
  <text x="895" y="400" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#fb923c">Failed requests</text>
  <text x="895" y="412" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#fb923c">retry logic</text>
  
  <rect x="995" y="365" width="150" height="55" rx="10" fill="#fef2f2" stroke="#fecaca" stroke-width="1.5" filter="url(#shadow-sm)"/>
  <text x="1070" y="388" font-family="Inter, system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#dc2626">RobotsParser</text>
  <text x="1070" y="405" font-family="Inter, system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#f87171">robots.txt</text>
  
  <!-- External Systems -->
  <rect x="40" y="460" width="340" height="100" rx="12" fill="#fefce8" stroke="#fde047" stroke-width="2" filter="url(#shadow-sm)"/>
  <text x="210" y="495" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" text-anchor="middle" fill="#854d0e">External: News Websites</text>
  <text x="210" y="518" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#a16207">BBC, CNN, Reuters • Sitemaps, RSS Feeds</text>
  <text x="210" y="538" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#ca8a04">robots.txt • rate limiting • HTTP responses</text>
  
  <line x1="380" y1="495" x2="430" y2="270" stroke="#eab308" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Database -->
  <rect x="430" y="460" width="340" height="100" rx="12" fill="#f0fdf4" stroke="#86efac" stroke-width="2" filter="url(#shadow-sm)"/>
  <text x="600" y="495" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" text-anchor="middle" fill="#166534">SQLite Database</text>
  <text x="600" y="518" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#15803d">urls, http_responses, content_storage</text>
  <text x="600" y="538" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#22c55e">articles, article_place_relations</text>
  
  <line x1="950" y1="270" x2="750" y2="460" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Telemetry -->
  <rect x="820" y="460" width="340" height="100" rx="12" fill="#faf5ff" stroke="#d8b4fe" stroke-width="2" filter="url(#shadow-sm)"/>
  <text x="990" y="495" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" text-anchor="middle" fill="#6b21a8">Telemetry &amp; Events</text>
  <text x="990" y="518" font-family="Inter, system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#7c3aed">PROGRESS, MILESTONE, ERROR events</text>
  <text x="990" y="538" font-family="Inter, system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#a855f7">Server-Sent Events to UI clients</text>
  
  <!-- Legend -->
  <rect x="40" y="590" width="600" height="80" rx="12" fill="#ffffff" stroke="#e2e8f0" stroke-width="1" filter="url(#shadow-sm)"/>
  <text x="60" y="618" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600" fill="#334155">Legend</text>
  
  <rect x="120" y="608" width="18" height="18" rx="4" fill="#8b5cf6"/>
  <text x="145" y="621" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#475569">Queue</text>
  
  <rect x="200" y="608" width="18" height="18" rx="4" fill="#3b82f6"/>
  <text x="225" y="621" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#475569">Fetch</text>
  
  <rect x="280" y="608" width="18" height="18" rx="4" fill="#22c55e"/>
  <text x="305" y="621" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#475569">Extract</text>
  
  <rect x="370" y="608" width="18" height="18" rx="4" fill="#f97316"/>
  <text x="395" y="621" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#475569">Store</text>
  
  <line x1="120" y1="650" x2="170" y2="650" stroke="#3b82f6" stroke-width="2" stroke-dasharray="6,3"/>
  <text x="180" y="654" font-family="Inter, system-ui, sans-serif" font-size="11" fill="#475569">Feedback loop (new URLs back to queue)</text>
</svg>