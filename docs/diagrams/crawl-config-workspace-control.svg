<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1400">
  <defs>
    <!-- Gradient definitions -->
    <linearGradient id="main-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="section-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#0ea5e9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="child-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#34d399;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="data-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fbbf24;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="helper-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f472b6;stop-opacity:1" />
    </linearGradient>
    
    <!-- Markers -->
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
    <marker id="arrow-data" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b" />
    </marker>
    
    <!-- Drop shadow -->
    <filter id="shadow" x="-10%" y="-10%" width="130%" height="130%">
      <feDropShadow dx="2" dy="3" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <filter id="shadow-sm" x="-5%" y="-5%" width="115%" height="115%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.1"/>
    </filter>
  </defs>
  
  <!-- Background -->
  <rect width="1400" height="1400" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="700" y="40" font-family="system-ui, -apple-system, sans-serif" font-size="28" font-weight="bold" text-anchor="middle" fill="#1e293b">
    CrawlConfigWorkspaceControl
  </text>
  <text x="700" y="65" font-family="system-ui, -apple-system, sans-serif" font-size="14" text-anchor="middle" fill="#64748b">
    A comprehensive UI control for managing crawl configuration, profiles, behaviors, timelines, and diffs
  </text>
  <text x="700" y="85" font-family="monospace" font-size="12" text-anchor="middle" fill="#94a3b8">
    src/ui/controls/CrawlConfigWorkspaceControl.js
  </text>

  <!-- =========== MAIN CONTROL BOX =========== -->
  <g transform="translate(100, 110)">
    <rect x="0" y="0" width="1200" height="130" rx="12" fill="url(#main-gradient)" filter="url(#shadow)"/>
    <text x="600" y="35" font-family="system-ui, sans-serif" font-size="20" font-weight="bold" text-anchor="middle" fill="white">
      CrawlConfigWorkspaceControl
    </text>
    <text x="600" y="55" font-family="system-ui, sans-serif" font-size="12" text-anchor="middle" fill="rgba(255,255,255,0.85)">
      extends jsgui.Control • tagName: &lt;section&gt; • class: "crawl-config-workspace"
    </text>
    
    <!-- Constructor props -->
    <g transform="translate(30, 75)">
      <text x="0" y="0" font-family="monospace" font-size="11" fill="rgba(255,255,255,0.9)">Constructor Props:</text>
      <rect x="0" y="8" width="140" height="22" rx="4" fill="rgba(255,255,255,0.2)"/>
      <text x="70" y="23" font-family="monospace" font-size="10" text-anchor="middle" fill="white">groups: []</text>
      <rect x="150" y="8" width="170" height="22" rx="4" fill="rgba(255,255,255,0.2)"/>
      <text x="235" y="23" font-family="monospace" font-size="10" text-anchor="middle" fill="white">sequenceProfile: {}</text>
      <rect x="330" y="8" width="140" height="22" rx="4" fill="rgba(255,255,255,0.2)"/>
      <text x="400" y="23" font-family="monospace" font-size="10" text-anchor="middle" fill="white">behaviors: []</text>
      <rect x="480" y="8" width="140" height="22" rx="4" fill="rgba(255,255,255,0.2)"/>
      <text x="550" y="23" font-family="monospace" font-size="10" text-anchor="middle" fill="white">timeline: []</text>
      <rect x="630" y="8" width="140" height="22" rx="4" fill="rgba(255,255,255,0.2)"/>
      <text x="700" y="23" font-family="monospace" font-size="10" text-anchor="middle" fill="white">diffSummary: []</text>
    </g>
    
    <!-- Setter methods -->
    <g transform="translate(830, 75)">
      <text x="0" y="0" font-family="monospace" font-size="11" fill="rgba(255,255,255,0.9)">Setter Methods:</text>
      <text x="0" y="18" font-family="monospace" font-size="9" fill="rgba(255,255,255,0.75)">setGroups() • setSequenceProfile() • setBehaviors() • setTimeline() • setDiffSummary()</text>
      <text x="0" y="35" font-family="monospace" font-size="9" fill="rgba(255,255,255,0.75)">All setters call compose() to rebuild the UI</text>
    </g>
  </g>

  <!-- =========== COMPOSE METHOD FLOW =========== -->
  <g transform="translate(100, 260)">
    <rect x="0" y="0" width="1200" height="50" rx="8" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
    <text x="600" y="20" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#475569">
      compose() Method — Builds 4 Optional Sections
    </text>
    <text x="600" y="38" font-family="monospace" font-size="11" text-anchor="middle" fill="#64748b">
      _buildPropertyWorkspace() → _buildProfileDrawer() (if profile) → _buildTimelineSection() (if timeline) → _buildDiffMiniMap() (if diffSummary)
    </text>
  </g>

  <!-- =========== SECTION 1: Property Workspace =========== -->
  <g transform="translate(50, 330)">
    <rect x="0" y="0" width="650" height="380" rx="10" fill="white" stroke="#0ea5e9" stroke-width="2" filter="url(#shadow)"/>
    
    <!-- Header -->
    <rect x="0" y="0" width="650" height="45" rx="10" fill="url(#section-gradient)"/>
    <rect x="0" y="35" width="650" height="10" fill="url(#section-gradient)"/>
    <text x="20" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">
      1. _buildPropertyWorkspace()
    </text>
    <text x="400" y="28" font-family="monospace" font-size="10" fill="rgba(255,255,255,0.85)">
      class: "crawl-config-workspace__property-grid"
    </text>
    
    <!-- Tab Bar -->
    <g transform="translate(20, 60)">
      <text x="0" y="0" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#0c4a6e">Tab Bar</text>
      <rect x="0" y="8" width="610" height="55" rx="6" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
      <text x="10" y="28" font-family="monospace" font-size="10" fill="#0369a1">class: "crawl-config-workspace__tab-bar"</text>
      
      <!-- Sample tabs -->
      <rect x="10" y="38" width="100" height="20" rx="4" fill="#0ea5e9"/>
      <text x="60" y="52" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="white">Tab 1 (active)</text>
      <rect x="120" y="38" width="80" height="20" rx="4" fill="#e0f2fe" stroke="#7dd3fc"/>
      <text x="160" y="52" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#0284c7">Tab 2</text>
      <rect x="210" y="38" width="80" height="20" rx="4" fill="#e0f2fe" stroke="#7dd3fc"/>
      <text x="250" y="52" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#0284c7">Tab 3</text>
      
      <!-- Tab button structure -->
      <g transform="translate(320, 15)">
        <text x="0" y="0" font-family="system-ui, sans-serif" font-size="9" fill="#475569">Tab Button Structure:</text>
        <text x="0" y="14" font-family="monospace" font-size="8" fill="#64748b">• data-tab-target={group.key}</text>
        <text x="0" y="26" font-family="monospace" font-size="8" fill="#64748b">• data-editor-slot="workspace-tab"</text>
        <text x="0" y="38" font-family="monospace" font-size="8" fill="#64748b">• Optional: hint span, badge span</text>
      </g>
    </g>
    
    <!-- Panels Container -->
    <g transform="translate(20, 130)">
      <text x="0" y="0" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#0c4a6e">Panels Container</text>
      <rect x="0" y="8" width="610" height="230" rx="6" fill="#f8fafc" stroke="#e2e8f0" stroke-width="1"/>
      <text x="10" y="28" font-family="monospace" font-size="10" fill="#64748b">class: "crawl-config-workspace__panels"</text>
      
      <!-- Panel structure -->
      <g transform="translate(10, 40)">
        <rect x="0" y="0" width="590" height="180" rx="6" fill="white" stroke="#cbd5e1" stroke-width="1"/>
        <text x="10" y="20" font-family="monospace" font-size="10" fill="#475569">Panel (data-tab-key={group.key})</text>
        
        <!-- Panel header -->
        <rect x="10" y="30" width="570" height="35" rx="4" fill="#f1f5f9"/>
        <text x="20" y="52" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#334155">Panel Header (group.title)</text>
        <text x="200" y="52" font-family="monospace" font-size="9" fill="#94a3b8">+ stats.summary span</text>
        
        <!-- ConfigMatrixControl -->
        <rect x="10" y="75" width="570" height="95" rx="4" fill="url(#child-gradient)" opacity="0.15" stroke="#10b981" stroke-width="1"/>
        <text x="295" y="100" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#059669">
          ConfigMatrixControl
        </text>
        <text x="295" y="118" font-family="monospace" font-size="10" text-anchor="middle" fill="#10b981">
          Renders group.sections as property tables
        </text>
        <text x="295" y="135" font-family="monospace" font-size="9" text-anchor="middle" fill="#6ee7b7">
          Columns: Property | Value | Source | Notes
        </text>
        <text x="295" y="152" font-family="monospace" font-size="9" text-anchor="middle" fill="#6ee7b7">
          Features: status badges, override indicators, validation
        </text>
      </g>
    </g>
  </g>

  <!-- =========== SECTION 2: Profile Drawer =========== -->
  <g transform="translate(720, 330)">
    <rect x="0" y="0" width="630" height="380" rx="10" fill="white" stroke="#0ea5e9" stroke-width="2" filter="url(#shadow)"/>
    
    <!-- Header -->
    <rect x="0" y="0" width="630" height="45" rx="10" fill="url(#section-gradient)"/>
    <rect x="0" y="35" width="630" height="10" fill="url(#section-gradient)"/>
    <text x="20" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">
      2. _buildProfileDrawer()
    </text>
    <text x="370" y="28" font-family="monospace" font-size="10" fill="rgba(255,255,255,0.85)">
      &lt;details open&gt; — conditional on hasProfileData()
    </text>
    
    <!-- Summary -->
    <g transform="translate(20, 60)">
      <rect x="0" y="0" width="590" height="35" rx="6" fill="#fef3c7" stroke="#fcd34d" stroke-width="1"/>
      <text x="10" y="22" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#92400e">
        &lt;summary&gt; "Crawl Profile: {sequenceProfile.name}"
      </text>
      <text x="350" y="22" font-family="monospace" font-size="9" fill="#b45309">
        data-editor-slot="profile-drawer"
      </text>
    </g>
    
    <!-- Profile Body -->
    <g transform="translate(20, 105)">
      <rect x="0" y="0" width="590" height="260" rx="6" fill="#fffbeb" stroke="#fde68a" stroke-width="1"/>
      <text x="10" y="20" font-family="monospace" font-size="10" fill="#92400e">class: "crawl-config-workspace__profile-body"</text>
      
      <!-- Metadata DL -->
      <g transform="translate(10, 35)">
        <rect x="0" y="0" width="270" height="100" rx="4" fill="white" stroke="#fcd34d"/>
        <text x="135" y="18" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#78350f">Metadata &lt;dl&gt;</text>
        <text x="10" y="38" font-family="monospace" font-size="9" fill="#92400e">Sequence: {name}</text>
        <text x="10" y="52" font-family="monospace" font-size="9" fill="#92400e">Host: {host}</text>
        <text x="10" y="66" font-family="monospace" font-size="9" fill="#92400e">Start URL: {startUrl|seed}</text>
        <text x="10" y="80" font-family="monospace" font-size="9" fill="#92400e">Version: {version}</text>
        <text x="10" y="94" font-family="monospace" font-size="9" fill="#b45309">+ dynamic stats entries</text>
      </g>
      
      <!-- Overrides List -->
      <g transform="translate(295, 35)">
        <rect x="0" y="0" width="280" height="100" rx="4" fill="white" stroke="#fcd34d"/>
        <text x="140" y="18" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#78350f">Shared Overrides &lt;ul&gt;</text>
        <text x="10" y="38" font-family="monospace" font-size="9" fill="#92400e">sharedOverrides object entries:</text>
        <rect x="10" y="48" width="260" height="20" rx="3" fill="#fef3c7"/>
        <text x="20" y="62" font-family="monospace" font-size="9" fill="#78350f">key: value (JSON.stringify if object)</text>
        <rect x="10" y="72" width="260" height="20" rx="3" fill="#fef3c7"/>
        <text x="20" y="86" font-family="monospace" font-size="9" fill="#78350f">another_key: another_value</text>
      </g>
      
      <!-- CrawlBehaviorPanelControl -->
      <g transform="translate(10, 145)">
        <rect x="0" y="0" width="565" height="100" rx="4" fill="url(#child-gradient)" opacity="0.15" stroke="#10b981" stroke-width="1"/>
        <text x="282" y="25" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#059669">
          CrawlBehaviorPanelControl
        </text>
        <text x="282" y="45" font-family="monospace" font-size="10" text-anchor="middle" fill="#10b981">
          Renders this.behaviors array as behavior cards
        </text>
        <text x="282" y="62" font-family="monospace" font-size="9" text-anchor="middle" fill="#6ee7b7">
          Each card: label, description, scope, mode, impact, limits, cues, status
        </text>
        <text x="282" y="78" font-family="monospace" font-size="9" text-anchor="middle" fill="#6ee7b7">
          Conditional: only rendered if behaviors.length > 0
        </text>
      </g>
    </g>
  </g>

  <!-- =========== SECTION 3: Timeline =========== -->
  <g transform="translate(50, 730)">
    <rect x="0" y="0" width="650" height="310" rx="10" fill="white" stroke="#0ea5e9" stroke-width="2" filter="url(#shadow)"/>
    
    <!-- Header -->
    <rect x="0" y="0" width="650" height="45" rx="10" fill="url(#section-gradient)"/>
    <rect x="0" y="35" width="650" height="10" fill="url(#section-gradient)"/>
    <text x="20" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">
      3. _buildTimelineSection()
    </text>
    <text x="420" y="28" font-family="monospace" font-size="10" fill="rgba(255,255,255,0.85)">
      conditional: timeline.length > 0
    </text>
    
    <g transform="translate(20, 55)">
      <text x="0" y="15" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#0c4a6e">
        &lt;h3&gt; "Behavior Timeline"
      </text>
      
      <!-- Timeline list -->
      <rect x="0" y="25" width="610" height="215" rx="6" fill="#f0f9ff" stroke="#bae6fd" stroke-width="1"/>
      <text x="10" y="45" font-family="monospace" font-size="10" fill="#0369a1">&lt;ol class="crawl-config-workspace__timeline-list"&gt;</text>
      
      <!-- Timeline item structure -->
      <g transform="translate(20, 55)">
        <rect x="0" y="0" width="570" height="150" rx="4" fill="white" stroke="#7dd3fc"/>
        <text x="285" y="18" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#0c4a6e">Timeline Item Structure &lt;li&gt;</text>
        
        <g transform="translate(15, 30)">
          <rect x="0" y="0" width="160" height="55" rx="4" fill="#e0f2fe"/>
          <text x="80" y="18" font-family="monospace" font-size="9" text-anchor="middle" fill="#0369a1">data-step-id</text>
          <text x="80" y="33" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#0c4a6e">step.label</text>
          <text x="80" y="48" font-family="monospace" font-size="8" text-anchor="middle" fill="#0284c7">step.operation</text>
        </g>
        
        <g transform="translate(190, 30)">
          <rect x="0" y="0" width="160" height="55" rx="4" fill="#ecfdf5"/>
          <text x="80" y="18" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#047857">step.summary &lt;p&gt;</text>
          <text x="80" y="35" font-family="monospace" font-size="8" text-anchor="middle" fill="#059669">step.impact (key: value)</text>
          <text x="80" y="50" font-family="monospace" font-size="8" text-anchor="middle" fill="#10b981">formatKeyValueList()</text>
        </g>
        
        <g transform="translate(365, 30)">
          <rect x="0" y="0" width="190" height="55" rx="4" fill="#fef3c7"/>
          <text x="95" y="18" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#92400e">step.overrides &lt;ul&gt;</text>
          <text x="95" y="35" font-family="monospace" font-size="8" text-anchor="middle" fill="#b45309">key: value chips</text>
          <text x="95" y="50" font-family="monospace" font-size="8" text-anchor="middle" fill="#d97706">step.status badge</text>
        </g>
        
        <!-- Visual timeline line -->
        <line x1="10" y1="95" x2="560" y2="95" stroke="#7dd3fc" stroke-width="2" stroke-dasharray="8,4"/>
        <circle cx="100" cy="95" r="8" fill="#0ea5e9"/>
        <text x="100" y="115" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#0369a1">Step 1</text>
        <circle cx="230" cy="95" r="8" fill="#0ea5e9"/>
        <text x="230" y="115" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#0369a1">Step 2</text>
        <circle cx="360" cy="95" r="8" fill="#0ea5e9"/>
        <text x="360" y="115" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#0369a1">Step 3</text>
        <circle cx="490" cy="95" r="6" fill="#bae6fd" stroke="#0ea5e9"/>
        <text x="490" y="115" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#64748b">...</text>
      </g>
    </g>
  </g>

  <!-- =========== SECTION 4: Diff Mini-Map =========== -->
  <g transform="translate(720, 730)">
    <rect x="0" y="0" width="630" height="310" rx="10" fill="white" stroke="#0ea5e9" stroke-width="2" filter="url(#shadow)"/>
    
    <!-- Header -->
    <rect x="0" y="0" width="630" height="45" rx="10" fill="url(#section-gradient)"/>
    <rect x="0" y="35" width="630" height="10" fill="url(#section-gradient)"/>
    <text x="20" y="28" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">
      4. _buildDiffMiniMap()
    </text>
    <text x="400" y="28" font-family="monospace" font-size="10" fill="rgba(255,255,255,0.85)">
      conditional: diffSummary.length > 0
    </text>
    
    <g transform="translate(20, 55)">
      <text x="0" y="15" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#0c4a6e">
        &lt;h3&gt; "Config Diff Mini-Map"
      </text>
      
      <!-- Diff grid -->
      <rect x="0" y="25" width="590" height="215" rx="6" fill="#fdf4ff" stroke="#f0abfc" stroke-width="1"/>
      <text x="10" y="45" font-family="monospace" font-size="10" fill="#a21caf">&lt;div class="crawl-config-workspace__diff-grid"&gt;</text>
      
      <!-- Diff card structure -->
      <g transform="translate(20, 55)">
        <!-- Card 1 -->
        <rect x="0" y="0" width="170" height="150" rx="6" fill="white" stroke="#e879f9" filter="url(#shadow-sm)"/>
        <text x="85" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" text-anchor="middle" fill="#86198f">Diff Card &lt;article&gt;</text>
        <text x="85" y="35" font-family="monospace" font-size="8" text-anchor="middle" fill="#a21caf">data-diff-key</text>
        <text x="85" y="48" font-family="monospace" font-size="8" text-anchor="middle" fill="#a21caf">data-diff-scope</text>
        
        <rect x="10" y="58" width="150" height="20" rx="3" fill="#fae8ff"/>
        <text x="85" y="72" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#86198f">&lt;h4&gt; entry.label</text>
        
        <text x="10" y="95" font-family="monospace" font-size="8" fill="#a21caf">source: {scope}</text>
        <rect x="10" y="100" width="150" height="35" rx="3" fill="#f5f3ff"/>
        <text x="15" y="115" font-family="monospace" font-size="8" fill="#7c3aed">default: {defaultValue}</text>
        <text x="15" y="128" font-family="monospace" font-size="8" fill="#7c3aed">override: {overrideValue}</text>
        
        <rect x="50" y="138" width="70" height="10" rx="2" fill="#d946ef"/>
        <text x="85" y="146" font-family="system-ui, sans-serif" font-size="6" text-anchor="middle" fill="white">status badge</text>
        
        <!-- Card 2 -->
        <rect x="185" y="0" width="170" height="150" rx="6" fill="white" stroke="#e879f9" filter="url(#shadow-sm)"/>
        <text x="270" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" text-anchor="middle" fill="#86198f">Diff Card 2</text>
        <rect x="195" y="35" width="150" height="105" rx="3" fill="#faf5ff"/>
        <text x="270" y="90" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#a855f7">...</text>
        
        <!-- Card 3 -->
        <rect x="370" y="0" width="170" height="150" rx="6" fill="white" stroke="#e879f9" filter="url(#shadow-sm)"/>
        <text x="455" y="18" font-family="system-ui, sans-serif" font-size="10" font-weight="600" text-anchor="middle" fill="#86198f">Diff Card N</text>
        <rect x="380" y="35" width="150" height="105" rx="3" fill="#faf5ff"/>
        <text x="455" y="90" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#a855f7">...</text>
      </g>
    </g>
  </g>

  <!-- =========== HELPER FUNCTIONS SECTION =========== -->
  <g transform="translate(50, 1060)">
    <rect x="0" y="0" width="650" height="160" rx="10" fill="white" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>
    
    <!-- Header -->
    <rect x="0" y="0" width="650" height="40" rx="10" fill="url(#helper-gradient)"/>
    <rect x="0" y="30" width="650" height="10" fill="url(#helper-gradient)"/>
    <text x="20" y="26" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">
      Helper Functions
    </text>
    
    <g transform="translate(20, 55)">
      <!-- Row 1 -->
      <rect x="0" y="0" width="190" height="40" rx="4" fill="#fdf2f8"/>
      <text x="95" y="17" font-family="monospace" font-size="10" text-anchor="middle" fill="#9d174d">toArray(value)</text>
      <text x="95" y="32" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#be185d">Ensures array type</text>
      
      <rect x="205" y="0" width="190" height="40" rx="4" fill="#fdf2f8"/>
      <text x="300" y="17" font-family="monospace" font-size="10" text-anchor="middle" fill="#9d174d">createTextControl()</text>
      <text x="300" y="32" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#be185d">Factory for text spans</text>
      
      <rect x="410" y="0" width="210" height="40" rx="4" fill="#fdf2f8"/>
      <text x="515" y="17" font-family="monospace" font-size="10" text-anchor="middle" fill="#9d174d">hasProfileData(profile)</text>
      <text x="515" y="32" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#be185d">Checks if profile has content</text>
      
      <!-- Row 2 -->
      <rect x="0" y="50" width="190" height="40" rx="4" fill="#fdf2f8"/>
      <text x="95" y="67" font-family="monospace" font-size="10" text-anchor="middle" fill="#9d174d">normalizeStatus()</text>
      <text x="95" y="82" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#be185d">→ {level, text}</text>
      
      <rect x="205" y="50" width="190" height="40" rx="4" fill="#fdf2f8"/>
      <text x="300" y="67" font-family="monospace" font-size="10" text-anchor="middle" fill="#9d174d">formatKeyValueList()</text>
      <text x="300" y="82" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#be185d">→ "k1: v1 • k2: v2"</text>
      
      <rect x="410" y="50" width="210" height="40" rx="4" fill="#fdf2f8"/>
      <text x="515" y="67" font-family="monospace" font-size="10" text-anchor="middle" fill="#9d174d">_createBadgeControl()</text>
      <text x="515" y="82" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#be185d">Status badge with color</text>
    </g>
  </g>

  <!-- =========== DATA FLOW SECTION =========== -->
  <g transform="translate(720, 1060)">
    <rect x="0" y="0" width="630" height="160" rx="10" fill="white" stroke="#f59e0b" stroke-width="2" filter="url(#shadow)"/>
    
    <!-- Header -->
    <rect x="0" y="0" width="630" height="40" rx="10" fill="url(#data-gradient)"/>
    <rect x="0" y="30" width="630" height="10" fill="url(#data-gradient)"/>
    <text x="20" y="26" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" fill="white">
      Data Flow &amp; Status Mapping
    </text>
    
    <g transform="translate(20, 50)">
      <!-- Status map -->
      <rect x="0" y="0" width="280" height="95" rx="6" fill="#fffbeb" stroke="#fcd34d"/>
      <text x="140" y="18" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#92400e">STATUS_CLASS_MAP</text>
      <text x="10" y="38" font-family="monospace" font-size="9" fill="#b45309">ok, success → "success" (green)</text>
      <text x="10" y="52" font-family="monospace" font-size="9" fill="#b45309">info, note → "info" (blue)</text>
      <text x="10" y="66" font-family="monospace" font-size="9" fill="#b45309">warn, warning → "warn" (yellow)</text>
      <text x="10" y="80" font-family="monospace" font-size="9" fill="#b45309">danger, error → "danger" (red)</text>
      
      <!-- Child controls -->
      <rect x="300" y="0" width="300" height="95" rx="6" fill="#ecfdf5" stroke="#6ee7b7"/>
      <text x="450" y="18" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#047857">Child Controls Used</text>
      
      <rect x="310" y="30" width="130" height="25" rx="4" fill="#10b981"/>
      <text x="375" y="47" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="white">ConfigMatrixControl</text>
      
      <rect x="450" y="30" width="140" height="25" rx="4" fill="#10b981"/>
      <text x="520" y="47" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="white">CrawlBehaviorPanelControl</text>
      
      <rect x="310" y="62" width="130" height="25" rx="4" fill="#34d399"/>
      <text x="375" y="79" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="white">jsgui.Control</text>
      
      <rect x="450" y="62" width="140" height="25" rx="4" fill="#34d399"/>
      <text x="520" y="79" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="white">jsgui.String_Control</text>
    </g>
  </g>

  <!-- =========== CSS Classes Reference =========== -->
  <g transform="translate(50, 1240)">
    <rect x="0" y="0" width="1300" height="120" rx="10" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1" filter="url(#shadow-sm)"/>
    <text x="650" y="25" font-family="system-ui, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#334155">
      CSS Classes Reference (BEM-style: crawl-config-workspace__)
    </text>
    
    <g transform="translate(20, 40)">
      <!-- Column 1 -->
      <text x="0" y="0" font-family="monospace" font-size="9" fill="#475569">__property-grid</text>
      <text x="0" y="14" font-family="monospace" font-size="9" fill="#475569">__tab-bar, __tab, __tab-hint, __tab-badge</text>
      <text x="0" y="28" font-family="monospace" font-size="9" fill="#475569">__panels, __panel, __panel-header, __panel-summary</text>
      <text x="0" y="42" font-family="monospace" font-size="9" fill="#475569">__matrix</text>
      
      <!-- Column 2 -->
      <text x="320" y="0" font-family="monospace" font-size="9" fill="#475569">__profile, __profile-summary, __profile-body</text>
      <text x="320" y="14" font-family="monospace" font-size="9" fill="#475569">__profile-meta, __meta-label, __meta-value</text>
      <text x="320" y="28" font-family="monospace" font-size="9" fill="#475569">__overrides-list, __override, __override-key, __override-value</text>
      <text x="320" y="42" font-family="monospace" font-size="9" fill="#475569">__behaviors</text>
      
      <!-- Column 3 -->
      <text x="700" y="0" font-family="monospace" font-size="9" fill="#475569">__timeline, __timeline-title, __timeline-list</text>
      <text x="700" y="14" font-family="monospace" font-size="9" fill="#475569">__timeline-item, __timeline-label, __timeline-operation</text>
      <text x="700" y="28" font-family="monospace" font-size="9" fill="#475569">__timeline-summary, __timeline-impact, __timeline-overrides</text>
      <text x="700" y="42" font-family="monospace" font-size="9" fill="#475569">__timeline-override, __timeline-badge</text>
      
      <!-- Column 4 -->
      <text x="1030" y="0" font-family="monospace" font-size="9" fill="#475569">__diff-map, __diff-title, __diff-grid</text>
      <text x="1030" y="14" font-family="monospace" font-size="9" fill="#475569">__diff-card, __diff-label, __diff-source</text>
      <text x="1030" y="28" font-family="monospace" font-size="9" fill="#475569">__diff-values, __diff-value, __diff-note</text>
      <text x="1030" y="42" font-family="monospace" font-size="9" fill="#475569">__diff-badge, __badge, __empty</text>
    </g>
    
    <text x="650" y="105" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">
      Tab states: .is-active | Badge variants: badge--success, badge--info, badge--accent, badge--warn, badge--danger, badge--muted
    </text>
  </g>

  <!-- Footer -->
  <text x="700" y="1385" font-family="system-ui, sans-serif" font-size="11" text-anchor="middle" fill="#94a3b8">
    CrawlConfigWorkspaceControl — A jsgui3-html control for crawl configuration management
  </text>
</svg>
