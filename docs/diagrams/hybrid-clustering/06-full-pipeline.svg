<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 380">
  <g id="full-pipeline">
    <!-- Panel Header -->
    <rect x="0" y="0" width="800" height="45" fill="#3a3a3a" rx="8"/>
    <text x="400" y="28" text-anchor="middle" font-size="14" font-weight="600" fill="#f0ede8" letter-spacing="1">COMPLETE PROCESSING PIPELINE</text>
    
    <!-- Input -->
    <g transform="translate(30, 70)">
      <rect x="0" y="0" width="100" height="70" fill="#444" rx="6" stroke="#666" stroke-width="1"/>
      <text x="50" y="20" text-anchor="middle" font-size="10" font-weight="600" fill="#c9a962">INPUT</text>
      <text x="50" y="45" text-anchor="middle" font-size="16" fill="#888">&lt;/&gt;</text>
      <text x="50" y="62" text-anchor="middle" font-size="8" fill="#666">HTML page</text>
    </g>
    
    <!-- Arrow -->
    <path d="M 140 105 L 165 105" stroke="#c9a962" stroke-width="2"/>
    <polygon points="163,101 171,105 163,109" fill="#c9a962"/>
    
    <!-- Step 1: Parse -->
    <g transform="translate(175, 60)">
      <rect x="0" y="0" width="110" height="90" fill="#444" rx="6"/>
      <circle cx="95" cy="15" r="12" fill="#3b82f6"/>
      <text x="95" y="19" text-anchor="middle" font-size="10" font-weight="700" fill="white">1</text>
      <text x="55" y="35" text-anchor="middle" font-size="10" font-weight="600" fill="#60a5fa">PARSE</text>
      <text x="55" y="52" text-anchor="middle" font-size="8" fill="#aaa">Extract skeleton</text>
      <text x="55" y="66" text-anchor="middle" font-size="8" fill="#aaa">Compute L1/L2</text>
      <text x="55" y="80" text-anchor="middle" font-size="8" fill="#888">~1ms</text>
    </g>
    
    <!-- Arrow -->
    <path d="M 295 105 L 320 105" stroke="#c9a962" stroke-width="2"/>
    <polygon points="318,101 326,105 318,109" fill="#c9a962"/>
    
    <!-- Step 2: Exact Lookup -->
    <g transform="translate(330, 60)">
      <rect x="0" y="0" width="110" height="90" fill="#1e3a5f" rx="6" stroke="#3b82f6" stroke-width="1"/>
      <circle cx="95" cy="15" r="12" fill="#3b82f6"/>
      <text x="95" y="19" text-anchor="middle" font-size="10" font-weight="700" fill="white">2</text>
      <text x="55" y="35" text-anchor="middle" font-size="10" font-weight="600" fill="#60a5fa">EXACT</text>
      <text x="55" y="52" text-anchor="middle" font-size="8" fill="#aaa">DB lookup L1</text>
      <text x="55" y="66" text-anchor="middle" font-size="8" fill="#aaa">B-tree index</text>
      <text x="55" y="80" text-anchor="middle" font-size="8" fill="#888">~0.1ms</text>
    </g>
    
    <!-- Branch: Hit -->
    <g transform="translate(385, 160)">
      <path d="M 0 0 L 0 40 L -100 40 L -100 80" stroke="#10b981" stroke-width="2"/>
      <text x="-50" y="35" text-anchor="middle" font-size="8" fill="#10b981">HIT 80%</text>
      <rect x="-155" y="80" width="110" height="50" fill="#1a3a2a" rx="6" stroke="#10b981" stroke-width="1"/>
      <text x="-100" y="100" text-anchor="middle" font-size="9" font-weight="600" fill="#34d399">âœ“ DONE</text>
      <text x="-100" y="115" text-anchor="middle" font-size="8" fill="#aaa">Return cluster</text>
    </g>
    
    <!-- Arrow: Miss -->
    <path d="M 450 105 L 475 105" stroke="#fbbf24" stroke-width="2"/>
    <polygon points="473,101 481,105 473,109" fill="#fbbf24"/>
    <text x="462" y="95" text-anchor="middle" font-size="8" fill="#fbbf24">MISS</text>
    
    <!-- Step 3: MinHash -->
    <g transform="translate(485, 60)">
      <rect x="0" y="0" width="110" height="90" fill="#2d1f4a" rx="6" stroke="#8b5cf6" stroke-width="1"/>
      <circle cx="95" cy="15" r="12" fill="#8b5cf6"/>
      <text x="95" y="19" text-anchor="middle" font-size="10" font-weight="700" fill="white">3</text>
      <text x="55" y="35" text-anchor="middle" font-size="10" font-weight="600" fill="#a78bfa">MinHash</text>
      <text x="55" y="52" text-anchor="middle" font-size="8" fill="#aaa">Generate sig</text>
      <text x="55" y="66" text-anchor="middle" font-size="8" fill="#aaa">Band lookup</text>
      <text x="55" y="80" text-anchor="middle" font-size="8" fill="#888">~2ms</text>
    </g>
    
    <!-- Arrow -->
    <path d="M 605 105 L 630 105" stroke="#c9a962" stroke-width="2"/>
    <polygon points="628,101 636,105 628,109" fill="#c9a962"/>
    
    <!-- Step 4: Leader -->
    <g transform="translate(640, 60)">
      <rect x="0" y="0" width="130" height="90" fill="#1a3a2a" rx="6" stroke="#10b981" stroke-width="1"/>
      <circle cx="115" cy="15" r="12" fill="#10b981"/>
      <text x="115" y="19" text-anchor="middle" font-size="10" font-weight="700" fill="white">4</text>
      <text x="65" y="35" text-anchor="middle" font-size="10" font-weight="600" fill="#34d399">LEADER</text>
      <text x="65" y="52" text-anchor="middle" font-size="8" fill="#aaa">Compare centroids</text>
      <text x="65" y="66" text-anchor="middle" font-size="8" fill="#aaa">Assign or create</text>
      <text x="65" y="80" text-anchor="middle" font-size="8" fill="#888">~1ms</text>
    </g>
    
    <!-- Total Time -->
    <g transform="translate(250, 290)">
      <rect x="0" y="0" width="300" height="70" fill="#444" rx="6"/>
      <text x="150" y="22" text-anchor="middle" font-size="11" font-weight="600" fill="#c9a962">TOTAL PROCESSING TIME</text>
      <text x="150" y="45" text-anchor="middle" font-size="14" fill="#aaa">Hit path: <tspan fill="#34d399" font-weight="700">~1ms</tspan> | Miss path: <tspan fill="#fbbf24" font-weight="700">~5ms</tspan></text>
      <text x="150" y="62" text-anchor="middle" font-size="9" fill="#888">Average (80% hit): ~1.8ms per page</text>
    </g>
  </g>
</svg>
