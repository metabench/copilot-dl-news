<?xml version="1.0" encoding="UTF-8"?>
<!-- Phase 1: Simple Structure - Monorepo Split Architecture -->
<!-- Created incrementally - structure first, styling later -->
<!-- Total: 20 modules across 5 tiers + migration strategy + AI prompts -->
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2400 5200" style="background: #f5f5f5">
  
  <!-- Title Area -->
  <rect x="50" y="30" width="2300" height="100" fill="white" stroke="black" stroke-width="2"/>
  <text x="1200" y="90" text-anchor="middle" font-family="Arial" font-size="36" font-weight="bold">
    Monorepo â†’ Multi-Repo Architecture: Focused Module Decomposition
  </text>
  
  <!-- Legend -->
  <rect x="50" y="150" width="2300" height="60" fill="white" stroke="black" stroke-width="1"/>
  <text x="100" y="185" font-family="Arial" font-size="14">
    Legend: ðŸŸ¦ Core Infrastructure | ðŸŸ© Crawling | ðŸŸ¨ Data/DB | ðŸŸª UI/Dashboard | ðŸŸ§ Intelligence | ðŸ”· Shared Libraries
  </text>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 1: CORE INFRASTRUCTURE MODULES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="260" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    TIER 1: CORE INFRASTRUCTURE
  </text>
  
  <!-- Module 1: @news/db-core -->
  <g id="module-db-core">
    <rect x="50" y="280" width="540" height="380" fill="white" stroke="black" stroke-width="2"/>
    <rect x="50" y="280" width="540" height="40" fill="#e3e3e3" stroke="black" stroke-width="1"/>
    <text x="320" y="308" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/db-core
    </text>
    
    <text x="60" y="340" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="60" y="358" font-family="Arial" font-size="11">Database abstraction layer with SQLite/Postgres adapters.</text>
    <text x="60" y="374" font-family="Arial" font-size="11">Schema definitions, migrations, query builders.</text>
    
    <text x="60" y="400" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="60" y="418" font-family="Arial" font-size="10">â€¢ src/data/db/sqlite/ â†’ SQLite adapter + queries</text>
    <text x="60" y="432" font-family="Arial" font-size="10">â€¢ src/data/db/postgres/ â†’ Postgres adapter</text>
    <text x="60" y="446" font-family="Arial" font-size="10">â€¢ src/data/db/migrations/ â†’ Schema migrations</text>
    <text x="60" y="460" font-family="Arial" font-size="10">â€¢ src/data/db/queries/ â†’ Query definitions</text>
    
    <text x="60" y="486" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="60" y="504" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add a new indexed column to pages table for fetch_priority"</text>
    <text x="60" y="518" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create a Postgres-compatible migration for the signals schema"</text>
    <text x="60" y="532" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement batch upsert for place_hub_candidates with RETURNING"</text>
    <text x="60" y="546" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add query telemetry hooks to measure slow queries &gt;100ms"</text>
    
    <text x="60" y="572" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="60" y="590" font-family="Arial" font-size="10">better-sqlite3, pg, node-pg-migrate</text>
    
    <text x="60" y="616" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="60" y="634" font-family="Arial" font-size="10">createDatabase(), runMigration(), QueryBuilder</text>
    <text x="60" y="648" font-family="Arial" font-size="10">adapters: { SqliteAdapter, PostgresAdapter }</text>
  </g>
  
  <!-- Module 2: @news/queue-system -->
  <g id="module-queue-system">
    <rect x="610" y="280" width="540" height="380" fill="white" stroke="black" stroke-width="2"/>
    <rect x="610" y="280" width="540" height="40" fill="#e3e3e3" stroke="black" stroke-width="1"/>
    <text x="880" y="308" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/queue-system
    </text>
    
    <text x="620" y="340" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="620" y="358" font-family="Arial" font-size="11">Priority queue management for URL processing.</text>
    <text x="620" y="374" font-family="Arial" font-size="11">Supports disk-backed persistence, priority scoring.</text>
    
    <text x="620" y="400" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="620" y="418" font-family="Arial" font-size="10">â€¢ src/core/queue/ â†’ Queue implementations</text>
    <text x="620" y="432" font-family="Arial" font-size="10">â€¢ src/core/crawler/QueueManager.js</text>
    <text x="620" y="446" font-family="Arial" font-size="10">â€¢ src/core/crawler/PriorityScorer.js</text>
    <text x="620" y="460" font-family="Arial" font-size="10">â€¢ src/core/crawler/PriorityCalculator.js</text>
    
    <text x="620" y="486" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="620" y="504" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement age-decay priority for URLs not visited in 7+ days"</text>
    <text x="620" y="518" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add Redis-backed queue for distributed crawling"</text>
    <text x="620" y="532" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create priority boost for hub pages with fresh_content signals"</text>
    <text x="620" y="546" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement fair-share scheduling across domains"</text>
    
    <text x="620" y="572" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="620" y="590" font-family="Arial" font-size="10">@news/db-core, better-queue, ioredis (optional)</text>
    
    <text x="620" y="616" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="620" y="634" font-family="Arial" font-size="10">QueueManager, PriorityScorer, DiskQueue</text>
    <text x="620" y="648" font-family="Arial" font-size="10">strategies: { FIFO, Priority, FairShare }</text>
  </g>
  
  <!-- Module 3: @news/config -->
  <g id="module-config">
    <rect x="1170" y="280" width="540" height="380" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1170" y="280" width="540" height="40" fill="#e3e3e3" stroke="black" stroke-width="1"/>
    <text x="1440" y="308" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/config
    </text>
    
    <text x="1180" y="340" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1180" y="358" font-family="Arial" font-size="11">Centralized configuration with validation.</text>
    <text x="1180" y="374" font-family="Arial" font-size="11">JSON schema validation, environment overlays.</text>
    
    <text x="1180" y="400" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1180" y="418" font-family="Arial" font-size="10">â€¢ config/ â†’ All config files</text>
    <text x="1180" y="432" font-family="Arial" font-size="10">â€¢ src/core/crawler/config/ â†’ Crawler configs</text>
    <text x="1180" y="446" font-family="Arial" font-size="10">â€¢ src/core/crawler/profiles/ â†’ Crawl profiles</text>
    <text x="1180" y="460" font-family="Arial" font-size="10">â€¢ src/bootstrap/ â†’ Config loading logic</text>
    
    <text x="1180" y="486" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1180" y="504" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add JSON schema for hubFreshness config block"</text>
    <text x="1180" y="518" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create crawler profile for aggressive sports news mode"</text>
    <text x="1180" y="532" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement config hot-reload without restart"</text>
    <text x="1180" y="546" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add environment-specific rate limit overrides"</text>
    
    <text x="1180" y="572" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1180" y="590" font-family="Arial" font-size="10">ajv (JSON schema), dotenv, convict</text>
    
    <text x="1180" y="616" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1180" y="634" font-family="Arial" font-size="10">loadConfig(), validateConfig(), ConfigSchema</text>
    <text x="1180" y="648" font-family="Arial" font-size="10">profiles: { aggressive, conservative, balanced }</text>
  </g>
  
  <!-- Module 4: @news/telemetry -->
  <g id="module-telemetry">
    <rect x="1730" y="280" width="540" height="380" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1730" y="280" width="540" height="40" fill="#e3e3e3" stroke="black" stroke-width="1"/>
    <text x="2000" y="308" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/telemetry
    </text>
    
    <text x="1740" y="340" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1740" y="358" font-family="Arial" font-size="11">Unified observability: metrics, events, traces.</text>
    <text x="1740" y="374" font-family="Arial" font-size="11">Task events, crawl telemetry, performance tracking.</text>
    
    <text x="1740" y="400" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1740" y="418" font-family="Arial" font-size="10">â€¢ src/core/crawler/telemetry/</text>
    <text x="1740" y="432" font-family="Arial" font-size="10">â€¢ src/core/crawler/CrawlerTelemetry.js</text>
    <text x="1740" y="446" font-family="Arial" font-size="10">â€¢ src/data/db/TaskEventWriter.js</text>
    <text x="1740" y="460" font-family="Arial" font-size="10">â€¢ src/core/crawler/metrics/</text>
    
    <text x="1740" y="486" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1740" y="504" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add Prometheus-compatible metrics endpoint"</text>
    <text x="1740" y="518" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement distributed tracing with OpenTelemetry"</text>
    <text x="1740" y="532" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create alert thresholds for crawl throughput drops"</text>
    <text x="1740" y="546" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add structured logging with correlation IDs"</text>
    
    <text x="1740" y="572" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1740" y="590" font-family="Arial" font-size="10">@news/db-core, pino, prom-client, @opentelemetry/*</text>
    
    <text x="1740" y="616" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1740" y="634" font-family="Arial" font-size="10">Telemetry, TaskEventWriter, MetricsRegistry</text>
    <text x="1740" y="648" font-family="Arial" font-size="10">decorators: { traced, metered, logged }</text>
  </g>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 2: CRAWLING MODULES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="710" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    TIER 2: CRAWLING ENGINE
  </text>
  
  <!-- Module 5: @news/fetcher -->
  <g id="module-fetcher">
    <rect x="50" y="730" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="50" y="730" width="540" height="40" fill="#c8e6c9" stroke="black" stroke-width="1"/>
    <text x="320" y="758" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/fetcher
    </text>
    
    <text x="60" y="790" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="60" y="808" font-family="Arial" font-size="11">HTTP fetching with Puppeteer browser automation.</text>
    <text x="60" y="824" font-family="Arial" font-size="11">Rate limiting, proxy rotation, retry policies.</text>
    
    <text x="60" y="850" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="60" y="868" font-family="Arial" font-size="10">â€¢ src/core/crawler/PuppeteerFetcher.js</text>
    <text x="60" y="882" font-family="Arial" font-size="10">â€¢ src/core/crawler/PuppeteerDomainManager.js</text>
    <text x="60" y="896" font-family="Arial" font-size="10">â€¢ src/core/crawler/BrowserPoolManager.js</text>
    <text x="60" y="910" font-family="Arial" font-size="10">â€¢ src/core/crawler/FetchPipeline.js</text>
    <text x="60" y="924" font-family="Arial" font-size="10">â€¢ src/core/crawler/NetworkRetryPolicy.js</text>
    <text x="60" y="938" font-family="Arial" font-size="10">â€¢ src/core/crawler/DomainThrottleManager.js</text>
    
    <text x="60" y="964" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="60" y="982" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add Cloudflare bypass using puppeteer-extra-stealth"</text>
    <text x="60" y="996" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement adaptive concurrency based on error rates"</text>
    <text x="60" y="1010" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create circuit breaker for persistently failing hosts"</text>
    <text x="60" y="1024" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add screenshot capture on JS render failures"</text>
    <text x="60" y="1038" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement request deduplication with content hashing"</text>
    
    <text x="60" y="1064" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="60" y="1082" font-family="Arial" font-size="10">puppeteer, puppeteer-extra, node-fetch, bottleneck</text>
    
    <text x="60" y="1108" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="60" y="1126" font-family="Arial" font-size="10">Fetcher, BrowserPool, RateLimiter, ProxyManager</text>
  </g>
  
  <!-- Module 6: @news/crawler-core -->
  <g id="module-crawler-core">
    <rect x="610" y="730" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="610" y="730" width="540" height="40" fill="#c8e6c9" stroke="black" stroke-width="1"/>
    <text x="880" y="758" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/crawler-core
    </text>
    
    <text x="620" y="790" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="620" y="808" font-family="Arial" font-size="11">Main crawl orchestration and coordination.</text>
    <text x="620" y="824" font-family="Arial" font-size="11">State machine, milestones, exit conditions.</text>
    
    <text x="620" y="850" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="620" y="868" font-family="Arial" font-size="10">â€¢ src/core/crawler/NewsCrawler.js (main class)</text>
    <text x="620" y="882" font-family="Arial" font-size="10">â€¢ src/core/crawler/CrawlerState.js</text>
    <text x="620" y="896" font-family="Arial" font-size="10">â€¢ src/core/crawler/CrawlOperations.js</text>
    <text x="620" y="910" font-family="Arial" font-size="10">â€¢ src/core/crawler/ExitManager.js</text>
    <text x="620" y="924" font-family="Arial" font-size="10">â€¢ src/core/crawler/MilestoneTracker.js</text>
    <text x="620" y="938" font-family="Arial" font-size="10">â€¢ src/core/crawler/CrawlFinalizer.js</text>
    
    <text x="620" y="964" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="620" y="982" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add graceful shutdown with queue persistence"</text>
    <text x="620" y="996" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement checkpoint/resume for long-running crawls"</text>
    <text x="620" y="1010" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create crawl budget system (time, pages, bytes)"</text>
    <text x="620" y="1024" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add real-time crawl progress WebSocket stream"</text>
    <text x="620" y="1038" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement multi-phase crawl with discovery â†’ harvest"</text>
    
    <text x="620" y="1064" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="620" y="1082" font-family="Arial" font-size="10">@news/fetcher, @news/queue-system, @news/db-core</text>
    <text x="620" y="1096" font-family="Arial" font-size="10">@news/telemetry, @news/config, rxjs</text>
    
    <text x="620" y="1122" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="620" y="1140" font-family="Arial" font-size="10">NewsCrawler, CrawlSession, CrawlEvents</text>
  </g>
  
  <!-- Module 7: @news/link-analysis -->
  <g id="module-link-analysis">
    <rect x="1170" y="730" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1170" y="730" width="540" height="40" fill="#c8e6c9" stroke="black" stroke-width="1"/>
    <text x="1440" y="758" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/link-analysis
    </text>
    
    <text x="1180" y="790" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1180" y="808" font-family="Arial" font-size="11">Link extraction, classification, and prioritization.</text>
    <text x="1180" y="824" font-family="Arial" font-size="11">URL pattern learning and categorization.</text>
    
    <text x="1180" y="850" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1180" y="868" font-family="Arial" font-size="10">â€¢ src/core/crawler/LinkExtractor.js</text>
    <text x="1180" y="882" font-family="Arial" font-size="10">â€¢ src/core/crawler/links.js</text>
    <text x="1180" y="896" font-family="Arial" font-size="10">â€¢ src/core/crawler/urlPolicy.js</text>
    <text x="1180" y="910" font-family="Arial" font-size="10">â€¢ src/core/crawler/UrlDecisionService.js</text>
    <text x="1180" y="924" font-family="Arial" font-size="10">â€¢ src/services/UrlClassificationService.js</text>
    <text x="1180" y="938" font-family="Arial" font-size="10">â€¢ src/services/UrlPatternLearningService.js</text>
    
    <text x="1180" y="964" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1180" y="982" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add canonical URL detection from og:url/rel=canonical"</text>
    <text x="1180" y="996" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create ML-based article vs hub URL classifier"</text>
    <text x="1180" y="1010" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement paywall/subscription page detection"</text>
    <text x="1180" y="1024" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add URL normalization (remove tracking params)"</text>
    <text x="1180" y="1038" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create sitemap-driven URL discovery mode"</text>
    
    <text x="1180" y="1064" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1180" y="1082" font-family="Arial" font-size="10">@news/db-core, cheerio, url-parse</text>
    
    <text x="1180" y="1108" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1180" y="1126" font-family="Arial" font-size="10">LinkExtractor, UrlClassifier, PatternLearner</text>
  </g>
  
  <!-- Module 8: @news/robots-sitemap -->
  <g id="module-robots-sitemap">
    <rect x="1730" y="730" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1730" y="730" width="540" height="40" fill="#c8e6c9" stroke="black" stroke-width="1"/>
    <text x="2000" y="758" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/robots-sitemap
    </text>
    
    <text x="1740" y="790" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1740" y="808" font-family="Arial" font-size="11">robots.txt parsing and sitemap processing.</text>
    <text x="1740" y="824" font-family="Arial" font-size="11">Crawl-delay compliance, sitemap news extensions.</text>
    
    <text x="1740" y="850" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1740" y="868" font-family="Arial" font-size="10">â€¢ src/core/crawler/robots.js</text>
    <text x="1740" y="882" font-family="Arial" font-size="10">â€¢ src/core/crawler/sitemap.js</text>
    <text x="1740" y="896" font-family="Arial" font-size="10">â€¢ src/core/crawler/RobotsAndSitemapCoordinator.js</text>
    <text x="1740" y="910" font-family="Arial" font-size="10">â€¢ src/data/robots/ â†’ robots.txt cache</text>
    
    <text x="1740" y="936" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1740" y="954" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Parse Google News sitemap extensions (keywords, dates)"</text>
    <text x="1740" y="968" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement sitemap index recursion with depth limits"</text>
    <text x="1740" y="982" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add intelligent crawl-delay negotiation"</text>
    <text x="1740" y="996" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create RSS/Atom feed discovery from robots.txt"</text>
    <text x="1740" y="1010" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement sitemap freshness tracking (lastmod)"</text>
    
    <text x="1740" y="1036" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1740" y="1054" font-family="Arial" font-size="10">robots-parser, fast-xml-parser, @news/fetcher</text>
    
    <text x="1740" y="1080" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1740" y="1098" font-family="Arial" font-size="10">RobotsParser, SitemapProcessor, CrawlDelayManager</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 3: CONTENT PROCESSING MODULES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="1200" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    TIER 3: CONTENT PROCESSING &amp; EXTRACTION
  </text>
  
  <!-- Module 9: @news/article-extractor -->
  <g id="module-article-extractor">
    <rect x="50" y="1220" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="50" y="1220" width="540" height="40" fill="#fff9c4" stroke="black" stroke-width="1"/>
    <text x="320" y="1248" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/article-extractor
    </text>
    
    <text x="60" y="1280" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="60" y="1298" font-family="Arial" font-size="11">Extract article content from HTML pages.</text>
    <text x="60" y="1314" font-family="Arial" font-size="11">Title, author, date, body, images, structured data.</text>
    
    <text x="60" y="1340" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="60" y="1358" font-family="Arial" font-size="10">â€¢ src/data/extraction/ â†’ Extraction logic</text>
    <text x="60" y="1372" font-family="Arial" font-size="10">â€¢ src/core/crawler/ArticleProcessor.js</text>
    <text x="60" y="1386" font-family="Arial" font-size="10">â€¢ src/services/ArticleXPathService.js</text>
    <text x="60" y="1400" font-family="Arial" font-size="10">â€¢ src/core/crawler/ArticleSignalsService.js</text>
    
    <text x="60" y="1426" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="60" y="1444" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add JSON-LD NewsArticle schema extraction"</text>
    <text x="60" y="1458" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement multi-page article concatenation"</text>
    <text x="60" y="1472" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create author entity extraction with Wikidata linking"</text>
    <text x="60" y="1486" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add reading time estimation from word count"</text>
    <text x="60" y="1500" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement paywall content detection heuristics"</text>
    
    <text x="60" y="1526" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="60" y="1544" font-family="Arial" font-size="10">cheerio, @mozilla/readability, metascraper</text>
    
    <text x="60" y="1570" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="60" y="1588" font-family="Arial" font-size="10">ArticleExtractor, StructuredDataParser, AuthorResolver</text>
  </g>
  
  <!-- Module 10: @news/place-detection -->
  <g id="module-place-detection">
    <rect x="610" y="1220" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="610" y="1220" width="540" height="40" fill="#fff9c4" stroke="black" stroke-width="1"/>
    <text x="880" y="1248" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/place-detection
    </text>
    
    <text x="620" y="1280" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="620" y="1298" font-family="Arial" font-size="11">Geographic entity detection in URLs and content.</text>
    <text x="620" y="1314" font-family="Arial" font-size="11">Gazetteer lookups, place disambiguation.</text>
    
    <text x="620" y="1340" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="620" y="1358" font-family="Arial" font-size="10">â€¢ src/core/crawler/gazetteer/ â†’ Gazetteer integration</text>
    <text x="620" y="1372" font-family="Arial" font-size="10">â€¢ src/geo/hub-validation/ â†’ Hub validation</text>
    <text x="620" y="1386" font-family="Arial" font-size="10">â€¢ src/services/PlaceHubPatternLearningService.js</text>
    <text x="620" y="1400" font-family="Arial" font-size="10">â€¢ src/core/crawler/hub-discovery/</text>
    
    <text x="620" y="1426" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="620" y="1444" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add country-specific place name aliases (UK/GB)"</text>
    <text x="620" y="1458" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement hierarchical place resolution (cityâ†’regionâ†’country)"</text>
    <text x="620" y="1472" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create confidence scoring for ambiguous places"</text>
    <text x="620" y="1486" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add demonym detection (Frenchâ†’France, Parisianâ†’Paris)"</text>
    <text x="620" y="1500" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement place mention frequency analysis"</text>
    
    <text x="620" y="1526" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="620" y="1544" font-family="Arial" font-size="10">@news/gazetteer, @news/db-core, fuse.js</text>
    
    <text x="620" y="1570" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="620" y="1588" font-family="Arial" font-size="10">PlaceDetector, PlaceDisambiguator, HubValidator</text>
  </g>
  
  <!-- Module 11: @news/gazetteer -->
  <g id="module-gazetteer">
    <rect x="1170" y="1220" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1170" y="1220" width="540" height="40" fill="#fff9c4" stroke="black" stroke-width="1"/>
    <text x="1440" y="1248" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/gazetteer
    </text>
    
    <text x="1180" y="1280" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1180" y="1298" font-family="Arial" font-size="11">Geographic database with 12M+ places.</text>
    <text x="1180" y="1314" font-family="Arial" font-size="11">GeoNames import, alternate names, hierarchies.</text>
    
    <text x="1180" y="1340" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1180" y="1358" font-family="Arial" font-size="10">â€¢ src/services/GeoImportService.js</text>
    <text x="1180" y="1372" font-family="Arial" font-size="10">â€¢ src/services/GeoImportStateManager.js</text>
    <text x="1180" y="1386" font-family="Arial" font-size="10">â€¢ src/ui/server/gazetteer/</text>
    <text x="1180" y="1400" font-family="Arial" font-size="10">â€¢ gazetteer-backup/ â†’ Data files</text>
    
    <text x="1180" y="1426" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1180" y="1444" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add incremental GeoNames updates (daily diffs)"</text>
    <text x="1180" y="1458" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement fuzzy name matching with Levenshtein distance"</text>
    <text x="1180" y="1472" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create bounding box queries for regional searches"</text>
    <text x="1180" y="1486" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add population-weighted place ranking"</text>
    <text x="1180" y="1500" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement postal code â†” place mapping"</text>
    
    <text x="1180" y="1526" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1180" y="1544" font-family="Arial" font-size="10">@news/db-core, better-sqlite3, csv-parser</text>
    
    <text x="1180" y="1570" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1180" y="1588" font-family="Arial" font-size="10">Gazetteer, PlaceIndex, HierarchyResolver</text>
  </g>
  
  <!-- Module 12: @news/facts-engine -->
  <g id="module-facts-engine">
    <rect x="1730" y="1220" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1730" y="1220" width="540" height="40" fill="#fff9c4" stroke="black" stroke-width="1"/>
    <text x="2000" y="1248" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/facts-engine
    </text>
    
    <text x="1740" y="1280" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1740" y="1298" font-family="Arial" font-size="11">Boolean fact assertions with evidence trails.</text>
    <text x="1740" y="1314" font-family="Arial" font-size="11">Facts feed classifications, audit logging.</text>
    
    <text x="1740" y="1340" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1740" y="1358" font-family="Arial" font-size="10">â€¢ src/facts/ â†’ Fact definitions and engine</text>
    <text x="1740" y="1372" font-family="Arial" font-size="10">â€¢ src/ui/server/factsServer.js</text>
    <text x="1740" y="1386" font-family="Arial" font-size="10">â€¢ docs/designs/FACT_BASED_CLASSIFICATION_SYSTEM.md</text>
    
    <text x="1740" y="1412" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1740" y="1430" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create fact: has_video_embed with iframe detection"</text>
    <text x="1740" y="1444" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add derived fact: is_breaking_news from title patterns"</text>
    <text x="1740" y="1458" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement fact versioning for historical analysis"</text>
    <text x="1740" y="1472" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create temporal facts (was_true_at, became_false_at)"</text>
    <text x="1740" y="1486" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add fact dependency graph visualization"</text>
    
    <text x="1740" y="1512" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1740" y="1530" font-family="Arial" font-size="10">@news/db-core, @news/telemetry</text>
    
    <text x="1740" y="1556" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1740" y="1574" font-family="Arial" font-size="10">FactEngine, FactRegistry, EvidenceTrail</text>
    <text x="1740" y="1588" font-family="Arial" font-size="10">types: { BooleanFact, TemporalFact, DerivedFact }</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 4: UI FRAMEWORK &amp; DASHBOARD MODULES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="1670" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    TIER 4: UI FRAMEWORK &amp; DASHBOARDS
  </text>
  
  <!-- Module 13: @news/ui-core (jsgui3 wrapper) -->
  <g id="module-ui-core">
    <rect x="50" y="1690" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="50" y="1690" width="540" height="40" fill="#e1bee7" stroke="black" stroke-width="1"/>
    <text x="320" y="1718" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/ui-core
    </text>
    
    <text x="60" y="1750" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="60" y="1768" font-family="Arial" font-size="11">Isomorphic UI framework based on jsgui3.</text>
    <text x="60" y="1784" font-family="Arial" font-size="11">SSR controls, client activation, shared styles.</text>
    
    <text x="60" y="1810" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="60" y="1828" font-family="Arial" font-size="10">â€¢ src/ui/controls/ â†’ Reusable UI controls</text>
    <text x="60" y="1842" font-family="Arial" font-size="10">â€¢ src/ui/jsgui/ â†’ jsgui3 customizations</text>
    <text x="60" y="1856" font-family="Arial" font-size="10">â€¢ src/ui/css/ â†’ Shared CSS (WLILO theme)</text>
    <text x="60" y="1870" font-family="Arial" font-size="10">â€¢ src/ui/client/ â†’ Client-side activation</text>
    <text x="60" y="1884" font-family="Arial" font-size="10">â€¢ src/ui/utils/ â†’ UI utility functions</text>
    
    <text x="60" y="1910" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="60" y="1928" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create DataTable control with virtual scrolling"</text>
    <text x="60" y="1942" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add SSR streaming with progressive hydration"</text>
    <text x="60" y="1956" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement control lazy-loading for 200+ item lists"</text>
    <text x="60" y="1970" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create WLILO-styled modal/dialog control"</text>
    <text x="60" y="1984" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add keyboard navigation to all interactive controls"</text>
    <text x="60" y="1998" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement CSS custom properties for theming"</text>
    
    <text x="60" y="2024" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="60" y="2042" font-family="Arial" font-size="10">jsgui3-html (npm link), express</text>
    
    <text x="60" y="2068" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="60" y="2086" font-family="Arial" font-size="10">Control, Page, DataGrid, Chart, Form</text>
    <text x="60" y="2100" font-family="Arial" font-size="10">themes: { WLILO, Light, Dark }</text>
  </g>
  
  <!-- Module 14: @news/dashboard-crawl -->
  <g id="module-dashboard-crawl">
    <rect x="610" y="1690" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="610" y="1690" width="540" height="40" fill="#e1bee7" stroke="black" stroke-width="1"/>
    <text x="880" y="1718" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/dashboard-crawl
    </text>
    
    <text x="620" y="1750" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="620" y="1768" font-family="Arial" font-size="11">Crawl monitoring and control dashboards.</text>
    <text x="620" y="1784" font-family="Arial" font-size="11">Real-time progress, queue visualization, stats.</text>
    
    <text x="620" y="1810" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="620" y="1828" font-family="Arial" font-size="10">â€¢ src/ui/server/crawlerMonitor/</text>
    <text x="620" y="1842" font-family="Arial" font-size="10">â€¢ src/ui/server/crawlObserver/</text>
    <text x="620" y="1856" font-family="Arial" font-size="10">â€¢ src/ui/server/crawlStatus/</text>
    <text x="620" y="1870" font-family="Arial" font-size="10">â€¢ src/ui/server/crawlStrategies/</text>
    <text x="620" y="1884" font-family="Arial" font-size="10">â€¢ src/ui/server/crawlerProfiles/</text>
    
    <text x="620" y="1910" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="620" y="1928" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add WebSocket-based real-time crawl events stream"</text>
    <text x="620" y="1942" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create domain-level throughput sparkline charts"</text>
    <text x="620" y="1956" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement crawl pause/resume controls with state sync"</text>
    <text x="620" y="1970" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add error clustering view (group similar failures)"</text>
    <text x="620" y="1984" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create crawl timeline with milestone markers"</text>
    <text x="620" y="1998" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add profile editor with live validation"</text>
    
    <text x="620" y="2024" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="620" y="2042" font-family="Arial" font-size="10">@news/ui-core, @news/crawler-core, @news/telemetry</text>
    <text x="620" y="2056" font-family="Arial" font-size="10">ws, chart.js</text>
    
    <text x="620" y="2082" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="620" y="2100" font-family="Arial" font-size="10">CrawlMonitorPage, ProfileEditor, QueueViewer</text>
  </g>
  
  <!-- Module 15: @news/dashboard-data -->
  <g id="module-dashboard-data">
    <rect x="1170" y="1690" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1170" y="1690" width="540" height="40" fill="#e1bee7" stroke="black" stroke-width="1"/>
    <text x="1440" y="1718" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/dashboard-data
    </text>
    
    <text x="1180" y="1750" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1180" y="1768" font-family="Arial" font-size="11">Data exploration and analytics dashboards.</text>
    <text x="1180" y="1784" font-family="Arial" font-size="11">Query builders, visualizations, exports.</text>
    
    <text x="1180" y="1810" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1180" y="1828" font-family="Arial" font-size="10">â€¢ src/ui/server/dataExplorer/</text>
    <text x="1180" y="1842" font-family="Arial" font-size="10">â€¢ src/ui/server/dataExplorerServer.js</text>
    <text x="1180" y="1856" font-family="Arial" font-size="10">â€¢ src/ui/server/analyticsHub/</text>
    <text x="1180" y="1870" font-family="Arial" font-size="10">â€¢ src/ui/server/qualityDashboard/</text>
    
    <text x="1180" y="1896" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1180" y="1914" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add SQL query builder with auto-complete"</text>
    <text x="1180" y="1928" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create time-series charts for article counts"</text>
    <text x="1180" y="1942" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement CSV/JSON export with streaming"</text>
    <text x="1180" y="1956" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add saved query library with scheduling"</text>
    <text x="1180" y="1970" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create geographic heatmap for place coverage"</text>
    <text x="1180" y="1984" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add data quality scoring dashboard"</text>
    
    <text x="1180" y="2010" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1180" y="2028" font-family="Arial" font-size="10">@news/ui-core, @news/db-core, d3, chart.js</text>
    
    <text x="1180" y="2054" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1180" y="2072" font-family="Arial" font-size="10">DataExplorer, AnalyticsHub, QueryBuilder</text>
    <text x="1180" y="2086" font-family="Arial" font-size="10">charts: { TimeSeries, Histogram, Heatmap }</text>
  </g>
  
  <!-- Module 16: @news/dashboard-geo -->
  <g id="module-dashboard-geo">
    <rect x="1730" y="1690" width="540" height="420" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1730" y="1690" width="540" height="40" fill="#e1bee7" stroke="black" stroke-width="1"/>
    <text x="2000" y="1718" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/dashboard-geo
    </text>
    
    <text x="1740" y="1750" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1740" y="1768" font-family="Arial" font-size="11">Geographic data management dashboards.</text>
    <text x="1740" y="1784" font-family="Arial" font-size="11">Place hub guessing, gazetteer admin, geo import.</text>
    
    <text x="1740" y="1810" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1740" y="1828" font-family="Arial" font-size="10">â€¢ src/ui/server/gazetteer/</text>
    <text x="1740" y="1842" font-family="Arial" font-size="10">â€¢ src/ui/server/placeHubGuessing/</text>
    <text x="1740" y="1856" font-family="Arial" font-size="10">â€¢ src/ui/server/geoImport/</text>
    <text x="1740" y="1870" font-family="Arial" font-size="10">â€¢ src/ui/server/hubGuessing/</text>
    
    <text x="1740" y="1896" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1740" y="1914" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add interactive map for place hub visualization"</text>
    <text x="1740" y="1928" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create bulk hub assignment interface"</text>
    <text x="1740" y="1942" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement place disambiguation workflow UI"</text>
    <text x="1740" y="1956" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add GeoNames import progress dashboard"</text>
    <text x="1740" y="1970" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create coverage gap analysis by country/region"</text>
    <text x="1740" y="1984" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add place hierarchy explorer (drill-down tree)"</text>
    
    <text x="1740" y="2010" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1740" y="2028" font-family="Arial" font-size="10">@news/ui-core, @news/gazetteer, @news/place-detection</text>
    <text x="1740" y="2042" font-family="Arial" font-size="10">leaflet, mapbox-gl</text>
    
    <text x="1740" y="2068" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1740" y="2086" font-family="Arial" font-size="10">GazetteerBrowser, HubGuessingMatrix, GeoImportDashboard</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ROW 5: INTELLIGENCE &amp; LEARNING MODULES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="2160" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    TIER 5: INTELLIGENCE &amp; PATTERN LEARNING
  </text>
  
  <!-- Module 17: @news/planner -->
  <g id="module-planner">
    <rect x="50" y="2180" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="50" y="2180" width="540" height="40" fill="#ffe0b2" stroke="black" stroke-width="1"/>
    <text x="320" y="2208" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/planner
    </text>
    
    <text x="60" y="2240" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="60" y="2258" font-family="Arial" font-size="11">GOFAI-style hierarchical crawl planning.</text>
    <text x="60" y="2274" font-family="Arial" font-size="11">Multi-goal optimization, budget allocation.</text>
    
    <text x="60" y="2300" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="60" y="2318" font-family="Arial" font-size="10">â€¢ src/core/crawler/planner/</text>
    <text x="60" y="2332" font-family="Arial" font-size="10">â€¢ src/core/crawler/HierarchicalPlanner.js</text>
    <text x="60" y="2346" font-family="Arial" font-size="10">â€¢ src/core/crawler/MultiGoalOptimizer.js</text>
    <text x="60" y="2360" font-family="Arial" font-size="10">â€¢ src/core/crawler/BudgetAllocator.js</text>
    <text x="60" y="2374" font-family="Arial" font-size="10">â€¢ src/core/crawler/IntelligentPlanningFacade.js</text>
    
    <text x="60" y="2400" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="60" y="2418" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement Monte Carlo tree search for URL selection"</text>
    <text x="60" y="2432" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add constraint satisfaction for domain rate limits"</text>
    <text x="60" y="2446" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create reward shaping for fresh hub discovery"</text>
    <text x="60" y="2460" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement plan explanation logging for debugging"</text>
    <text x="60" y="2474" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add A/B testing framework for planning strategies"</text>
    
    <text x="60" y="2500" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="60" y="2518" font-family="Arial" font-size="10">@news/queue-system, @news/telemetry, @news/config</text>
    
    <text x="60" y="2544" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="60" y="2562" font-family="Arial" font-size="10">HierarchicalPlanner, GoalOptimizer, BudgetAllocator</text>
  </g>
  
  <!-- Module 18: @news/pattern-learner -->
  <g id="module-pattern-learner">
    <rect x="610" y="2180" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="610" y="2180" width="540" height="40" fill="#ffe0b2" stroke="black" stroke-width="1"/>
    <text x="880" y="2208" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/pattern-learner
    </text>
    
    <text x="620" y="2240" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="620" y="2258" font-family="Arial" font-size="11">Learn URL and content patterns from data.</text>
    <text x="620" y="2274" font-family="Arial" font-size="11">Adaptive classification, temporal patterns.</text>
    
    <text x="620" y="2300" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="620" y="2318" font-family="Arial" font-size="10">â€¢ src/services/PatternLearner.js</text>
    <text x="620" y="2332" font-family="Arial" font-size="10">â€¢ src/core/crawler/learning/</text>
    <text x="620" y="2346" font-family="Arial" font-size="10">â€¢ src/core/crawler/TemporalPatternLearner.js</text>
    <text x="620" y="2360" font-family="Arial" font-size="10">â€¢ src/services/sitePatternAnalysis.js</text>
    
    <text x="620" y="2386" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="620" y="2404" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Learn optimal crawl time for each domain"</text>
    <text x="620" y="2418" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Detect content update frequency patterns"</text>
    <text x="620" y="2432" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Cluster similar URL structures across sites"</text>
    <text x="620" y="2446" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement pattern decay for stale rules"</text>
    <text x="620" y="2460" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add online learning with incremental updates"</text>
    
    <text x="620" y="2486" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="620" y="2504" font-family="Arial" font-size="10">@news/db-core, @news/link-analysis, ml-regression</text>
    
    <text x="620" y="2530" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="620" y="2548" font-family="Arial" font-size="10">PatternLearner, TemporalModel, SiteProfiler</text>
  </g>
  
  <!-- Module 19: @news/hub-discovery -->
  <g id="module-hub-discovery">
    <rect x="1170" y="2180" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1170" y="2180" width="540" height="40" fill="#ffe0b2" stroke="black" stroke-width="1"/>
    <text x="1440" y="2208" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/hub-discovery
    </text>
    
    <text x="1180" y="2240" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1180" y="2258" font-family="Arial" font-size="11">Intelligent hub page discovery and freshness.</text>
    <text x="1180" y="2274" font-family="Arial" font-size="11">Gap analysis, predictive hub finding.</text>
    
    <text x="1180" y="2300" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1180" y="2318" font-family="Arial" font-size="10">â€¢ src/core/crawler/hub-discovery/</text>
    <text x="1180" y="2332" font-family="Arial" font-size="10">â€¢ src/core/crawler/PredictiveHubDiscovery.js</text>
    <text x="1180" y="2346" font-family="Arial" font-size="10">â€¢ src/core/crawler/HubFreshnessController.js</text>
    <text x="1180" y="2360" font-family="Arial" font-size="10">â€¢ src/services/*HubGapAnalyzer.js</text>
    
    <text x="1180" y="2386" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1180" y="2404" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Predict hub freshness from historical update times"</text>
    <text x="1180" y="2418" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Find missing country hubs from continent coverage"</text>
    <text x="1180" y="2432" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Score hub quality by article yield rate"</text>
    <text x="1180" y="2446" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement hub churn detection (removed/moved pages)"</text>
    <text x="1180" y="2460" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add cross-site hub pattern transfer learning"</text>
    
    <text x="1180" y="2486" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1180" y="2504" font-family="Arial" font-size="10">@news/gazetteer, @news/pattern-learner, @news/db-core</text>
    
    <text x="1180" y="2530" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1180" y="2548" font-family="Arial" font-size="10">HubDiscovery, GapAnalyzer, FreshnessController</text>
  </g>
  
  <!-- Module 20: @news/decision-engine -->
  <g id="module-decision-engine">
    <rect x="1730" y="2180" width="540" height="400" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1730" y="2180" width="540" height="40" fill="#ffe0b2" stroke="black" stroke-width="1"/>
    <text x="2000" y="2208" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold">
      @news/decision-engine
    </text>
    
    <text x="1740" y="2240" font-family="Arial" font-size="12" font-weight="bold">PURPOSE:</text>
    <text x="1740" y="2258" font-family="Arial" font-size="11">Explainable crawl decisions with audit trails.</text>
    <text x="1740" y="2274" font-family="Arial" font-size="11">Rule-based + learned hybrid decision making.</text>
    
    <text x="1740" y="2300" font-family="Arial" font-size="12" font-weight="bold">KEY FILES TO EXTRACT:</text>
    <text x="1740" y="2318" font-family="Arial" font-size="10">â€¢ src/core/crawler/decisions/</text>
    <text x="1740" y="2332" font-family="Arial" font-size="10">â€¢ src/core/crawler/DecisionExplainer.js</text>
    <text x="1740" y="2346" font-family="Arial" font-size="10">â€¢ src/core/crawler/decisionTraceHelper.js</text>
    <text x="1740" y="2360" font-family="Arial" font-size="10">â€¢ src/ui/server/decisionTreeViewer/</text>
    
    <text x="1740" y="2386" font-family="Arial" font-size="12" font-weight="bold">AI AGENT PROMPTS:</text>
    <text x="1740" y="2404" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add human-readable decision explanations"</text>
    <text x="1740" y="2418" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create decision tree visualization for debugging"</text>
    <text x="1740" y="2432" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Implement counterfactual analysis (what-if)"</text>
    <text x="1740" y="2446" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Add decision replay from historical traces"</text>
    <text x="1740" y="2460" font-family="Arial" font-size="9" fill="#444">ðŸ’¡ "Create A/B comparison of decision strategies"</text>
    
    <text x="1740" y="2486" font-family="Arial" font-size="12" font-weight="bold">DEPENDENCIES:</text>
    <text x="1740" y="2504" font-family="Arial" font-size="10">@news/planner, @news/telemetry, @news/facts-engine</text>
    
    <text x="1740" y="2530" font-family="Arial" font-size="12" font-weight="bold">EXPORTS:</text>
    <text x="1740" y="2548" font-family="Arial" font-size="10">DecisionEngine, Explainer, TraceViewer</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- DEPENDENCY GRAPH SECTION -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="2630" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    DEPENDENCY GRAPH &amp; DATA FLOW
  </text>
  
  <g id="dependency-graph">
    <rect x="50" y="2650" width="2220" height="500" fill="white" stroke="black" stroke-width="2"/>
    
    <!-- Tier labels -->
    <text x="100" y="2690" font-family="Arial" font-size="14" font-weight="bold" fill="#555">TIER 1: Infrastructure</text>
    <text x="100" y="2770" font-family="Arial" font-size="14" font-weight="bold" fill="#555">TIER 2: Crawling</text>
    <text x="100" y="2850" font-family="Arial" font-size="14" font-weight="bold" fill="#555">TIER 3: Content</text>
    <text x="100" y="2930" font-family="Arial" font-size="14" font-weight="bold" fill="#555">TIER 4: UI</text>
    <text x="100" y="3010" font-family="Arial" font-size="14" font-weight="bold" fill="#555">TIER 5: Intelligence</text>
    
    <!-- Tier 1 nodes -->
    <rect x="280" y="2670" width="140" height="30" fill="#e3e3e3" stroke="black" rx="5"/>
    <text x="350" y="2690" text-anchor="middle" font-family="Arial" font-size="10">@news/db-core</text>
    
    <rect x="440" y="2670" width="140" height="30" fill="#e3e3e3" stroke="black" rx="5"/>
    <text x="510" y="2690" text-anchor="middle" font-family="Arial" font-size="10">@news/queue-system</text>
    
    <rect x="600" y="2670" width="120" height="30" fill="#e3e3e3" stroke="black" rx="5"/>
    <text x="660" y="2690" text-anchor="middle" font-family="Arial" font-size="10">@news/config</text>
    
    <rect x="740" y="2670" width="140" height="30" fill="#e3e3e3" stroke="black" rx="5"/>
    <text x="810" y="2690" text-anchor="middle" font-family="Arial" font-size="10">@news/telemetry</text>
    
    <!-- Tier 2 nodes -->
    <rect x="280" y="2750" width="120" height="30" fill="#c8e6c9" stroke="black" rx="5"/>
    <text x="340" y="2770" text-anchor="middle" font-family="Arial" font-size="10">@news/fetcher</text>
    
    <rect x="420" y="2750" width="160" height="30" fill="#c8e6c9" stroke="black" rx="5"/>
    <text x="500" y="2770" text-anchor="middle" font-family="Arial" font-size="10">@news/crawler-core</text>
    
    <rect x="600" y="2750" width="160" height="30" fill="#c8e6c9" stroke="black" rx="5"/>
    <text x="680" y="2770" text-anchor="middle" font-family="Arial" font-size="10">@news/link-analysis</text>
    
    <rect x="780" y="2750" width="180" height="30" fill="#c8e6c9" stroke="black" rx="5"/>
    <text x="870" y="2770" text-anchor="middle" font-family="Arial" font-size="10">@news/robots-sitemap</text>
    
    <!-- Tier 3 nodes -->
    <rect x="280" y="2830" width="180" height="30" fill="#fff9c4" stroke="black" rx="5"/>
    <text x="370" y="2850" text-anchor="middle" font-family="Arial" font-size="10">@news/article-extractor</text>
    
    <rect x="480" y="2830" width="180" height="30" fill="#fff9c4" stroke="black" rx="5"/>
    <text x="570" y="2850" text-anchor="middle" font-family="Arial" font-size="10">@news/place-detection</text>
    
    <rect x="680" y="2830" width="140" height="30" fill="#fff9c4" stroke="black" rx="5"/>
    <text x="750" y="2850" text-anchor="middle" font-family="Arial" font-size="10">@news/gazetteer</text>
    
    <rect x="840" y="2830" width="160" height="30" fill="#fff9c4" stroke="black" rx="5"/>
    <text x="920" y="2850" text-anchor="middle" font-family="Arial" font-size="10">@news/facts-engine</text>
    
    <!-- Tier 4 nodes -->
    <rect x="280" y="2910" width="120" height="30" fill="#e1bee7" stroke="black" rx="5"/>
    <text x="340" y="2930" text-anchor="middle" font-family="Arial" font-size="10">@news/ui-core</text>
    
    <rect x="420" y="2910" width="180" height="30" fill="#e1bee7" stroke="black" rx="5"/>
    <text x="510" y="2930" text-anchor="middle" font-family="Arial" font-size="10">@news/dashboard-crawl</text>
    
    <rect x="620" y="2910" width="160" height="30" fill="#e1bee7" stroke="black" rx="5"/>
    <text x="700" y="2930" text-anchor="middle" font-family="Arial" font-size="10">@news/dashboard-data</text>
    
    <rect x="800" y="2910" width="160" height="30" fill="#e1bee7" stroke="black" rx="5"/>
    <text x="880" y="2930" text-anchor="middle" font-family="Arial" font-size="10">@news/dashboard-geo</text>
    
    <!-- Tier 5 nodes -->
    <rect x="280" y="2990" width="120" height="30" fill="#ffe0b2" stroke="black" rx="5"/>
    <text x="340" y="3010" text-anchor="middle" font-family="Arial" font-size="10">@news/planner</text>
    
    <rect x="420" y="2990" width="180" height="30" fill="#ffe0b2" stroke="black" rx="5"/>
    <text x="510" y="3010" text-anchor="middle" font-family="Arial" font-size="10">@news/pattern-learner</text>
    
    <rect x="620" y="2990" width="180" height="30" fill="#ffe0b2" stroke="black" rx="5"/>
    <text x="710" y="3010" text-anchor="middle" font-family="Arial" font-size="10">@news/hub-discovery</text>
    
    <rect x="820" y="2990" width="180" height="30" fill="#ffe0b2" stroke="black" rx="5"/>
    <text x="910" y="3010" text-anchor="middle" font-family="Arial" font-size="10">@news/decision-engine</text>
    
    <!-- Dependency arrows (simplified) -->
    <defs>
      <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
        <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
      </marker>
    </defs>
    
    <!-- Tier 1 â†’ Tier 2 arrows -->
    <line x1="350" y1="2700" x2="340" y2="2750" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    <line x1="510" y1="2700" x2="500" y2="2750" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Tier 2 â†’ Tier 3 arrows -->
    <line x1="500" y1="2780" x2="370" y2="2830" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    <line x1="680" y1="2780" x2="570" y2="2830" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Tier 3 â†’ Tier 4 arrows -->
    <line x1="370" y1="2860" x2="510" y2="2910" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    <line x1="750" y1="2860" x2="880" y2="2910" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Tier 4 â†’ Tier 5 arrows -->
    <line x1="510" y1="2940" x2="510" y2="2990" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    <line x1="700" y1="2940" x2="710" y2="2990" stroke="#666" stroke-width="1" marker-end="url(#arrowhead)"/>
    
    <!-- Key insights box -->
    <rect x="1050" y="2680" width="500" height="200" fill="#f8f8f8" stroke="#999" stroke-width="1"/>
    <text x="1300" y="2710" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold">KEY DEPENDENCY PRINCIPLES</text>
    
    <text x="1070" y="2740" font-family="Arial" font-size="11">1. Tier 1 modules have ZERO internal dependencies</text>
    <text x="1070" y="2760" font-family="Arial" font-size="11">2. Higher tiers depend only on lower tiers</text>
    <text x="1070" y="2780" font-family="Arial" font-size="11">3. @news/db-core is the foundation for all data access</text>
    <text x="1070" y="2800" font-family="Arial" font-size="11">4. @news/telemetry provides cross-cutting observability</text>
    <text x="1070" y="2820" font-family="Arial" font-size="11">5. UI modules are strictly presentation-only</text>
    <text x="1070" y="2840" font-family="Arial" font-size="11">6. Intelligence modules consume but don't mutate core data</text>
    <text x="1070" y="2860" font-family="Arial" font-size="11">7. Each module owns its schema migrations</text>
    
    <!-- Circular dependency warning -->
    <rect x="1050" y="2900" width="500" height="130" fill="#ffebee" stroke="#c62828" stroke-width="1"/>
    <text x="1300" y="2930" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#c62828">âš  CIRCULAR DEPENDENCY PREVENTION</text>
    
    <text x="1070" y="2960" font-family="Arial" font-size="11">â€¢ Use dependency injection for cross-tier communication</text>
    <text x="1070" y="2980" font-family="Arial" font-size="11">â€¢ Events/callbacks for upward notification (child â†’ parent)</text>
    <text x="1070" y="3000" font-family="Arial" font-size="11">â€¢ Shared types in @news/types (interfaces only, no impl)</text>
    <text x="1070" y="3020" font-family="Arial" font-size="11">â€¢ Test with `npm ls --all` to detect cycles</text>
    
    <!-- Module communication patterns -->
    <rect x="1580" y="2680" width="420" height="350" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1"/>
    <text x="1790" y="2710" text-anchor="middle" font-family="Arial" font-size="14" font-weight="bold" fill="#2e7d32">MODULE COMMUNICATION PATTERNS</text>
    
    <text x="1600" y="2740" font-family="Arial" font-size="12" font-weight="bold">Sync Call (Request/Response):</text>
    <text x="1600" y="2758" font-family="Arial" font-size="10">â€¢ Database queries: await db.getPages(filter)</text>
    <text x="1600" y="2774" font-family="Arial" font-size="10">â€¢ Service calls: await fetcher.fetch(url, opts)</text>
    
    <text x="1600" y="2800" font-family="Arial" font-size="12" font-weight="bold">Events (Pub/Sub):</text>
    <text x="1600" y="2818" font-family="Arial" font-size="10">â€¢ crawler.emit('page:fetched', { url, status })</text>
    <text x="1600" y="2834" font-family="Arial" font-size="10">â€¢ telemetry.on('metric', handler)</text>
    
    <text x="1600" y="2860" font-family="Arial" font-size="12" font-weight="bold">Streaming (Observables/Generators):</text>
    <text x="1600" y="2878" font-family="Arial" font-size="10">â€¢ for await (const page of crawler.pages$) { }</text>
    <text x="1600" y="2894" font-family="Arial" font-size="10">â€¢ queue.drain().pipe(map(transform))</text>
    
    <text x="1600" y="2920" font-family="Arial" font-size="12" font-weight="bold">Dependency Injection:</text>
    <text x="1600" y="2938" font-family="Arial" font-size="10">â€¢ const crawler = new Crawler({ db, queue, config })</text>
    <text x="1600" y="2954" font-family="Arial" font-size="10">â€¢ container.register('db', SqliteAdapter)</text>
    
    <text x="1600" y="2980" font-family="Arial" font-size="12" font-weight="bold">Plugin Architecture:</text>
    <text x="1600" y="2998" font-family="Arial" font-size="10">â€¢ crawler.use(placeDetectionPlugin)</text>
    <text x="1600" y="3014" font-family="Arial" font-size="10">â€¢ plugins.register('extractor', ArticleExtractor)</text>
  </g>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- MIGRATION STRATEGY SECTION -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="3200" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    MIGRATION STRATEGY: MONOREPO â†’ MULTI-REPO
  </text>
  
  <!-- Phase 1: Extract Foundation -->
  <g id="migration-phase1">
    <rect x="50" y="3220" width="700" height="350" fill="white" stroke="#1565c0" stroke-width="3"/>
    <rect x="50" y="3220" width="700" height="45" fill="#1565c0"/>
    <text x="400" y="3250" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">
      PHASE 1: EXTRACT FOUNDATION (Weeks 1-4)
    </text>
    
    <text x="70" y="3290" font-family="Arial" font-size="13" font-weight="bold">Step 1.1: Create @news/types</text>
    <text x="70" y="3308" font-family="Arial" font-size="10">â€¢ Extract all TypeScript interfaces/types to shared package</text>
    <text x="70" y="3322" font-family="Arial" font-size="10">â€¢ No runtime code, only .d.ts definitions</text>
    <text x="70" y="3336" font-family="Arial" font-size="10">â€¢ PageRecord, ArticleData, CrawlConfig, etc.</text>
    
    <text x="70" y="3360" font-family="Arial" font-size="13" font-weight="bold">Step 1.2: Extract @news/db-core</text>
    <text x="70" y="3378" font-family="Arial" font-size="10">â€¢ Move src/data/db/* to standalone package</text>
    <text x="70" y="3392" font-family="Arial" font-size="10">â€¢ Create adapter interface (IDatabase)</text>
    <text x="70" y="3406" font-family="Arial" font-size="10">â€¢ Add comprehensive contract tests</text>
    
    <text x="70" y="3430" font-family="Arial" font-size="13" font-weight="bold">Step 1.3: Extract @news/config</text>
    <text x="70" y="3448" font-family="Arial" font-size="10">â€¢ Move config/* and validation logic</text>
    <text x="70" y="3462" font-family="Arial" font-size="10">â€¢ Add JSON Schema for all config blocks</text>
    
    <text x="70" y="3486" font-family="Arial" font-size="12" font-weight="bold" fill="#1565c0">AI AGENT TASK:</text>
    <text x="70" y="3504" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Identify all imports from src/data/db across the codebase"</text>
    <text x="70" y="3518" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Generate adapter interface from existing implementations"</text>
    <text x="70" y="3532" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Create contract tests that verify both SQLite and Postgres"</text>
    <text x="70" y="3546" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Find all config.* references and catalog required shapes"</text>
  </g>
  
  <!-- Phase 2: Extract Crawling -->
  <g id="migration-phase2">
    <rect x="770" y="3220" width="700" height="350" fill="white" stroke="#2e7d32" stroke-width="3"/>
    <rect x="770" y="3220" width="700" height="45" fill="#2e7d32"/>
    <text x="1120" y="3250" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">
      PHASE 2: EXTRACT CRAWLING (Weeks 5-8)
    </text>
    
    <text x="790" y="3290" font-family="Arial" font-size="13" font-weight="bold">Step 2.1: Create @news/fetcher</text>
    <text x="790" y="3308" font-family="Arial" font-size="10">â€¢ Move Puppeteer-based fetching to standalone</text>
    <text x="790" y="3322" font-family="Arial" font-size="10">â€¢ Define IFetcher interface for DI</text>
    <text x="790" y="3336" font-family="Arial" font-size="10">â€¢ Add mock fetcher for testing</text>
    
    <text x="790" y="3360" font-family="Arial" font-size="13" font-weight="bold">Step 2.2: Extract @news/queue-system</text>
    <text x="790" y="3378" font-family="Arial" font-size="10">â€¢ Decouple queue from crawler core</text>
    <text x="790" y="3392" font-family="Arial" font-size="10">â€¢ Support multiple backends (memory, disk, Redis)</text>
    
    <text x="790" y="3416" font-family="Arial" font-size="13" font-weight="bold">Step 2.3: Extract @news/crawler-core</text>
    <text x="790" y="3434" font-family="Arial" font-size="10">â€¢ Main orchestration with injected dependencies</text>
    <text x="790" y="3448" font-family="Arial" font-size="10">â€¢ Must work with @news/fetcher, @news/queue-system</text>
    
    <text x="790" y="3472" font-family="Arial" font-size="12" font-weight="bold" fill="#2e7d32">AI AGENT TASK:</text>
    <text x="790" y="3490" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Map all direct puppeteer imports and encapsulate"</text>
    <text x="790" y="3504" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Create integration test with mock fetcher"</text>
    <text x="790" y="3518" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Build dependency graph for NewsCrawler.js"</text>
    <text x="790" y="3532" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Identify constructor params that should be interfaces"</text>
  </g>
  
  <!-- Phase 3: Extract Content -->
  <g id="migration-phase3">
    <rect x="1490" y="3220" width="700" height="350" fill="white" stroke="#f57c00" stroke-width="3"/>
    <rect x="1490" y="3220" width="700" height="45" fill="#f57c00"/>
    <text x="1840" y="3250" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">
      PHASE 3: EXTRACT CONTENT (Weeks 9-12)
    </text>
    
    <text x="1510" y="3290" font-family="Arial" font-size="13" font-weight="bold">Step 3.1: Create @news/article-extractor</text>
    <text x="1510" y="3308" font-family="Arial" font-size="10">â€¢ Pure content extraction, no DB dependencies</text>
    <text x="1510" y="3322" font-family="Arial" font-size="10">â€¢ Cheerio + Readability based</text>
    
    <text x="1510" y="3346" font-family="Arial" font-size="13" font-weight="bold">Step 3.2: Create @news/gazetteer</text>
    <text x="1510" y="3364" font-family="Arial" font-size="10">â€¢ Standalone geo database with SQLite</text>
    <text x="1510" y="3378" font-family="Arial" font-size="10">â€¢ GeoNames import tooling included</text>
    
    <text x="1510" y="3402" font-family="Arial" font-size="13" font-weight="bold">Step 3.3: Create @news/place-detection</text>
    <text x="1510" y="3420" font-family="Arial" font-size="10">â€¢ Uses @news/gazetteer for lookups</text>
    <text x="1510" y="3434" font-family="Arial" font-size="10">â€¢ Returns place candidates with confidence</text>
    
    <text x="1510" y="3458" font-family="Arial" font-size="12" font-weight="bold" fill="#f57c00">AI AGENT TASK:</text>
    <text x="1510" y="3476" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Extract article parsing from ArticleProcessor.js"</text>
    <text x="1510" y="3490" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Create fixtures from real news sites for testing"</text>
    <text x="1510" y="3504" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Benchmark gazetteer query performance"</text>
    <text x="1510" y="3518" font-family="Arial" font-size="10" fill="#333">ðŸ¤– "Design place detection scoring interface"</text>
  </g>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- AI AGENT PROMPTS CATALOG -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="3620" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    AI AGENT PROMPT CATALOG BY DOMAIN
  </text>
  
  <!-- Database Prompts -->
  <g id="prompts-database">
    <rect x="50" y="3640" width="540" height="360" fill="white" stroke="black" stroke-width="2"/>
    <rect x="50" y="3640" width="540" height="35" fill="#5d4037"/>
    <text x="320" y="3665" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">
      ðŸ—„ï¸ DATABASE &amp; DATA ACCESS
    </text>
    
    <text x="60" y="3700" font-family="Arial" font-size="11" font-weight="bold">Schema &amp; Migrations:</text>
    <text x="60" y="3718" font-family="Arial" font-size="9">â€¢ "Add soft-delete support to pages table with deleted_at column"</text>
    <text x="60" y="3734" font-family="Arial" font-size="9">â€¢ "Create GIN index on article_signals.keywords for full-text search"</text>
    <text x="60" y="3750" font-family="Arial" font-size="9">â€¢ "Design schema for storing crawl session metadata"</text>
    <text x="60" y="3766" font-family="Arial" font-size="9">â€¢ "Add foreign key constraints between pages and place_hubs"</text>
    
    <text x="60" y="3792" font-family="Arial" font-size="11" font-weight="bold">Query Optimization:</text>
    <text x="60" y="3810" font-family="Arial" font-size="9">â€¢ "Analyze EXPLAIN output and suggest indexes for slow queries"</text>
    <text x="60" y="3826" font-family="Arial" font-size="9">â€¢ "Rewrite N+1 query pattern in HubGapAnalyzer to use JOIN"</text>
    <text x="60" y="3842" font-family="Arial" font-size="9">â€¢ "Create materialized view for article count by host statistics"</text>
    <text x="60" y="3858" font-family="Arial" font-size="9">â€¢ "Implement cursor-based pagination for large result sets"</text>
    
    <text x="60" y="3884" font-family="Arial" font-size="11" font-weight="bold">Multi-Database:</text>
    <text x="60" y="3902" font-family="Arial" font-size="9">â€¢ "Add PostgreSQL-compatible version of SQLite FTS5 queries"</text>
    <text x="60" y="3918" font-family="Arial" font-size="9">â€¢ "Create database adapter factory with connection pooling"</text>
    <text x="60" y="3934" font-family="Arial" font-size="9">â€¢ "Implement transaction retry logic for deadlock handling"</text>
    <text x="60" y="3950" font-family="Arial" font-size="9">â€¢ "Design schema migration tool that works across SQLite/Postgres"</text>
    
    <text x="60" y="3976" font-family="Arial" font-size="11" font-weight="bold">Testing:</text>
    <text x="60" y="3994" font-family="Arial" font-size="9">â€¢ "Create in-memory SQLite fixtures for unit tests"</text>
  </g>
  
  <!-- Crawler Prompts -->
  <g id="prompts-crawler">
    <rect x="610" y="3640" width="540" height="360" fill="white" stroke="black" stroke-width="2"/>
    <rect x="610" y="3640" width="540" height="35" fill="#1565c0"/>
    <text x="880" y="3665" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">
      ðŸ•·ï¸ CRAWLING &amp; FETCHING
    </text>
    
    <text x="620" y="3700" font-family="Arial" font-size="11" font-weight="bold">Reliability:</text>
    <text x="620" y="3718" font-family="Arial" font-size="9">â€¢ "Implement exponential backoff with jitter for 429 responses"</text>
    <text x="620" y="3734" font-family="Arial" font-size="9">â€¢ "Add circuit breaker for hosts with &gt;50% error rate"</text>
    <text x="620" y="3750" font-family="Arial" font-size="9">â€¢ "Create health check endpoint for crawler process monitoring"</text>
    <text x="620" y="3766" font-family="Arial" font-size="9">â€¢ "Implement graceful shutdown with queue persistence"</text>
    
    <text x="620" y="3792" font-family="Arial" font-size="11" font-weight="bold">Performance:</text>
    <text x="620" y="3810" font-family="Arial" font-size="9">â€¢ "Add connection pooling per domain with configurable limits"</text>
    <text x="620" y="3826" font-family="Arial" font-size="9">â€¢ "Implement HTTP/2 connection reuse where supported"</text>
    <text x="620" y="3842" font-family="Arial" font-size="9">â€¢ "Create adaptive concurrency based on response times"</text>
    <text x="620" y="3858" font-family="Arial" font-size="9">â€¢ "Add request coalescing for duplicate URLs in flight"</text>
    
    <text x="620" y="3884" font-family="Arial" font-size="11" font-weight="bold">Anti-Detection:</text>
    <text x="620" y="3902" font-family="Arial" font-size="9">â€¢ "Rotate user-agents from realistic browser fingerprint pool"</text>
    <text x="620" y="3918" font-family="Arial" font-size="9">â€¢ "Add random delays between 0.5-3s to mimic human behavior"</text>
    <text x="620" y="3934" font-family="Arial" font-size="9">â€¢ "Implement cookie jar per domain for session continuity"</text>
    <text x="620" y="3950" font-family="Arial" font-size="9">â€¢ "Detect and handle CAPTCHA pages gracefully"</text>
    
    <text x="620" y="3976" font-family="Arial" font-size="11" font-weight="bold">Observability:</text>
    <text x="620" y="3994" font-family="Arial" font-size="9">â€¢ "Add detailed fetch timing metrics (DNS, connect, TLS, TTFB)"</text>
  </g>
  
  <!-- UI Prompts -->
  <g id="prompts-ui">
    <rect x="1170" y="3640" width="540" height="360" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1170" y="3640" width="540" height="35" fill="#7b1fa2"/>
    <text x="1440" y="3665" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">
      ðŸ–¥ï¸ UI &amp; DASHBOARDS
    </text>
    
    <text x="1180" y="3700" font-family="Arial" font-size="11" font-weight="bold">jsgui3 Controls:</text>
    <text x="1180" y="3718" font-family="Arial" font-size="9">â€¢ "Create virtualized list control for 10K+ item rendering"</text>
    <text x="1180" y="3734" font-family="Arial" font-size="9">â€¢ "Add drag-and-drop reordering to priority queue view"</text>
    <text x="1180" y="3750" font-family="Arial" font-size="9">â€¢ "Implement inline editing for config values"</text>
    <text x="1180" y="3766" font-family="Arial" font-size="9">â€¢ "Create keyboard-navigable tree view control"</text>
    
    <text x="1180" y="3792" font-family="Arial" font-size="11" font-weight="bold">Real-Time:</text>
    <text x="1180" y="3810" font-family="Arial" font-size="9">â€¢ "Add WebSocket-based live crawl event stream"</text>
    <text x="1180" y="3826" font-family="Arial" font-size="9">â€¢ "Create auto-refreshing stats dashboard (30s interval)"</text>
    <text x="1180" y="3842" font-family="Arial" font-size="9">â€¢ "Implement SSE for progressive page loading"</text>
    <text x="1180" y="3858" font-family="Arial" font-size="9">â€¢ "Add reconnection handling for dropped WebSocket"</text>
    
    <text x="1180" y="3884" font-family="Arial" font-size="11" font-weight="bold">Visualization:</text>
    <text x="1180" y="3902" font-family="Arial" font-size="9">â€¢ "Create D3-based force-directed link graph"</text>
    <text x="1180" y="3918" font-family="Arial" font-size="9">â€¢ "Add geographic heatmap with Leaflet/Mapbox"</text>
    <text x="1180" y="3934" font-family="Arial" font-size="9">â€¢ "Implement sparkline charts for inline metrics"</text>
    <text x="1180" y="3950" font-family="Arial" font-size="9">â€¢ "Create sankey diagram for URL flow visualization"</text>
    
    <text x="1180" y="3976" font-family="Arial" font-size="11" font-weight="bold">Accessibility:</text>
    <text x="1180" y="3994" font-family="Arial" font-size="9">â€¢ "Add ARIA labels to all interactive controls"</text>
  </g>
  
  <!-- Intelligence Prompts -->
  <g id="prompts-intelligence">
    <rect x="1730" y="3640" width="540" height="360" fill="white" stroke="black" stroke-width="2"/>
    <rect x="1730" y="3640" width="540" height="35" fill="#ff6f00"/>
    <text x="2000" y="3665" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">
      ðŸ§  INTELLIGENCE &amp; LEARNING
    </text>
    
    <text x="1740" y="3700" font-family="Arial" font-size="11" font-weight="bold">Pattern Recognition:</text>
    <text x="1740" y="3718" font-family="Arial" font-size="9">â€¢ "Learn article URL patterns from confirmed article pages"</text>
    <text x="1740" y="3734" font-family="Arial" font-size="9">â€¢ "Detect navigation patterns across news site homepages"</text>
    <text x="1740" y="3750" font-family="Arial" font-size="9">â€¢ "Cluster similar error patterns for root cause analysis"</text>
    <text x="1740" y="3766" font-family="Arial" font-size="9">â€¢ "Identify optimal crawl times from historical success rates"</text>
    
    <text x="1740" y="3792" font-family="Arial" font-size="11" font-weight="bold">Planning:</text>
    <text x="1740" y="3810" font-family="Arial" font-size="9">â€¢ "Allocate budget across competing crawl goals"</text>
    <text x="1740" y="3826" font-family="Arial" font-size="9">â€¢ "Predict which hubs will have fresh content"</text>
    <text x="1740" y="3842" font-family="Arial" font-size="9">â€¢ "Balance exploration vs exploitation in URL selection"</text>
    <text x="1740" y="3858" font-family="Arial" font-size="9">â€¢ "Generate diverse crawl frontiers for broad coverage"</text>
    
    <text x="1740" y="3884" font-family="Arial" font-size="11" font-weight="bold">Explainability:</text>
    <text x="1740" y="3902" font-family="Arial" font-size="9">â€¢ "Generate human-readable decision explanations"</text>
    <text x="1740" y="3918" font-family="Arial" font-size="9">â€¢ "Create decision audit trail with timestamps"</text>
    <text x="1740" y="3934" font-family="Arial" font-size="9">â€¢ "Visualize decision factors as weighted contributions"</text>
    <text x="1740" y="3950" font-family="Arial" font-size="9">â€¢ "Enable counterfactual analysis (what-if scenarios)"</text>
    
    <text x="1740" y="3976" font-family="Arial" font-size="11" font-weight="bold">Continuous Learning:</text>
    <text x="1740" y="3994" font-family="Arial" font-size="9">â€¢ "Update models incrementally from crawl feedback"</text>
  </g>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- SUMMARY &amp; BENEFITS -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="4050" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    SUMMARY: BENEFITS OF MULTI-REPO ARCHITECTURE
  </text>
  
  <g id="benefits">
    <rect x="50" y="4070" width="1100" height="280" fill="white" stroke="black" stroke-width="2"/>
    
    <text x="70" y="4100" font-family="Arial" font-size="14" font-weight="bold" fill="#1565c0">âœ“ INDEPENDENT VERSIONING</text>
    <text x="70" y="4118" font-family="Arial" font-size="11">Each module can be versioned, released, and deployed independently</text>
    
    <text x="70" y="4146" font-family="Arial" font-size="14" font-weight="bold" fill="#2e7d32">âœ“ FOCUSED TEAMS</text>
    <text x="70" y="4164" font-family="Arial" font-size="11">Teams own specific modules with clear boundaries and responsibilities</text>
    
    <text x="70" y="4192" font-family="Arial" font-size="14" font-weight="bold" fill="#f57c00">âœ“ FASTER CI/CD</text>
    <text x="70" y="4210" font-family="Arial" font-size="11">Only test/build affected modules, not the entire codebase</text>
    
    <text x="70" y="4238" font-family="Arial" font-size="14" font-weight="bold" fill="#7b1fa2">âœ“ REUSABILITY</text>
    <text x="70" y="4256" font-family="Arial" font-size="11">Modules like @news/gazetteer can be used in other projects</text>
    
    <text x="70" y="4284" font-family="Arial" font-size="14" font-weight="bold" fill="#c62828">âœ“ REDUCED COUPLING</text>
    <text x="70" y="4302" font-family="Arial" font-size="11">Explicit interfaces prevent accidental tight coupling</text>
    
    <text x="70" y="4330" font-family="Arial" font-size="14" font-weight="bold" fill="#00838f">âœ“ AI AGENT FRIENDLY</text>
    <text x="70" y="4348" font-family="Arial" font-size="11">Smaller, focused repos are easier for AI agents to understand and modify</text>
    
    <!-- Module count summary -->
    <rect x="600" y="4100" width="530" height="240" fill="#f5f5f5" stroke="#999" stroke-width="1"/>
    <text x="865" y="4130" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold">MODULE COUNT BY TIER</text>
    
    <text x="620" y="4160" font-family="Arial" font-size="12">Tier 1: Infrastructure</text>
    <rect x="780" y="4148" width="80" height="16" fill="#e3e3e3" stroke="black"/>
    <text x="870" y="4162" font-family="Arial" font-size="12" font-weight="bold">4</text>
    
    <text x="620" y="4185" font-family="Arial" font-size="12">Tier 2: Crawling</text>
    <rect x="780" y="4173" width="80" height="16" fill="#c8e6c9" stroke="black"/>
    <text x="870" y="4187" font-family="Arial" font-size="12" font-weight="bold">4</text>
    
    <text x="620" y="4210" font-family="Arial" font-size="12">Tier 3: Content</text>
    <rect x="780" y="4198" width="80" height="16" fill="#fff9c4" stroke="black"/>
    <text x="870" y="4212" font-family="Arial" font-size="12" font-weight="bold">4</text>
    
    <text x="620" y="4235" font-family="Arial" font-size="12">Tier 4: UI</text>
    <rect x="780" y="4223" width="80" height="16" fill="#e1bee7" stroke="black"/>
    <text x="870" y="4237" font-family="Arial" font-size="12" font-weight="bold">4</text>
    
    <text x="620" y="4260" font-family="Arial" font-size="12">Tier 5: Intelligence</text>
    <rect x="780" y="4248" width="80" height="16" fill="#ffe0b2" stroke="black"/>
    <text x="870" y="4262" font-family="Arial" font-size="12" font-weight="bold">4</text>
    
    <line x1="620" y1="4280" x2="890" y2="4280" stroke="black" stroke-width="2"/>
    <text x="620" y="4300" font-family="Arial" font-size="14" font-weight="bold">TOTAL MODULES:</text>
    <text x="870" y="4300" font-family="Arial" font-size="14" font-weight="bold">20</text>
    
    <text x="620" y="4325" font-family="Arial" font-size="10" fill="#666">+ @news/types (shared interfaces)</text>
  </g>
  
  <!-- Next steps callout -->
  <rect x="1170" y="4070" width="1100" height="280" fill="#e3f2fd" stroke="#1565c0" stroke-width="2"/>
  <text x="1720" y="4100" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="#1565c0">
    ðŸš€ RECOMMENDED FIRST STEPS FOR AI AGENTS
  </text>
  
  <text x="1190" y="4135" font-family="Arial" font-size="12" font-weight="bold">1. RUN DEPENDENCY ANALYSIS</text>
  <text x="1190" y="4153" font-family="Arial" font-size="10">   node tools/dev/js-scan.js --dir src --build-index --json &gt; module-graph.json</text>
  
  <text x="1190" y="4178" font-family="Arial" font-size="12" font-weight="bold">2. IDENTIFY BOUNDARY VIOLATIONS</text>
  <text x="1190" y="4196" font-family="Arial" font-size="10">   Find direct imports that cross proposed module boundaries</text>
  
  <text x="1190" y="4221" font-family="Arial" font-size="12" font-weight="bold">3. CREATE INTERFACE DEFINITIONS</text>
  <text x="1190" y="4239" font-family="Arial" font-size="10">   Extract TypeScript interfaces for each module's public API</text>
  
  <text x="1190" y="4264" font-family="Arial" font-size="12" font-weight="bold">4. BUILD CONTRACT TESTS</text>
  <text x="1190" y="4282" font-family="Arial" font-size="10">   Create tests that verify module behavior against interfaces</text>
  
  <text x="1190" y="4307" font-family="Arial" font-size="12" font-weight="bold">5. EXTRACT FIRST MODULE</text>
  <text x="1190" y="4325" font-family="Arial" font-size="10">   Start with @news/db-core (highest dependency count, lowest risk)</text>
  
  <text x="1190" y="4348" font-family="Arial" font-size="10" fill="#1565c0" font-style="italic">
     ðŸ’¡ Tip: Use js-scan --ripple-analysis to assess refactoring impact before each extraction
  </text>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- DATA FLOW DIAGRAM -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="4420" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    DATA FLOW: CRAWL â†’ PROCESS â†’ STORE â†’ VISUALIZE
  </text>
  
  <g id="data-flow">
    <rect x="50" y="4440" width="2220" height="360" fill="white" stroke="black" stroke-width="2"/>
    
    <!-- Flow boxes -->
    <!-- Input Sources -->
    <rect x="80" y="4480" width="180" height="80" fill="#bbdefb" stroke="#1565c0" stroke-width="2" rx="10"/>
    <text x="170" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">INPUT SOURCES</text>
    <text x="170" y="4530" text-anchor="middle" font-family="Arial" font-size="9">Seed URLs</text>
    <text x="170" y="4545" text-anchor="middle" font-family="Arial" font-size="9">Sitemaps, RSS</text>
    
    <!-- Arrow -->
    <path d="M 260 4520 L 310 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Queue -->
    <rect x="320" y="4480" width="160" height="80" fill="#e3e3e3" stroke="black" stroke-width="2" rx="10"/>
    <text x="400" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">QUEUE</text>
    <text x="400" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/queue-system</text>
    <text x="400" y="4545" text-anchor="middle" font-family="Arial" font-size="9">Priority scoring</text>
    
    <!-- Arrow -->
    <path d="M 480 4520 L 530 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Fetcher -->
    <rect x="540" y="4480" width="160" height="80" fill="#c8e6c9" stroke="#2e7d32" stroke-width="2" rx="10"/>
    <text x="620" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">FETCH</text>
    <text x="620" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/fetcher</text>
    <text x="620" y="4545" text-anchor="middle" font-family="Arial" font-size="9">Puppeteer/HTTP</text>
    
    <!-- Arrow -->
    <path d="M 700 4520 L 750 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Extractor -->
    <rect x="760" y="4480" width="180" height="80" fill="#fff9c4" stroke="#f57f17" stroke-width="2" rx="10"/>
    <text x="850" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">EXTRACT</text>
    <text x="850" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/article-extractor</text>
    <text x="850" y="4545" text-anchor="middle" font-family="Arial" font-size="9">Content + metadata</text>
    
    <!-- Arrow -->
    <path d="M 940 4520 L 990 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Place Detection -->
    <rect x="1000" y="4480" width="180" height="80" fill="#fff9c4" stroke="#f57f17" stroke-width="2" rx="10"/>
    <text x="1090" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">GEO-TAG</text>
    <text x="1090" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/place-detection</text>
    <text x="1090" y="4545" text-anchor="middle" font-family="Arial" font-size="9">Location extraction</text>
    
    <!-- Arrow -->
    <path d="M 1180 4520 L 1230 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Facts Engine -->
    <rect x="1240" y="4480" width="160" height="80" fill="#fff9c4" stroke="#f57f17" stroke-width="2" rx="10"/>
    <text x="1320" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">CLASSIFY</text>
    <text x="1320" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/facts-engine</text>
    <text x="1320" y="4545" text-anchor="middle" font-family="Arial" font-size="9">Boolean facts</text>
    
    <!-- Arrow -->
    <path d="M 1400 4520 L 1450 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Database -->
    <rect x="1460" y="4480" width="160" height="80" fill="#e3e3e3" stroke="black" stroke-width="2" rx="10"/>
    <text x="1540" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">STORE</text>
    <text x="1540" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/db-core</text>
    <text x="1540" y="4545" text-anchor="middle" font-family="Arial" font-size="9">SQLite/Postgres</text>
    
    <!-- Arrow -->
    <path d="M 1620 4520 L 1670 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Dashboards -->
    <rect x="1680" y="4480" width="180" height="80" fill="#e1bee7" stroke="#7b1fa2" stroke-width="2" rx="10"/>
    <text x="1770" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">VISUALIZE</text>
    <text x="1770" y="4530" text-anchor="middle" font-family="Arial" font-size="9">@news/dashboard-*</text>
    <text x="1770" y="4545" text-anchor="middle" font-family="Arial" font-size="9">jsgui3 controls</text>
    
    <!-- Arrow -->
    <path d="M 1860 4520 L 1910 4520" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
    
    <!-- Users -->
    <rect x="1920" y="4480" width="140" height="80" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" rx="10"/>
    <text x="1990" y="4510" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">USERS</text>
    <text x="1990" y="4530" text-anchor="middle" font-family="Arial" font-size="9">Browser UI</text>
    <text x="1990" y="4545" text-anchor="middle" font-family="Arial" font-size="9">API consumers</text>
    
    <!-- Feedback loops -->
    <text x="100" y="4600" font-family="Arial" font-size="12" font-weight="bold" fill="#555">FEEDBACK LOOPS:</text>
    
    <!-- Learning feedback -->
    <path d="M 1540 4560 Q 1540 4640 850 4640 Q 170 4640 170 4560" stroke="#ff6f00" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
    <text x="850" y="4660" text-anchor="middle" font-family="Arial" font-size="10" fill="#ff6f00">
      Pattern Learning: successful extractions improve URL prioritization
    </text>
    
    <!-- Telemetry feedback -->
    <path d="M 620 4560 Q 620 4700 1090 4700 Q 1540 4700 1540 4560" stroke="#1565c0" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
    <text x="1080" y="4720" text-anchor="middle" font-family="Arial" font-size="10" fill="#1565c0">
      Telemetry: @news/telemetry collects metrics at every stage
    </text>
    
    <!-- Hub discovery feedback -->
    <path d="M 1320 4560 Q 1320 4760 400 4760 Q 80 4760 80 4560" stroke="#7b1fa2" stroke-width="2" fill="none" stroke-dasharray="5,3" marker-end="url(#arrowhead)"/>
    <text x="700" y="4780" text-anchor="middle" font-family="Arial" font-size="10" fill="#7b1fa2">
      Hub Discovery: classified hubs become high-priority seeds
    </text>
  </g>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- ADDITIONAL SPECIALIZED MODULES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <text x="50" y="4860" font-family="Arial" font-size="24" font-weight="bold" fill="#333">
    OPTIONAL SPECIALIZED MODULES (Future Expansion)
  </text>
  
  <!-- Row of smaller specialized modules -->
  <g id="specialized-modules">
    <!-- @news/alerts -->
    <rect x="50" y="4880" width="350" height="130" fill="white" stroke="#999" stroke-width="1"/>
    <rect x="50" y="4880" width="350" height="25" fill="#ffcdd2"/>
    <text x="225" y="4898" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">@news/alerts</text>
    <text x="60" y="4920" font-family="Arial" font-size="9">Alerting on crawl failures, threshold breaches</text>
    <text x="60" y="4935" font-family="Arial" font-size="9">Email, Slack, PagerDuty integrations</text>
    <text x="60" y="4955" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Add Slack webhook for error rate &gt;5%"</text>
    <text x="60" y="4970" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Create digest email of daily crawl stats"</text>
    <text x="60" y="4998" font-family="Arial" font-size="8">Deps: @news/telemetry, nodemailer</text>
    
    <!-- @news/scheduler -->
    <rect x="420" y="4880" width="350" height="130" fill="white" stroke="#999" stroke-width="1"/>
    <rect x="420" y="4880" width="350" height="25" fill="#c8e6c9"/>
    <text x="595" y="4898" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">@news/scheduler</text>
    <text x="430" y="4920" font-family="Arial" font-size="9">Cron-based crawl scheduling</text>
    <text x="430" y="4935" font-family="Arial" font-size="9">Timezone-aware, rate limit coordination</text>
    <text x="430" y="4955" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Schedule site crawl at 6am local time"</text>
    <text x="430" y="4970" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Add calendar view of scheduled crawls"</text>
    <text x="430" y="4998" font-family="Arial" font-size="8">Deps: node-cron, @news/config</text>
    
    <!-- @news/export -->
    <rect x="790" y="4880" width="350" height="130" fill="white" stroke="#999" stroke-width="1"/>
    <rect x="790" y="4880" width="350" height="25" fill="#fff9c4"/>
    <text x="965" y="4898" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">@news/export</text>
    <text x="800" y="4920" font-family="Arial" font-size="9">Data export to various formats</text>
    <text x="800" y="4935" font-family="Arial" font-size="9">CSV, JSON, Parquet, S3 upload</text>
    <text x="800" y="4955" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Export articles to S3 in Parquet format"</text>
    <text x="800" y="4970" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Create incremental export since last run"</text>
    <text x="800" y="4998" font-family="Arial" font-size="8">Deps: @news/db-core, @aws-sdk/s3</text>
    
    <!-- @news/api -->
    <rect x="1160" y="4880" width="350" height="130" fill="white" stroke="#999" stroke-width="1"/>
    <rect x="1160" y="4880" width="350" height="25" fill="#e1bee7"/>
    <text x="1335" y="4898" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">@news/api</text>
    <text x="1170" y="4920" font-family="Arial" font-size="9">REST/GraphQL API for data access</text>
    <text x="1170" y="4935" font-family="Arial" font-size="9">Authentication, rate limiting, caching</text>
    <text x="1170" y="4955" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Add GraphQL endpoint for article queries"</text>
    <text x="1170" y="4970" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Implement API key authentication"</text>
    <text x="1170" y="4998" font-family="Arial" font-size="8">Deps: express, graphql, @news/db-core</text>
    
    <!-- @news/plugins -->
    <rect x="1530" y="4880" width="350" height="130" fill="white" stroke="#999" stroke-width="1"/>
    <rect x="1530" y="4880" width="350" height="25" fill="#ffe0b2"/>
    <text x="1705" y="4898" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">@news/plugins</text>
    <text x="1540" y="4920" font-family="Arial" font-size="9">Plugin system for extensibility</text>
    <text x="1540" y="4935" font-family="Arial" font-size="9">Custom extractors, filters, enrichers</text>
    <text x="1540" y="4955" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Create plugin for Twitter embed extraction"</text>
    <text x="1540" y="4970" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Add plugin hot-reload without restart"</text>
    <text x="1540" y="4998" font-family="Arial" font-size="8">Deps: @news/crawler-core</text>
    
    <!-- @news/ml -->
    <rect x="1900" y="4880" width="350" height="130" fill="white" stroke="#999" stroke-width="1"/>
    <rect x="1900" y="4880" width="350" height="25" fill="#b2ebf2"/>
    <text x="2075" y="4898" text-anchor="middle" font-family="Arial" font-size="12" font-weight="bold">@news/ml</text>
    <text x="1910" y="4920" font-family="Arial" font-size="9">Machine learning integrations</text>
    <text x="1910" y="4935" font-family="Arial" font-size="9">NER, topic classification, embeddings</text>
    <text x="1910" y="4955" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Add BERT-based topic classifier"</text>
    <text x="1910" y="4970" font-family="Arial" font-size="9" fill="#666">ðŸ’¡ "Generate embeddings for semantic search"</text>
    <text x="1910" y="4998" font-family="Arial" font-size="8">Deps: @tensorflow/tfjs, onnxruntime</text>
  </g>
  
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <!-- FINAL NOTES -->
  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  
  <rect x="50" y="5030" width="2220" height="130" fill="#fff3e0" stroke="#ff6f00" stroke-width="2"/>
  <text x="1160" y="5060" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="#e65100">
    ðŸ“‹ ARCHITECTURE NOTES FOR AI AGENTS
  </text>
  
  <text x="70" y="5090" font-family="Arial" font-size="11">
    â€¢ Each module should have a README.md with: Purpose, Installation, API Reference, Examples, Testing instructions
  </text>
  <text x="70" y="5108" font-family="Arial" font-size="11">
    â€¢ Use npm workspaces or lerna for local development before full separation
  </text>
  <text x="70" y="5126" font-family="Arial" font-size="11">
    â€¢ Publish to private npm registry (Verdaccio, GitHub Packages) for version control
  </text>
  <text x="70" y="5144" font-family="Arial" font-size="11">
    â€¢ Each module gets its own GitHub repo with CI/CD pipeline, CODEOWNERS, and branch protection
  </text>
  
  <text x="1200" y="5090" font-family="Arial" font-size="11">
    â€¢ Create an umbrella "news-crawler" package that depends on all modules for easy installation
  </text>
  <text x="1200" y="5108" font-family="Arial" font-size="11">
    â€¢ Version modules semantically: breaking changes = major bump across dependent modules
  </text>
  <text x="1200" y="5126" font-family="Arial" font-size="11">
    â€¢ Use changesets or semantic-release for automated versioning
  </text>
  <text x="1200" y="5144" font-family="Arial" font-size="11">
    â€¢ Document inter-module contracts in TypeScript interfaces stored in @news/types
  </text>

</svg>
