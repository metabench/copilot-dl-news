<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
  <!-- Definitions for markers and gradients -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
    </marker>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="2" dy="2" result="offsetblur"/>
      <feComponentTransfer>
        <feFuncA type="linear" slope="0.3"/>
      </feComponentTransfer>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="800" height="500" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="40" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="24" font-weight="bold" fill="#333">Gazetteer Deduplication Plan</text>
  <text x="400" y="65" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="14" fill="#666">Strategy: Identify, Merge, and Prune</text>

  <!-- Phase 1: Identification -->
  <g transform="translate(50, 100)">
    <rect x="0" y="0" width="200" height="350" rx="10" fill="#fff" stroke="#ccc" stroke-width="1" filter="url(#dropShadow)"/>
    <text x="100" y="30" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="16" font-weight="bold" fill="#d9534f">1. Current State (Duplicates)</text>
    
    <!-- Place A -->
    <g transform="translate(20, 60)">
      <rect x="0" y="0" width="160" height="100" rx="5" fill="#e2e3e5" stroke="#adb5bd"/>
      <text x="10" y="20" font-family="Consolas, monospace" font-size="12" font-weight="bold">ID: 439</text>
      <text x="10" y="40" font-family="Segoe UI, Arial, sans-serif" font-size="12">Name: Vaduz</text>
      <text x="10" y="55" font-family="Segoe UI, Arial, sans-serif" font-size="12">Kind: City</text>
      <text x="10" y="70" font-family="Segoe UI, Arial, sans-serif" font-size="12">CC: LI</text>
      <text x="10" y="85" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#666">Rel: admin_parent</text>
    </g>

    <!-- Place B -->
    <g transform="translate(20, 180)">
      <rect x="0" y="0" width="160" height="100" rx="5" fill="#e2e3e5" stroke="#adb5bd"/>
      <text x="10" y="20" font-family="Consolas, monospace" font-size="12" font-weight="bold">ID: 1002533</text>
      <text x="10" y="40" font-family="Segoe UI, Arial, sans-serif" font-size="12">Name: Vaduz</text>
      <text x="10" y="55" font-family="Segoe UI, Arial, sans-serif" font-size="12">Kind: City</text>
      <text x="10" y="70" font-family="Segoe UI, Arial, sans-serif" font-size="12">CC: LI</text>
      <text x="10" y="85" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#666">Rel: capital_of</text>
    </g>
    
    <!-- Match Indicator -->
    <path d="M 100 160 L 100 180" stroke="#d9534f" stroke-width="2" stroke-dasharray="4"/>
    <text x="105" y="175" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#d9534f">Match: Name + CC</text>
  </g>

  <!-- Arrow -->
  <line x1="260" y1="275" x2="290" y2="275" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Phase 2: Logic -->
  <g transform="translate(300, 100)">
    <rect x="0" y="0" width="200" height="350" rx="10" fill="#fff" stroke="#ccc" stroke-width="1" filter="url(#dropShadow)"/>
    <text x="100" y="30" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="16" font-weight="bold" fill="#f0ad4e">2. Merge Logic</text>
    
    <g transform="translate(20, 60)">
      <text x="0" y="0" font-family="Segoe UI, Arial, sans-serif" font-size="12">
        <tspan x="0" dy="1.2em" font-weight="bold">Selection Criteria:</tspan>
        <tspan x="10" dy="1.5em">• Prefer Lower ID</tspan>
        <tspan x="10" dy="1.5em">• Prefer Wikidata Source</tspan>
        <tspan x="10" dy="1.5em">• Prefer More Attributes</tspan>
        
        <tspan x="0" dy="2.5em" font-weight="bold">Action Plan:</tspan>
        <tspan x="10" dy="1.5em">1. Keep ID 439 (Target)</tspan>
        <tspan x="10" dy="1.5em">2. Move 'capital_of' rel</tspan>
        <tspan x="10" dy="1.5em">   from 1002533 to 439</tspan>
        <tspan x="10" dy="1.5em">3. Move Ext IDs to 439</tspan>
        <tspan x="10" dy="1.5em">4. Delete 1002533</tspan>
      </text>
    </g>
    
    <!-- Visual Merge -->
    <path d="M 100 240 L 100 280" stroke="#f0ad4e" stroke-width="4"/>
    <text x="110" y="265" font-family="Segoe UI, Arial, sans-serif" font-size="12" fill="#f0ad4e">MERGE</text>
  </g>

  <!-- Arrow -->
  <line x1="510" y1="275" x2="540" y2="275" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Phase 3: Result -->
  <g transform="translate(550, 100)">
    <rect x="0" y="0" width="200" height="350" rx="10" fill="#fff" stroke="#ccc" stroke-width="1" filter="url(#dropShadow)"/>
    <text x="100" y="30" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="16" font-weight="bold" fill="#5cb85c">3. Target State</text>
    
    <!-- Merged Place -->
    <g transform="translate(20, 120)">
      <rect x="0" y="0" width="160" height="120" rx="5" fill="#d4edda" stroke="#28a745" stroke-width="2"/>
      <text x="10" y="20" font-family="Consolas, monospace" font-size="12" font-weight="bold">ID: 439</text>
      <text x="10" y="40" font-family="Segoe UI, Arial, sans-serif" font-size="12">Name: Vaduz</text>
      <text x="10" y="55" font-family="Segoe UI, Arial, sans-serif" font-size="12">Kind: City</text>
      <text x="10" y="70" font-family="Segoe UI, Arial, sans-serif" font-size="12">CC: LI</text>
      
      <!-- Merged Relations -->
      <rect x="5" y="80" width="150" height="35" rx="3" fill="#fff" stroke="#28a745" stroke-dasharray="2"/>
      <text x="10" y="95" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#28a745">Rel: admin_parent</text>
      <text x="10" y="108" font-family="Segoe UI, Arial, sans-serif" font-size="10" fill="#28a745">Rel: capital_of (Merged)</text>
    </g>
    
    <text x="100" y="300" text-anchor="middle" font-family="Segoe UI, Arial, sans-serif" font-size="12" fill="#666" font-style="italic">Single Canonical Entity</text>
  </g>

</svg>