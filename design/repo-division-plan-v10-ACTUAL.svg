<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2400 1600">
  <title>Repository Division v10 - ACTUAL Implementation</title>
  <defs>
    <!-- WLILO PALETTE -->
    <linearGradient id="leatherBg" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#faf9f7"/><stop offset="100%" stop-color="#ebe8e2"/>
    </linearGradient>
    <linearGradient id="obsidianGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#2d2d2d"/><stop offset="100%" stop-color="#1a1a1a"/>
    </linearGradient>
    <marker id="goldArrow" markerWidth="8" markerHeight="8" refX="7" refY="4" orient="auto">
      <path d="M0,0 L0,8 L8,4z" fill="#c9a962"/>
    </marker>
    <filter id="softShadow">
      <feDropShadow dx="0" dy="8" stdDeviation="6" flood-color="#000" flood-opacity="0.25"/>
    </filter>
  </defs>

  <rect width="2400" height="1600" fill="url(#leatherBg)"/>

  <!-- GRID -->
  <g opacity="0.4">
      <line x1="800" y1="100" x2="800" y2="1500" stroke="#c9a962" stroke-dasharray="4,4"/>
      <line x1="1600" y1="100" x2="1600" y2="1500" stroke="#c9a962" stroke-dasharray="4,4"/>
  </g>
  
  <text x="400" y="60" text-anchor="middle" font-family="Segoe UI" font-size="24" fill="#2d2d2d" letter-spacing="4">STAGE 1: INGESTION</text>
  <text x="1200" y="60" text-anchor="middle" font-family="Segoe UI" font-size="24" fill="#2d2d2d" letter-spacing="4">STAGE 2: ANALYSIS</text>
  <text x="2000" y="60" text-anchor="middle" font-family="Segoe UI" font-size="24" fill="#2d2d2d" letter-spacing="4">STAGE 3: INTELLIGENCE</text>

  <!-- IMPORTANT NOTE OVERLAY -->
  <rect x="50" y="1450" width="2300" height="100" rx="4" fill="#fee2e2" stroke="#b91c1c" stroke-width="2"/>
  <text x="1200" y="1490" text-anchor="middle" font-family="Segoe UI" font-weight="bold" fill="#b91c1c" font-size="16">
    ARCHITECTURAL NOTE: Current implementation has tighter coupling than the target "Pure" v10 Plan.
  </text>
  <text x="1200" y="1520" text-anchor="middle" font-family="Segoe UI" fill="#7f1d1d" font-size="14">
    Core directly imports `db/sqlite` and `intelligence/TeacherService`. Separation is logical, not physical yet.
  </text>

  <!-- NEWS-CRAWLER-CORE -->
  <g transform="translate(60, 120)" filter="url(#softShadow)">
    <rect width="680" height="400" rx="8" fill="url(#obsidianGrad)" stroke="#c9a962" stroke-width="2"/>
    <text x="20" y="28" fill="#e8d5a3" font-family="Segoe UI" font-weight="bold" font-size="18">news-crawler-core</text>
    
    <g transform="translate(25, 70)">
        <text x="0" y="0" fill="#e8d5a3" font-weight="bold" font-family="Segoe UI">ORCHESTRATION ENGINE</text>
        <line x1="0" y1="8" x2="300" y2="8" stroke="#c9a962" stroke-width="1"/>
        
        <g transform="translate(0, 30)" font-family="Consolas" font-size="11" fill="#ccc">
             <text y="0" fill="#f87171">DIRECT DEPENDENCIES (Current)</text>
             <text y="20">require('../../data/db/sqlite')</text>
             <text y="35">require('../../intelligence/teacher/TeacherService')</text>
        </g>
    </g>

    <!-- API -->
    <g transform="translate(560, 240)">
        <rect width="120" height="140" rx="4" fill="#581845" stroke="#900C3F" stroke-width="2"/>
        <text x="60" y="20" fill="#fff" text-anchor="middle" font-family="Segoe UI" font-size="10" font-weight="bold">CORE API</text>
    </g>
  </g>

  <!-- NEWS-CRAWLER-DB -->
  <g transform="translate(60, 580)" filter="url(#softShadow)">
    <rect width="680" height="420" rx="8" fill="url(#obsidianGrad)" stroke="#22c55e" stroke-width="2"/>
    <text x="20" y="28" fill="#4ade80" font-family="Segoe UI" font-weight="bold" font-size="18">news-crawler-db</text>
    
    <!-- API -->
    <g transform="translate(560, 260)">
        <rect width="120" height="140" rx="4" fill="#581845" stroke="#900C3F" stroke-width="2"/>
        <text x="60" y="20" fill="#fff" text-anchor="middle" font-family="Segoe UI" font-size="10" font-weight="bold">DATA API</text>
    </g>
  </g>

  <!-- INTELLIGENCE (Teacher) -->
  <g transform="translate(1600, 120)" filter="url(#softShadow)">
     <rect width="700" height="700" rx="8" fill="url(#obsidianGrad)" stroke="#6366f1" stroke-width="2"/>
     <text x="20" y="28" fill="#a5b4fc" font-family="Segoe UI" font-weight="bold" font-size="18">news-intelligence</text>
     
     <g transform="translate(30, 80)">
         <rect width="640" height="100" fill="#6366f1" opacity="0.1" rx="4"/>
         <text x="10" y="30" fill="#fff" font-weight="bold">TeacherService (Rendering)</text>
         <text x="10" y="50" fill="#ccc" font-size="11">Provides Puppeteer/JS rendering capabilities.</text>
     </g>
  </g>

  <!-- COUPLING LINES -->
  <!-- Core -> DB (Direct) -->
  <path d="M 400,520 L 400,580" stroke="#f87171" stroke-width="3" stroke-dasharray="5,5" marker-end="url(#goldArrow)"/>
  <text x="410" y="550" fill="#f87171" font-size="12" font-weight="bold">DIRECT IMPORT</text>

  <!-- Core -> Teacher (Direct) -->
  <path d="M 740,320 L 1600,180" stroke="#f87171" stroke-width="2" stroke-dasharray="8,4" marker-end="url(#goldArrow)"/>
  <text x="1100" y="240" fill="#f87171" font-size="12" font-weight="bold">DIRECT IMPORT (TeacherService)</text>

</svg>
