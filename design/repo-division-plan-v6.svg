<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 1600">
  <title>Repository Division v6 - Detailed Implementation Map (Leather Edition)</title>
  <defs>
    <!-- Leather Texture Filter -->
    <filter id="leather" x="0%" y="0%" width="100%" height="100%">
      <!-- Base noise for leather grain -->
      <feTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="4" result="noise"/>
      <!-- Soften the noise -->
      <feGaussianBlur stdDeviation="0.5" in="noise" result="softNoise"/>
      <!-- Lighting to create depth -->
      <feDiffuseLighting in="softNoise" lighting-color="#ffffff" surfaceScale="1" result="texture">
        <feDistantLight azimuth="45" elevation="60"/>
      </feDiffuseLighting>
      <!-- Composite with a off-white base color -->
      <feFlood flood-color="#f8f9fa" flood-opacity="1" result="base"/>
      <feComposite operator="in" in="texture" in2="base" result="texturedBase"/>
      <feBlend mode="multiply" in="texturedBase" in2="base" result="finalLeather"/>
    </filter>

    <!-- Emboss effect for inset panels -->
    <filter id="emboss">
      <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur"/>
      <feOffset dx="1" dy="1" result="shadow"/>
      <feOffset dx="-1" dy="-1" result="highlight"/>
      <feComposite in="shadow" in2="SourceAlpha" operator="in" result="innerShadow"/>
      <feComposite in="highlight" in2="SourceAlpha" operator="in" result="innerHighlight"/>
      <feFlood flood-color="#000" flood-opacity="0.1" result="dark"/>
      <feFlood flood-color="#fff" flood-opacity="0.8" result="light"/>
      <feComposite in="dark" in2="innerShadow" operator="in" result="finalShadow"/>
      <feComposite in="light" in2="innerHighlight" operator="in" result="finalHighlight"/>
      <feMerge>
        <feMergeNode in="SourceGraphic"/>
        <feMergeNode in="finalShadow"/>
        <feMergeNode in="finalHighlight"/>
      </feMerge>
    </filter>

    <!-- Drop Shadow for floating elements -->
    <filter id="floatingShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="6"/>
      <feOffset dx="0" dy="8" result="offsetblur"/>
      <feFlood flood-color="#000000" flood-opacity="0.15"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Gradients -->
    <linearGradient id="coreBlue" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#3b82f6" stop-opacity="0.9"/><stop offset="100%" stop-color="#1d4ed8" stop-opacity="0.9"/>
    </linearGradient>
    <linearGradient id="dbGreen" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#22c55e" stop-opacity="0.9"/><stop offset="100%" stop-color="#15803d" stop-opacity="0.9"/>
    </linearGradient>
    <linearGradient id="intelIndigo" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#6366f1" stop-opacity="0.9"/><stop offset="100%" stop-color="#4338ca" stop-opacity="0.9"/>
    </linearGradient>
    <linearGradient id="apiPink" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#ec4899" stop-opacity="0.9"/><stop offset="100%" stop-color="#be185d" stop-opacity="0.9"/>
    </linearGradient>
    <linearGradient id="goldText" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#854d0e"/><stop offset="100%" stop-color="#a16207"/>
    </linearGradient>
    
    <marker id="arr" markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto">
      <path d="M0,0 L0,6 L6,3z" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background: White Leather -->
  <rect width="2000" height="1600" fill="#f8f9fa"/>
  <rect width="2000" height="1600" filter="url(#leather)" opacity="0.6"/>

  <!-- Title -->
  <text x="1000" y="60" text-anchor="middle" fill="url(#goldText)" font-family="Georgia" font-size="32" font-weight="bold" letter-spacing="1" filter="url(#floatingShadow)">Repository Division v6</text>
  <text x="1000" y="90" text-anchor="middle" fill="#64748b" font-family="Inter" font-size="14">Detailed Implementation Map • Source-Verified</text>
  
  <!-- Orbital Rings (Subtle guides) -->
  <circle cx="1000" cy="800" r="200" fill="none" stroke="#e2e8f0" stroke-width="2" stroke-dasharray="8,8"/>
  <circle cx="1000" cy="800" r="380" fill="none" stroke="#e2e8f0" stroke-width="2" stroke-dasharray="12,12"/>
  <circle cx="1000" cy="800" r="580" fill="none" stroke="#e2e8f0" stroke-width="2" stroke-dasharray="16,16"/>

  <!-- ===== CENTER: news-crawler-core ===== -->
  <g transform="translate(850,680)" font-family="Inter" filter="url(#floatingShadow)">
    <rect width="300" height="240" rx="16" fill="#fff"/>
    <rect width="300" height="40" rx="16 16 0 0" fill="url(#coreBlue)"/>
    <path d="M0 40 L300 40" stroke="#eff6ff" stroke-width="1"/>
    
    <text x="20" y="26" fill="#fff" font-size="14" font-weight="700">🕷️ news-crawler-core</text>
    <text x="230" y="26" fill="#bfdbfe" font-size="9" font-weight="600">ENGINE</text>

    <!-- Content Area -->
    <g transform="translate(15, 55)">
      <text x="0" y="0" fill="#3b82f6" font-size="9" font-weight="700">EXPORTED CLASSES</text>
      <path d="M0 5 L100 5" stroke="#3b82f6" stroke-width="0.5" opacity="0.3"/>
      
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="0" y="15">class NewsCrawler</text>
        <text x="10" y="28" fill="#64748b">crawl(): Promise&lt;Result&gt;</text>
        <text x="0" y="42">class PriorityQueue&lt;T&gt;</text>
        <text x="0" y="56">class RateLimiter</text>
      </g>

      <text x="140" y="0" fill="#3b82f6" font-size="9" font-weight="700">TELEMETRY</text>
      <path d="M140 5 L240 5" stroke="#3b82f6" stroke-width="0.5" opacity="0.3"/>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="140" y="15">telemetry.progress()</text>
        <text x="140" y="28">telemetry.problem()</text>
      </g>
    </g>
    
    <!-- Status Badge -->
    <rect x="220" y="210" width="70" height="20" rx="4" fill="#eff6ff"/>
    <text x="255" y="223" text-anchor="middle" fill="#1d4ed8" font-size="8" font-weight="700">CORE</text>
  </g>

  <!-- ===== TOP-LEFT: news-crawler-db ===== -->
  <g transform="translate(380,350)" font-family="Inter" filter="url(#floatingShadow)">
    <rect width="300" height="320" rx="16" fill="#fff"/>
    <rect width="300" height="40" rx="16 16 0 0" fill="url(#dbGreen)"/>
    
    <text x="20" y="26" fill="#fff" font-size="14" font-weight="700">💾 news-crawler-db</text>
    <text x="215" y="26" fill="#dcfce7" font-size="9" font-weight="600">EXTRACTED</text>

    <g transform="translate(15, 55)">
      <text x="0" y="0" fill="#15803d" font-size="9" font-weight="700">14 ACCESS MODULES</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="0" y="16" font-weight="700">adapter.articles</text>
        <text x="10" y="28" fill="#64748b">upsert(art): number</text>
        <text x="10" y="40" fill="#64748b">findById(id): Article</text>
        
        <text x="0" y="56" font-weight="700">adapter.fetches</text>
        <text x="10" y="68" fill="#64748b">insertFetch(f)</text>
        
        <text x="0" y="84" font-weight="700">adapter.links</text>
        <text x="0" y="98" font-weight="700">adapter.places</text>
        <text x="0" y="112" font-weight="700">adapter.documents</text>
        <text x="10" y="124" fill="#64748b">iterateAll()</text>
      </g>
      
      <text x="140" y="0" fill="#15803d" font-size="9" font-weight="700">ADAPTER FACTORY</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="140" y="16">createDbAdapter()</text>
        <text x="145" y="28" fill="#64748b">type: 'sqlite'|'pg'</text>
      </g>
    </g>
  </g>

  <!-- ===== TOP-RIGHT: news-intelligence ===== -->
  <g transform="translate(1320,350)" font-family="Inter" filter="url(#floatingShadow)">
    <rect width="300" height="300" rx="16" fill="#fff"/>
    <rect width="300" height="40" rx="16 16 0 0" fill="url(#intelIndigo)"/>
    
    <text x="20" y="26" fill="#fff" font-size="14" font-weight="700">🧠 news-intelligence</text>
    <text x="200" y="26" fill="#e0e7ff" font-size="9" font-weight="600">IMPLEMENTED</text>

    <g transform="translate(15, 55)">
      <text x="0" y="0" fill="#4338ca" font-size="9" font-weight="700">CLASSIFIERS ($src/intelligence)</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="0" y="16">Stage1UrlClassifier</text>
        <text x="0" y="28">Stage2ContentClassifier</text>
        <text x="0" y="40">Stage3PuppeteerClassifier</text>
        <text x="0" y="52">StageAggregator</text>
      </g>
      
      <text x="0" y="75" fill="#4338ca" font-size="9" font-weight="700">PLANNER ($src/intelligence)</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="0" y="91">PlannerHost</text>
        <text x="10" y="103" fill="#64748b">registerPlugin()</text>
        <text x="10" y="115" fill="#64748b">runCycle()</text>
      </g>

      <text x="140" y="0" fill="#4338ca" font-size="9" font-weight="700">GAP ANALYSIS</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="140" y="16">TopicHubGapAnalyzer</text>
        <text x="140" y="28">UrlClassificationService</text>
        <text x="140" y="40">IntelligentCrawlServer</text>
      </g>
    </g>
  </g>

  <!-- ===== TOP: news-api ===== -->
  <g transform="translate(720,90)" font-family="Inter" filter="url(#floatingShadow)">
    <rect width="560" height="180" rx="16" fill="#fff"/>
    <rect width="560" height="40" rx="16 16 0 0" fill="url(#apiPink)"/>
    
    <text x="20" y="26" fill="#fff" font-size="14" font-weight="700">🔌 news-api</text>
    <text x="460" y="26" fill="#fce7f3" font-size="9" font-weight="600">GATEWAY</text>

    <g transform="translate(20, 55)">
      <text x="0" y="0" fill="#be185d" font-size="9" font-weight="700">REST API</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="0" y="16">GET /api/v1/articles</text>
        <text x="0" y="28">GET /api/v1/trends</text>
        <text x="0" y="40">GET /billing/subscription</text>
      </g>
      
      <text x="160" y="0" fill="#be185d" font-size="9" font-weight="700">SECURITY</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="160" y="16">requireAuth(req, res)</text>
        <text x="160" y="28">RateLimit.check(ip)</text>
      </g>

      <text x="320" y="0" fill="#be185d" font-size="9" font-weight="700">SSE STREAMING</text>
      <g font-size="8" fill="#334155" font-family="Consolas, monospace">
        <text x="320" y="16">GET /events (Unified)</text>
        <text x="320" y="28">server.publish_observable</text>
      </g>
    </g>
  </g>

  <!-- Connectors -->
  <g fill="none" stroke="#cbd5e1" stroke-width="2" marker-end="url(#arr)">
    <path d="M 680,450 L 780,450 L 780,180"/> <!-- DB -> API -->
    <path d="M 1320,450 L 1220,450 L 1220,180"/> <!-- Intel -> API -->
    <path d="M 1000,680 L 1000,580 L 650,580 L 650,550"/> <!-- Core -> DB -->
    <path d="M 1000,680 L 1000,660 L 1400,660 L 1400,650"/> <!-- Core -> Intel -->
  </g>

</svg>
